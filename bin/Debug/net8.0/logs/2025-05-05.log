2025-05-05 01:34:36.8950 INFO Executed DbCommand (98ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [TourBookingDB]; 
2025-05-05 01:34:36.9589 INFO Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [TourBookingDB] SET READ_COMMITTED_SNAPSHOT ON;
END; 
2025-05-05 01:34:36.9731 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-05 01:34:36.9731 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-05 01:34:36.9889 INFO Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-05 01:34:37.0362 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-05 01:34:37.0362 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-05 01:34:37.0362 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-05 01:34:37.0491 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-05 01:34:37.0491 INFO Applying migration '20250420102330_InitDb'. 
2025-05-05 01:34:37.0738 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Categories] (
    [CategoryId] int NOT NULL IDENTITY,
    [CategoryName] nvarchar(200) NOT NULL,
    CONSTRAINT [PK_Categories] PRIMARY KEY ([CategoryId])
); 
2025-05-05 01:34:37.0738 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [UserId] int NOT NULL IDENTITY,
    [Email] nvarchar(200) NOT NULL,
    [FullName] nvarchar(200) NOT NULL,
    [Phone] nvarchar(200) NOT NULL,
    [Address] nvarchar(200) NOT NULL,
    [Password] nvarchar(200) NOT NULL,
    [Role] nvarchar(200) NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([UserId])
); 
2025-05-05 01:34:37.0768 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Tours] (
    [TourId] int NOT NULL IDENTITY,
    [Title] nvarchar(200) NOT NULL,
    [Capacity] int NOT NULL,
    [Description] nvarchar(200) NOT NULL,
    [AdultPrice] decimal(18,2) NOT NULL,
    [ChildPrice] decimal(18,2) NOT NULL,
    [Transport] nvarchar(200) NOT NULL,
    [StartTime] datetime2 NOT NULL,
    [EndTime] datetime2 NOT NULL,
    [Destination] nvarchar(200) NOT NULL,
    [Duration] nvarchar(200) NOT NULL,
    [Itinerary] nvarchar(2000) NOT NULL,
    [CategoryId] int NOT NULL,
    CONSTRAINT [PK_Tours] PRIMARY KEY ([TourId]),
    CONSTRAINT [FK_Tours_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([CategoryId]) ON DELETE CASCADE
); 
2025-05-05 01:34:37.0768 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Bookings] (
    [BookingId] int NOT NULL IDENTITY,
    [BookingDate] datetime2 NOT NULL,
    [AdultQuantity] int NOT NULL,
    [ChildQuantity] int NOT NULL,
    [TotalPrice] decimal(18,2) NOT NULL,
    [SpecialRequest] nvarchar(200) NOT NULL,
    [TourId] int NOT NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_Bookings] PRIMARY KEY ([BookingId]),
    CONSTRAINT [FK_Bookings_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE,
    CONSTRAINT [FK_Bookings_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([UserId]) ON DELETE CASCADE
); 
2025-05-05 01:34:37.0768 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Images] (
    [ImageId] int NOT NULL IDENTITY,
    [Url] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NOT NULL,
    [TourId] int NOT NULL,
    CONSTRAINT [PK_Images] PRIMARY KEY ([ImageId]),
    CONSTRAINT [FK_Images_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE
); 
2025-05-05 01:34:37.0768 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_TourId] ON [Bookings] ([TourId]); 
2025-05-05 01:34:37.0768 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_UserId] ON [Bookings] ([UserId]); 
2025-05-05 01:34:37.0768 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Images_TourId] ON [Images] ([TourId]); 
2025-05-05 01:34:37.0768 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Tours_CategoryId] ON [Tours] ([CategoryId]); 
2025-05-05 01:34:37.0768 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250420102330_InitDb', N'9.0.4'); 
2025-05-05 01:34:37.0768 INFO Applying migration '20250420102544_InitDb1'. 
2025-05-05 01:34:37.0768 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250420102544_InitDb1', N'9.0.4'); 
2025-05-05 01:34:37.0768 INFO Applying migration '20250423095046_InitDb4'. 
2025-05-05 01:34:37.0980 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Images] ADD [DayNumber] int NULL; 
2025-05-05 01:34:37.0980 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Images] ADD [IsCover] bit NOT NULL DEFAULT CAST(0 AS bit); 
2025-05-05 01:34:37.0980 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250423095046_InitDb4', N'9.0.4'); 
2025-05-05 01:34:37.0980 INFO Applying migration '20250423095641_InitDb5'. 
2025-05-05 01:34:37.1625 INFO Executed DbCommand (56ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Images]') AND [c].[name] = N'IsCover');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [Images] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [Images] DROP COLUMN [IsCover]; 
2025-05-05 01:34:37.1625 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250423095641_InitDb5', N'9.0.4'); 
2025-05-05 01:34:37.1625 INFO Applying migration '20250424181323_InitDb6'. 
2025-05-05 01:34:37.1625 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250424181323_InitDb6', N'9.0.4'); 
2025-05-05 01:34:37.1625 INFO Applying migration '20250429030813_AddDeparture'. 
2025-05-05 01:34:37.1854 INFO Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Tours]') AND [c].[name] = N'EndTime');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Tours] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Tours] DROP COLUMN [EndTime]; 
2025-05-05 01:34:37.1854 INFO Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Tours]') AND [c].[name] = N'StartTime');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Tours] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Tours] DROP COLUMN [StartTime]; 
2025-05-05 01:34:37.1854 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Tours] ADD [Departures] nvarchar(max) NOT NULL DEFAULT N''; 
2025-05-05 01:34:37.1854 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250429030813_AddDeparture', N'9.0.4'); 
2025-05-05 01:34:37.1854 INFO Applying migration '20250429111210_InitDb10'. 
2025-05-05 01:34:37.2221 INFO Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Tours]') AND [c].[name] = N'Description');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [Tours] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [Tours] ALTER COLUMN [Description] nvarchar(max) NOT NULL; 
2025-05-05 01:34:37.2221 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250429111210_InitDb10', N'9.0.4'); 
2025-05-05 01:34:37.2221 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result 
2025-05-05 01:34:59.6232 INFO Now listening on: http://localhost:5062 
2025-05-05 01:34:59.7534 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 01:34:59.7534 INFO Hosting environment: Development 
2025-05-05 01:34:59.7534 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 01:37:36.7349 INFO Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 01:45:34.4459 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 01:45:34.5757 INFO Executed DbCommand (78ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 01:45:34.6685 INFO Executed DbCommand (5ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:45:34.6880 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:45:34.6880 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:45:34.6880 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:45:34.6880 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:45:34.6880 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:45:34.6880 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:45:34.6880 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:45:34.6880 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:45:47.3693 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 01:45:47.3693 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 01:45:47.3736 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:45:47.3736 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:45:47.3736 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:45:47.3736 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:45:47.3736 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:45:47.3736 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:45:47.3736 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:45:47.3736 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:45:47.3736 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:47:27.1535 INFO Now listening on: http://localhost:5062 
2025-05-05 01:47:27.2793 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 01:47:27.2793 INFO Hosting environment: Development 
2025-05-05 01:47:27.2793 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 01:47:36.2781 INFO Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 01:47:36.3718 INFO Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 01:47:36.4874 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:47:36.5064 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:47:36.5064 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:47:36.5064 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:47:36.5064 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:47:36.5064 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:47:36.5064 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:47:36.5064 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:47:36.5064 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:58:10.4025 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 01:58:10.4049 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 01:58:10.4049 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:58:10.4049 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:58:10.4049 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:58:10.4049 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:58:10.4049 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:58:10.4049 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:58:10.4049 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:58:10.4049 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:58:10.4049 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 01:58:12.4226 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 01:58:12.4350 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 02:10:58.4631 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 02:10:58.4631 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 02:54:35.8447 INFO Now listening on: http://localhost:5062 
2025-05-05 02:54:35.9119 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 02:54:35.9119 INFO Hosting environment: Development 
2025-05-05 02:54:35.9119 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 02:54:42.8572 ERROR An unhandled exception has occurred while executing the request. System.InvalidOperationException: Both relationships between 'Tour.Category' and 'Category' and between 'Tour' and 'Category' could use {'CategoryId'} as the foreign key. To resolve this, configure the foreign key properties explicitly in 'OnModelCreating' on at least one of the relationships.
   at Microsoft.EntityFrameworkCore.Metadata.Conventions.ForeignKeyPropertyDiscoveryConvention.ProcessModelFinalizing(IConventionModelBuilder modelBuilder, IConventionContext`1 context)
   at Microsoft.EntityFrameworkCore.Metadata.Conventions.Internal.ConventionDispatcher.ImmediateConventionScope.OnModelFinalizing(IConventionModelBuilder modelBuilder)
   at Microsoft.EntityFrameworkCore.Metadata.Conventions.Internal.ConventionDispatcher.OnModelFinalizing(IConventionModelBuilder modelBuilder)
   at Microsoft.EntityFrameworkCore.Metadata.Internal.Model.FinalizeModel()
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at System.Linq.Queryable.OrderBy[TSource,TKey](IQueryable`1 source, Expression`1 keySelector)
   at TourBookingWeb.Controllers.TourController.Index(Nullable`1 page) in D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb\Controllers\TourController.cs:line 23
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-05 02:55:32.6251 INFO Now listening on: http://localhost:5062 
2025-05-05 02:55:32.6854 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 02:55:32.6854 INFO Hosting environment: Development 
2025-05-05 02:55:32.6854 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 02:55:34.8191 ERROR An unhandled exception has occurred while executing the request. System.InvalidOperationException: Both relationships between 'Tour.Category' and 'Category' and between 'Tour' and 'Category' could use {'CategoryId'} as the foreign key. To resolve this, configure the foreign key properties explicitly in 'OnModelCreating' on at least one of the relationships.
   at Microsoft.EntityFrameworkCore.Metadata.Conventions.ForeignKeyPropertyDiscoveryConvention.ProcessModelFinalizing(IConventionModelBuilder modelBuilder, IConventionContext`1 context)
   at Microsoft.EntityFrameworkCore.Metadata.Conventions.Internal.ConventionDispatcher.ImmediateConventionScope.OnModelFinalizing(IConventionModelBuilder modelBuilder)
   at Microsoft.EntityFrameworkCore.Metadata.Conventions.Internal.ConventionDispatcher.OnModelFinalizing(IConventionModelBuilder modelBuilder)
   at Microsoft.EntityFrameworkCore.Metadata.Internal.Model.FinalizeModel()
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at System.Linq.Queryable.OrderBy[TSource,TKey](IQueryable`1 source, Expression`1 keySelector)
   at TourBookingWeb.Controllers.TourController.Index(Nullable`1 page) in D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb\Controllers\TourController.cs:line 23
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-05 03:04:01.4860 INFO Now listening on: http://localhost:5062 
2025-05-05 03:04:01.5669 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 03:04:01.5669 INFO Hosting environment: Development 
2025-05-05 03:04:01.5669 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 03:04:04.1879 ERROR An unhandled exception has occurred while executing the request. System.InvalidOperationException: Both relationships between 'Booking.Tour' and 'Tour.Bookings' and between 'Booking' and 'Tour' could use {'TourId'} as the foreign key. To resolve this, configure the foreign key properties explicitly in 'OnModelCreating' on at least one of the relationships.
   at Microsoft.EntityFrameworkCore.Metadata.Conventions.ForeignKeyPropertyDiscoveryConvention.ProcessModelFinalizing(IConventionModelBuilder modelBuilder, IConventionContext`1 context)
   at Microsoft.EntityFrameworkCore.Metadata.Conventions.Internal.ConventionDispatcher.ImmediateConventionScope.OnModelFinalizing(IConventionModelBuilder modelBuilder)
   at Microsoft.EntityFrameworkCore.Metadata.Conventions.Internal.ConventionDispatcher.OnModelFinalizing(IConventionModelBuilder modelBuilder)
   at Microsoft.EntityFrameworkCore.Metadata.Internal.Model.FinalizeModel()
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at System.Linq.Queryable.OrderBy[TSource,TKey](IQueryable`1 source, Expression`1 keySelector)
   at TourBookingWeb.Controllers.TourController.Index(Nullable`1 page) in D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb\Controllers\TourController.cs:line 23
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-05 03:07:39.4415 INFO Now listening on: http://localhost:5062 
2025-05-05 03:07:39.5470 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 03:07:39.5470 INFO Hosting environment: Development 
2025-05-05 03:07:39.5470 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 03:07:42.9089 ERROR An unhandled exception has occurred while executing the request. System.InvalidOperationException: Both relationships between 'Booking.Tour' and 'Tour.Bookings' and between 'Booking' and 'Tour' could use {'TourId'} as the foreign key. To resolve this, configure the foreign key properties explicitly in 'OnModelCreating' on at least one of the relationships.
   at Microsoft.EntityFrameworkCore.Metadata.Conventions.ForeignKeyPropertyDiscoveryConvention.ProcessModelFinalizing(IConventionModelBuilder modelBuilder, IConventionContext`1 context)
   at Microsoft.EntityFrameworkCore.Metadata.Conventions.Internal.ConventionDispatcher.ImmediateConventionScope.OnModelFinalizing(IConventionModelBuilder modelBuilder)
   at Microsoft.EntityFrameworkCore.Metadata.Conventions.Internal.ConventionDispatcher.OnModelFinalizing(IConventionModelBuilder modelBuilder)
   at Microsoft.EntityFrameworkCore.Metadata.Internal.Model.FinalizeModel()
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at System.Linq.Queryable.OrderBy[TSource,TKey](IQueryable`1 source, Expression`1 keySelector)
   at TourBookingWeb.Controllers.TourController.Index(Nullable`1 page) in D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb\Controllers\TourController.cs:line 23
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-05 03:10:06.8242 INFO Now listening on: http://localhost:5062 
2025-05-05 03:10:06.9008 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 03:10:06.9008 INFO Hosting environment: Development 
2025-05-05 03:10:06.9008 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 03:10:09.3288 INFO Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 03:10:09.3943 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 03:10:09.4718 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:10:09.5000 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:10:09.5000 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:10:09.5000 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:10:09.5000 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:10:09.5000 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:10:09.5000 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:10:09.5000 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:10:09.5000 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:10:11.7219 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 03:10:11.7336 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 03:14:08.8421 INFO Now listening on: http://localhost:5062 
2025-05-05 03:14:08.9154 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 03:14:08.9154 INFO Hosting environment: Development 
2025-05-05 03:14:08.9154 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 03:14:11.9269 INFO Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 03:14:12.0089 INFO Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 03:14:12.0980 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:14:12.1275 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:14:12.1275 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:14:12.1275 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:14:12.1275 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:14:12.1275 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:14:12.1275 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:14:12.1275 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:14:12.1275 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:14:13.6239 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 03:14:13.6239 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 03:16:06.0157 INFO Now listening on: http://localhost:5062 
2025-05-05 03:16:06.1283 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 03:16:06.1283 INFO Hosting environment: Development 
2025-05-05 03:16:06.1283 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 03:16:09.0925 INFO Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 03:16:09.1720 INFO Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 03:16:09.2562 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:16:09.2852 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:16:09.2852 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:16:09.2852 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:16:09.2852 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:16:09.2852 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:16:09.2852 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:16:09.2852 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:16:09.2852 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:16:10.9915 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 03:16:11.0017 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 03:16:14.5273 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 03:16:14.5296 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 03:16:49.2707 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 03:16:49.2707 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 03:16:49.2785 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:16:49.2785 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:16:49.2785 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:16:49.2785 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:16:49.2785 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:16:49.2785 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:16:49.2785 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:16:49.2785 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:16:49.2785 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:16:51.0099 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 03:16:51.0138 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 03:19:38.7957 INFO Now listening on: http://localhost:5062 
2025-05-05 03:19:38.9120 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 03:19:38.9120 INFO Hosting environment: Development 
2025-05-05 03:19:38.9120 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 03:23:11.4620 INFO Now listening on: http://localhost:5062 
2025-05-05 03:23:11.5724 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 03:23:11.5724 INFO Hosting environment: Development 
2025-05-05 03:23:11.5724 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 03:23:14.2996 INFO Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 03:23:14.3826 INFO Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 03:23:14.4712 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:23:14.5029 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:23:14.5029 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:23:14.5029 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:23:14.5029 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:23:14.5029 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:23:14.5029 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:23:14.5029 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:23:14.5029 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:23:16.2939 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 03:23:16.2939 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 03:23:18.0514 INFO Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 03:39:11.7090 INFO Now listening on: http://localhost:5062 
2025-05-05 03:39:11.8123 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 03:39:11.8123 INFO Hosting environment: Development 
2025-05-05 03:39:11.8123 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 03:39:15.4681 INFO Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 03:39:15.5690 INFO Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 03:39:15.6714 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:39:15.7049 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:39:15.7049 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:39:15.7049 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:39:15.7049 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:39:15.7049 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:39:15.7049 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:39:15.7049 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:39:15.7049 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:39:17.0074 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 03:39:17.0196 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 03:39:19.4909 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 03:40:58.7510 INFO Now listening on: http://localhost:5062 
2025-05-05 03:40:58.8357 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 03:40:58.8357 INFO Hosting environment: Development 
2025-05-05 03:40:58.8357 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 03:41:02.5057 INFO Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 03:41:02.5962 INFO Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 03:41:02.6844 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:41:02.7146 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:41:02.7159 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:41:02.7159 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:41:02.7159 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:41:02.7159 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:41:02.7159 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:41:02.7159 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:41:02.7159 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:41:03.7928 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 03:41:03.8055 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 03:41:05.5484 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 03:42:20.0524 INFO Now listening on: http://localhost:5062 
2025-05-05 03:42:20.1703 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 03:42:20.1703 INFO Hosting environment: Development 
2025-05-05 03:42:20.1703 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 03:42:23.4948 INFO Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 03:42:23.5915 INFO Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 03:42:23.6928 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:42:23.7267 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:42:23.7267 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:42:23.7267 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:42:23.7267 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:42:23.7267 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:42:23.7310 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:42:23.7310 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:42:23.7310 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:42:28.7899 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 03:42:28.8146 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 03:42:31.5131 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 03:45:04.8258 INFO Now listening on: http://localhost:5062 
2025-05-05 03:45:04.9065 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 03:45:04.9065 INFO Hosting environment: Development 
2025-05-05 03:45:04.9065 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 03:45:08.2031 INFO Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 03:45:08.2815 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 03:45:08.3652 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:45:08.3928 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:45:08.3928 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:45:08.3928 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:45:08.3928 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:45:08.3928 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:45:08.3928 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:45:08.3928 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:45:08.3928 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:45:09.5456 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 03:45:09.5597 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 03:45:11.3629 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 03:45:27.2368 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 03:45:27.2368 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 03:45:29.1410 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 03:46:20.6955 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 03:46:20.7036 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[TourId] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 03:46:20.7036 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-05 03:46:24.0763 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-05 03:46:26.3198 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-05 03:48:11.4979 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 03:48:11.6184 ERROR Failed executing DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 200), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7); 
2025-05-05 03:48:11.6441 ERROR An exception occurred in the database while saving changes for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'CategoryId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:04ad68ff-c63c-4ab1-9777-5dfc71940f08
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'CategoryId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:04ad68ff-c63c-4ab1-9777-5dfc71940f08
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2025-05-05 03:51:41.9340 INFO Now listening on: http://localhost:5062 
2025-05-05 03:51:42.0055 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 03:51:42.0055 INFO Hosting environment: Development 
2025-05-05 03:51:42.0055 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 03:51:58.9367 INFO Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 03:51:59.0235 INFO Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 03:51:59.1157 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:51:59.1513 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:51:59.1513 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:51:59.1535 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:51:59.1535 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:51:59.1535 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:51:59.1535 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:51:59.1535 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:51:59.1535 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:52:01.8183 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 03:52:01.8302 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 03:52:03.6418 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 03:52:16.3106 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 03:52:16.4182 ERROR Failed executing DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 200), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7); 
2025-05-05 03:52:16.4412 ERROR An exception occurred in the database while saving changes for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'CategoryId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:e71d4d8b-0de5-4e8f-999b-38b9feec963a
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'CategoryId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:e71d4d8b-0de5-4e8f-999b-38b9feec963a
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2025-05-05 03:57:24.2270 INFO Now listening on: http://localhost:5062 
2025-05-05 03:57:24.3084 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 03:57:24.3084 INFO Hosting environment: Development 
2025-05-05 03:57:24.3084 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 03:57:27.8532 INFO Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 03:57:27.9474 INFO Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 03:57:28.0425 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:57:28.0762 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:57:28.0762 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:57:28.0762 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:57:28.0762 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:57:28.0762 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:57:28.0762 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:57:28.0762 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:57:28.0762 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 03:57:29.3999 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 03:57:29.4170 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 03:57:31.0533 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 03:57:41.9961 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 03:57:42.0976 ERROR Failed executing DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 200), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7); 
2025-05-05 03:57:42.1197 ERROR An exception occurred in the database while saving changes for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'CategoryId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:97522b1a-3a41-4a1d-9375-b998b85eaa47
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'CategoryId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:97522b1a-3a41-4a1d-9375-b998b85eaa47
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2025-05-05 03:57:49.0311 ERROR An unhandled exception has occurred while executing the request. Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'CategoryId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:97522b1a-3a41-4a1d-9375-b998b85eaa47
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at TourBookingWeb.Controllers.TourController.Booking(Int32 TourId, Int32 AdultQuantity, Int32 ChildQuantity, String FullName, String Email, String Phone, String Address, String SpecialRequest, String PaymentMethod) in D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb\Controllers\TourController.cs:line 73
   at lambda_method248(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-05 04:00:54.9792 INFO Now listening on: http://localhost:5062 
2025-05-05 04:00:55.0877 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 04:00:55.0877 INFO Hosting environment: Development 
2025-05-05 04:00:55.0877 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 04:00:58.4090 INFO Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 04:00:58.5009 INFO Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 04:00:58.5990 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:00:58.6328 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:00:58.6328 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:00:58.6328 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:00:58.6328 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:00:58.6382 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:00:58.6382 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:00:58.6382 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:00:58.6382 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:01:22.1059 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:01:22.1284 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:01:23.8336 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 04:01:37.8373 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 04:01:37.9611 ERROR Failed executing DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 200), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7); 
2025-05-05 04:01:37.9869 ERROR An exception occurred in the database while saving changes for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'CategoryId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b3fb8a24-88d0-4e1e-8df1-d9c9b687d41b
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'CategoryId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b3fb8a24-88d0-4e1e-8df1-d9c9b687d41b
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2025-05-05 04:02:16.4573 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-05 04:02:16.4801 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-05 04:02:16.4931 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-05 04:02:16.5398 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-05 04:02:16.5453 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-05 04:02:16.5453 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-05 04:02:16.5453 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-05 04:02:16.5453 INFO Applying migration '20250504210158_AddCategoryIdToTours'. 
2025-05-05 04:02:16.5723 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Tours] DROP CONSTRAINT [FK_Tours_Categories_CategoryId]; 
2025-05-05 04:02:16.5723 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD [CategoryId] int NULL; 
2025-05-05 04:02:16.5723 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_CategoryId] ON [Bookings] ([CategoryId]); 
2025-05-05 04:02:16.5753 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD CONSTRAINT [FK_Bookings_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([CategoryId]); 
2025-05-05 04:02:16.5753 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Tours] ADD CONSTRAINT [FK_Tours_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([CategoryId]) ON DELETE NO ACTION; 
2025-05-05 04:02:16.5753 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250504210158_AddCategoryIdToTours', N'9.0.4'); 
2025-05-05 04:02:16.5753 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result 
2025-05-05 04:02:22.6896 INFO Now listening on: http://localhost:5062 
2025-05-05 04:02:22.8208 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 04:02:22.8208 INFO Hosting environment: Development 
2025-05-05 04:02:22.8208 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 04:02:43.0771 INFO Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 04:02:43.1687 INFO Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 04:02:43.2586 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:02:43.2891 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:02:43.2891 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:02:43.2891 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:02:43.2891 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:02:43.2891 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:02:43.2891 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:02:43.2891 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:02:43.2891 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:02:45.6391 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:02:45.6391 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:02:48.5264 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 04:03:03.9801 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 04:03:04.0955 INFO Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 200), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7); 
2025-05-05 04:03:04.1216 ERROR An exception occurred in the database while saving changes for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Bookings_Users_UserId". The conflict occurred in database "TourBookingDB", table "dbo.Users", column 'UserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:33223d05-505f-4c47-b7ac-ef0d005638da
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Bookings_Users_UserId". The conflict occurred in database "TourBookingDB", table "dbo.Users", column 'UserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:33223d05-505f-4c47-b7ac-ef0d005638da
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2025-05-05 04:06:19.9142 INFO Now listening on: http://localhost:5062 
2025-05-05 04:06:20.0262 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 04:06:20.0262 INFO Hosting environment: Development 
2025-05-05 04:06:20.0262 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 04:07:30.3704 INFO Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 04:07:30.4661 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 04:07:30.5672 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:07:30.6018 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:07:30.6018 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:07:30.6018 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:07:30.6018 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:07:30.6018 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:07:30.6018 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:07:30.6073 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:07:30.6073 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:07:32.4086 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:07:32.4226 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:07:35.0758 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 04:07:44.0699 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 04:07:44.1894 INFO Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 200), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7); 
2025-05-05 04:07:44.2181 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 04:07:44.2181 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 04:07:44.2181 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:07:44.2181 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:07:44.2181 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:07:44.2181 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:07:44.2181 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:07:44.2181 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:07:44.2181 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:07:44.2181 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:07:44.2181 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:08.3899 INFO Now listening on: http://localhost:5062 
2025-05-05 04:11:08.4694 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 04:11:08.4694 INFO Hosting environment: Development 
2025-05-05 04:11:08.4694 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 04:11:11.7632 INFO Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 04:11:11.8462 INFO Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 04:11:11.9440 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:11.9722 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:11.9722 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:11.9722 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:11.9722 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:11.9722 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:11.9722 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:11.9722 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:11.9722 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:14.5157 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:11:14.5332 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:11:17.5918 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 04:11:41.0696 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 04:11:41.1747 INFO Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 200), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7); 
2025-05-05 04:11:41.2029 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 04:11:41.2029 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 04:11:41.2029 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:41.2029 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:41.2029 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:41.2029 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:41.2029 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:41.2029 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:41.2029 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:41.2029 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:41.2029 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:58.9653 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 04:11:58.9674 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 04:11:58.9674 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:58.9829 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:58.9829 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:58.9829 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:58.9829 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:58.9829 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:58.9829 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:58.9829 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:11:58.9829 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:12:09.7470 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 04:12:09.7526 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[TourId] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 04:12:09.7526 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-05 04:12:12.1389 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-05 04:12:14.4755 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 04:12:14.4755 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[TourId] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 04:12:14.4755 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-05 04:12:44.4846 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-05 04:16:01.3252 INFO Now listening on: http://localhost:5062 
2025-05-05 04:16:01.4238 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 04:16:01.4238 INFO Hosting environment: Development 
2025-05-05 04:16:01.4238 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 04:16:04.4249 INFO Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 04:16:04.5137 INFO Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 04:16:04.6069 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:16:04.6399 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:16:04.6399 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:16:04.6399 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:16:04.6399 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:16:04.6399 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:16:04.6399 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:16:04.6399 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:16:04.6399 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:16:05.7799 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:16:05.7799 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:16:08.1430 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 04:16:19.6442 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 04:16:19.7538 INFO Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 200), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7); 
2025-05-05 04:17:18.0600 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 04:21:04.5338 INFO Now listening on: http://localhost:5062 
2025-05-05 04:21:04.6123 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 04:21:04.6123 INFO Hosting environment: Development 
2025-05-05 04:21:04.6123 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 04:21:08.0100 INFO Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 04:21:08.0971 INFO Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 04:21:08.2062 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:21:08.2333 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:21:08.2333 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:21:08.2333 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:21:08.2333 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:21:08.2333 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:21:08.2333 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:21:08.2333 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:21:08.2333 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:21:09.8530 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:21:09.8666 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:21:12.0955 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 04:21:21.6371 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 04:21:21.7725 INFO Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 200), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7); 
2025-05-05 04:21:21.7992 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 04:21:21.7992 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 04:21:21.7992 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:21:21.7992 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:21:21.7992 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:21:21.7992 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:21:21.7992 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:21:21.7992 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:21:21.8094 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:21:21.8094 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:21:21.8094 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:22:33.6461 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:22:33.6461 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:22:35.1011 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 04:26:05.6423 INFO Now listening on: http://localhost:5062 
2025-05-05 04:26:05.7670 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 04:26:05.7670 INFO Hosting environment: Development 
2025-05-05 04:26:05.7670 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 04:26:08.9143 INFO Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 04:26:09.0199 INFO Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 04:26:09.1169 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:26:09.1497 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:26:09.1497 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:26:09.1497 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:26:09.1497 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:26:09.1536 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:26:09.1536 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:26:09.1536 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:26:09.1536 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:26:10.5142 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:26:10.5142 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:26:12.1706 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 04:26:22.3075 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 04:26:22.3168 INFO Executed DbCommand (4ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-05 04:26:22.4304 INFO Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-05 04:26:22.4817 INFO Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 200), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7); 
2025-05-05 04:26:22.4817 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 04:26:22.4993 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 04:26:22.5205 INFO Executed DbCommand (16ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:26:22.5205 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:26:22.5205 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:26:22.5205 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:26:22.5205 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:26:22.5205 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:26:22.5205 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:26:22.5205 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:26:22.5205 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:26:56.6009 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:26:56.6009 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:26:58.7971 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 04:27:20.1390 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 04:27:20.1390 INFO Executed DbCommand (1ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-05 04:27:20.1390 INFO Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-05 04:27:20.1390 INFO Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 200), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7); 
2025-05-05 04:27:20.1565 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 04:27:20.1565 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 04:27:20.1565 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:27:20.1565 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:27:20.1565 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:27:20.1565 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:27:20.1565 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:27:20.1565 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:27:20.1565 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:27:20.1565 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:27:20.1565 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:29:05.1233 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:29:05.1233 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:29:09.6826 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:29:09.6845 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:30:11.3739 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:30:11.3739 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:30:14.5691 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:30:14.5691 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:31:29.6518 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 04:31:33.3686 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 04:31:33.3686 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 04:31:33.3750 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:31:33.3750 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:31:33.3750 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:31:33.3750 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:31:33.3750 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:31:33.3750 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:31:33.3750 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:31:33.3750 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:31:33.3750 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:31:42.1751 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:31:42.1751 INFO Executed DbCommand (5ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:31:53.1587 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:31:53.1587 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:32:44.9186 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:32:44.9203 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:33:02.8162 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:33:02.8162 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:33:05.5437 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:33:05.5458 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:42:50.6448 INFO Now listening on: http://localhost:5062 
2025-05-05 04:42:50.7410 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 04:42:50.7410 INFO Hosting environment: Development 
2025-05-05 04:42:50.7410 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 04:42:53.0961 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 04:42:53.6575 INFO Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 04:42:53.7453 INFO Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 04:42:53.8404 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:42:53.8712 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:42:53.8712 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:42:53.8730 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:42:53.8730 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:42:53.8730 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:42:53.8730 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:42:53.8730 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:42:53.8730 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:42:58.0648 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:42:58.0814 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:43:00.7317 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 04:43:09.6074 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 04:43:09.6074 INFO Executed DbCommand (1ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-05 04:43:09.6323 ERROR Failed executing DbCommand (3ms) [Parameters=[@__TourScheduleId_0='?' (DbType = Int32), @__TourId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[EndDate], [t].[Price], [t].[RemainingSeats], [t].[StartDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__TourScheduleId_0 AND [t].[TourId] = @__TourId_1 
2025-05-05 04:43:09.6684 ERROR An exception occurred while iterating over the results of a query for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'TourSchedules'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:4dceeb76-663a-4534-bc2c-885ca9af0335
Error Number:208,State:1,Class:16 Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'TourSchedules'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:4dceeb76-663a-4534-bc2c-885ca9af0335
Error Number:208,State:1,Class:16
2025-05-05 04:43:58.4277 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 04:44:03.8634 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 04:44:04.0265 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 04:44:37.3700 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 04:45:03.8105 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 04:45:04.1599 INFO Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-05 04:45:04.1696 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-05 04:45:04.1696 INFO Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-05 04:45:04.2425 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-05 04:45:04.2501 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-05 04:45:04.2501 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-05 04:45:04.2501 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-05 04:45:04.2627 INFO Applying migration '20250504214437_AddTourScheduleFix'. 
2025-05-05 04:45:04.2903 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD [PaymentMethod] nvarchar(max) NOT NULL DEFAULT N''; 
2025-05-05 04:45:04.2951 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD [TourScheduleId] int NOT NULL DEFAULT 0; 
2025-05-05 04:45:04.2951 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TourSchedules] (
    [TourScheduleId] int NOT NULL IDENTITY,
    [TourId] int NOT NULL,
    [StartDate] datetime2 NOT NULL,
    [EndDate] datetime2 NOT NULL,
    [Price] decimal(18,2) NOT NULL,
    [RemainingSeats] int NOT NULL,
    CONSTRAINT [PK_TourSchedules] PRIMARY KEY ([TourScheduleId]),
    CONSTRAINT [FK_TourSchedules_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE
); 
2025-05-05 04:45:04.3187 INFO Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_TourScheduleId] ON [Bookings] ([TourScheduleId]); 
2025-05-05 04:45:04.3187 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_TourSchedules_TourId] ON [TourSchedules] ([TourId]); 
2025-05-05 04:45:04.3335 ERROR Failed executing DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD CONSTRAINT [FK_Bookings_TourSchedules_TourScheduleId] FOREIGN KEY ([TourScheduleId]) REFERENCES [TourSchedules] ([TourScheduleId]) ON DELETE CASCADE; 
2025-05-05 04:47:17.9951 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 04:47:35.4961 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 04:47:35.7776 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-05 04:47:35.7841 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-05 04:47:35.8001 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-05 04:47:35.8416 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-05 04:47:35.8416 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-05 04:47:35.8416 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-05 04:47:35.8416 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-05 04:47:35.8416 INFO Applying migration '20250504214437_AddTourScheduleFix'. 
2025-05-05 04:47:35.8769 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD [PaymentMethod] nvarchar(max) NOT NULL DEFAULT N''; 
2025-05-05 04:47:35.8769 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD [TourScheduleId] int NOT NULL DEFAULT 0; 
2025-05-05 04:47:35.8769 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TourSchedules] (
    [TourScheduleId] int NOT NULL IDENTITY,
    [TourId] int NOT NULL,
    [StartDate] datetime2 NOT NULL,
    [EndDate] datetime2 NOT NULL,
    [Price] decimal(18,2) NOT NULL,
    [RemainingSeats] int NOT NULL,
    CONSTRAINT [PK_TourSchedules] PRIMARY KEY ([TourScheduleId]),
    CONSTRAINT [FK_TourSchedules_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE
); 
2025-05-05 04:47:35.8769 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_TourScheduleId] ON [Bookings] ([TourScheduleId]); 
2025-05-05 04:47:35.8769 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_TourSchedules_TourId] ON [TourSchedules] ([TourId]); 
2025-05-05 04:47:35.8769 ERROR Failed executing DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD CONSTRAINT [FK_Bookings_TourSchedules_TourScheduleId] FOREIGN KEY ([TourScheduleId]) REFERENCES [TourSchedules] ([TourScheduleId]) ON DELETE CASCADE; 
2025-05-05 04:48:09.0455 INFO Now listening on: http://localhost:5062 
2025-05-05 04:48:09.1295 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 04:48:09.1295 INFO Hosting environment: Development 
2025-05-05 04:48:09.1295 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 04:48:11.5040 WARN The foreign key property 'Booking.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. 
2025-05-05 04:48:11.5277 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 04:48:12.1006 INFO Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 04:48:12.1876 INFO Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 04:48:12.2859 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:48:12.3159 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:48:12.3159 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:48:12.3159 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:48:12.3159 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:48:12.3159 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:48:12.3159 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:48:12.3159 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:48:12.3159 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:48:13.2858 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:48:13.2993 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:48:15.1263 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 04:48:22.9594 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 04:48:22.9667 INFO Executed DbCommand (1ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-05 04:48:22.9851 ERROR Failed executing DbCommand (3ms) [Parameters=[@__TourScheduleId_0='?' (DbType = Int32), @__TourId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[EndDate], [t].[Price], [t].[RemainingSeats], [t].[StartDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__TourScheduleId_0 AND [t].[TourId] = @__TourId_1 
2025-05-05 04:48:23.0027 ERROR An exception occurred while iterating over the results of a query for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'TourSchedules'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:ada4d751-8c6b-4789-9457-6fa3aab5236e
Error Number:208,State:1,Class:16 Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'TourSchedules'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:ada4d751-8c6b-4789-9457-6fa3aab5236e
Error Number:208,State:1,Class:16
2025-05-05 04:49:43.5167 WARN The foreign key property 'Booking.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. 
2025-05-05 04:49:43.5649 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 04:49:44.1249 INFO Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-05 04:49:44.1395 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-05 04:49:44.1395 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-05 04:49:57.3504 WARN The foreign key property 'Booking.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. 
2025-05-05 04:49:57.3947 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 04:50:41.7270 WARN The foreign key property 'Booking.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. 
2025-05-05 04:50:41.7662 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 04:50:42.0269 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-05 04:50:42.0335 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-05 04:50:42.0492 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-05 04:50:42.0915 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-05 04:50:42.0915 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-05 04:50:42.0915 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-05 04:50:42.0915 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-05 04:50:42.1069 INFO Applying migration '20250504214437_AddTourScheduleFix'. 
2025-05-05 04:50:42.1268 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD [PaymentMethod] nvarchar(max) NOT NULL DEFAULT N''; 
2025-05-05 04:50:42.1268 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD [TourScheduleId] int NOT NULL DEFAULT 0; 
2025-05-05 04:50:42.1268 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TourSchedules] (
    [TourScheduleId] int NOT NULL IDENTITY,
    [TourId] int NOT NULL,
    [StartDate] datetime2 NOT NULL,
    [EndDate] datetime2 NOT NULL,
    [Price] decimal(18,2) NOT NULL,
    [RemainingSeats] int NOT NULL,
    CONSTRAINT [PK_TourSchedules] PRIMARY KEY ([TourScheduleId]),
    CONSTRAINT [FK_TourSchedules_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE
); 
2025-05-05 04:50:42.1268 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_TourScheduleId] ON [Bookings] ([TourScheduleId]); 
2025-05-05 04:50:42.1268 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_TourSchedules_TourId] ON [TourSchedules] ([TourId]); 
2025-05-05 04:50:42.1268 ERROR Failed executing DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD CONSTRAINT [FK_Bookings_TourSchedules_TourScheduleId] FOREIGN KEY ([TourScheduleId]) REFERENCES [TourSchedules] ([TourScheduleId]) ON DELETE CASCADE; 
2025-05-05 04:52:35.0507 WARN The foreign key property 'Booking.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. 
2025-05-05 04:52:35.0909 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 04:52:35.5866 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-05 04:52:35.6011 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-05 04:52:35.6103 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-05 04:53:03.4546 WARN The foreign key property 'Booking.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. 
2025-05-05 04:53:03.4961 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 04:53:16.3552 WARN The foreign key property 'Booking.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. 
2025-05-05 04:53:16.4056 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 04:53:16.6794 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-05 04:53:16.6859 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-05 04:53:16.7029 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-05 04:53:16.7454 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-05 04:53:16.7505 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-05 04:53:16.7505 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-05 04:53:16.7505 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-05 04:53:16.7505 INFO Applying migration '20250504214437_AddTourScheduleFix'. 
2025-05-05 04:53:16.7832 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD [PaymentMethod] nvarchar(max) NOT NULL DEFAULT N''; 
2025-05-05 04:53:16.7832 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD [TourScheduleId] int NOT NULL DEFAULT 0; 
2025-05-05 04:53:16.7832 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TourSchedules] (
    [TourScheduleId] int NOT NULL IDENTITY,
    [TourId] int NOT NULL,
    [StartDate] datetime2 NOT NULL,
    [EndDate] datetime2 NOT NULL,
    [Price] decimal(18,2) NOT NULL,
    [RemainingSeats] int NOT NULL,
    CONSTRAINT [PK_TourSchedules] PRIMARY KEY ([TourScheduleId]),
    CONSTRAINT [FK_TourSchedules_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE
); 
2025-05-05 04:53:16.7938 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_TourScheduleId] ON [Bookings] ([TourScheduleId]); 
2025-05-05 04:53:16.7938 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_TourSchedules_TourId] ON [TourSchedules] ([TourId]); 
2025-05-05 04:53:16.7938 ERROR Failed executing DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD CONSTRAINT [FK_Bookings_TourSchedules_TourScheduleId] FOREIGN KEY ([TourScheduleId]) REFERENCES [TourSchedules] ([TourScheduleId]) ON DELETE CASCADE; 
2025-05-05 04:55:07.2516 WARN The foreign key property 'Booking.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. 
2025-05-05 04:55:07.2913 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 04:55:07.7868 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-05 04:55:07.8007 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-05 04:55:07.8108 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-05 04:55:33.5812 WARN The foreign key property 'Booking.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. 
2025-05-05 04:55:33.6228 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 04:55:46.0212 WARN The foreign key property 'Booking.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core. 
2025-05-05 04:55:46.0613 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 04:55:46.3291 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-05 04:55:46.3291 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-05 04:55:46.3516 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-05 04:55:46.3934 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-05 04:55:46.3934 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-05 04:55:46.3934 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-05 04:55:46.3934 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-05 04:55:46.4087 INFO Applying migration '20250504214437_AddTourScheduleFix'. 
2025-05-05 04:55:46.4283 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD [PaymentMethod] nvarchar(max) NOT NULL DEFAULT N''; 
2025-05-05 04:55:46.4283 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD [TourScheduleId] int NOT NULL DEFAULT 0; 
2025-05-05 04:55:46.4283 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TourSchedules] (
    [TourScheduleId] int NOT NULL IDENTITY,
    [TourId] int NOT NULL,
    [StartDate] datetime2 NOT NULL,
    [EndDate] datetime2 NOT NULL,
    [Price] decimal(18,2) NOT NULL,
    [RemainingSeats] int NOT NULL,
    CONSTRAINT [PK_TourSchedules] PRIMARY KEY ([TourScheduleId]),
    CONSTRAINT [FK_TourSchedules_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE
); 
2025-05-05 04:55:46.4283 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_TourScheduleId] ON [Bookings] ([TourScheduleId]); 
2025-05-05 04:55:46.4283 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_TourSchedules_TourId] ON [TourSchedules] ([TourId]); 
2025-05-05 04:55:46.4386 ERROR Failed executing DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD CONSTRAINT [FK_Bookings_TourSchedules_TourScheduleId] FOREIGN KEY ([TourScheduleId]) REFERENCES [TourSchedules] ([TourScheduleId]) ON DELETE CASCADE; 
2025-05-05 04:56:43.6077 INFO Now listening on: http://localhost:5062 
2025-05-05 04:56:43.6957 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 04:56:43.6957 INFO Hosting environment: Development 
2025-05-05 04:56:43.6957 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 04:56:46.7379 INFO Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 04:56:46.8258 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 04:56:46.9282 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:56:46.9587 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:56:46.9587 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:56:46.9587 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:56:46.9587 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:56:46.9587 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:56:46.9587 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:56:46.9587 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:56:46.9587 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 04:56:47.8359 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 04:56:47.8490 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 04:56:49.9220 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 04:57:01.0533 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 04:57:01.0608 INFO Executed DbCommand (1ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-05 04:57:01.0787 ERROR Failed executing DbCommand (3ms) [Parameters=[@__TourScheduleId_0='?' (DbType = Int32), @__TourId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[EndDate], [t].[Price], [t].[RemainingSeats], [t].[StartDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__TourScheduleId_0 AND [t].[TourId] = @__TourId_1 
2025-05-05 04:57:01.0975 ERROR An exception occurred while iterating over the results of a query for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'TourSchedules'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:cac42d4f-65ab-49b8-84b6-58a0e8ee9fe3
Error Number:208,State:1,Class:16 Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'TourSchedules'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:cac42d4f-65ab-49b8-84b6-58a0e8ee9fe3
Error Number:208,State:1,Class:16
2025-05-05 05:03:14.8634 INFO Now listening on: http://localhost:5062 
2025-05-05 05:03:14.9548 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 05:03:14.9548 INFO Hosting environment: Development 
2025-05-05 05:03:14.9548 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 05:03:20.6156 INFO Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 05:03:20.7191 INFO Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 05:03:20.8226 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:03:20.8510 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:03:20.8510 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:03:20.8510 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:03:20.8510 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:03:20.8510 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:03:20.8510 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:03:20.8510 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:03:20.8565 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:03:21.6693 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 05:03:21.6858 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 05:03:23.7369 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 05:03:45.8760 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 05:03:45.9927 ERROR Failed executing DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 50), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [PaymentMethod], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9); 
2025-05-05 05:03:46.0196 ERROR An exception occurred in the database while saving changes for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'PaymentMethod'.
Invalid column name 'TourScheduleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:ad34e40b-e535-49bd-9dcc-5c952e184da9
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'PaymentMethod'.
Invalid column name 'TourScheduleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:ad34e40b-e535-49bd-9dcc-5c952e184da9
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2025-05-05 05:04:14.8210 INFO Now listening on: http://localhost:5062 
2025-05-05 05:04:14.9063 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 05:04:14.9063 INFO Hosting environment: Development 
2025-05-05 05:04:14.9063 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 05:04:18.1702 INFO Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 05:04:18.2623 INFO Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 05:04:18.3603 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:04:18.3978 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:04:18.3978 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:04:18.3978 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:04:18.3978 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:04:18.3978 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:04:18.3978 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:04:18.4033 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:04:18.4033 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:04:19.6209 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 05:04:19.6330 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 05:04:21.4201 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 05:04:30.3001 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 05:04:30.3001 INFO Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-05 05:04:30.4432 ERROR Failed executing DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 50), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [PaymentMethod], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9); 
2025-05-05 05:04:30.4678 ERROR An exception occurred in the database while saving changes for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'PaymentMethod'.
Invalid column name 'TourScheduleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7172809-dadf-431a-ab51-ab93e26de55a
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'PaymentMethod'.
Invalid column name 'TourScheduleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7172809-dadf-431a-ab51-ab93e26de55a
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2025-05-05 05:05:43.7287 INFO Now listening on: http://localhost:5062 
2025-05-05 05:05:43.8202 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 05:05:43.8202 INFO Hosting environment: Development 
2025-05-05 05:05:43.8202 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 05:05:48.7828 INFO Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 05:05:48.9183 INFO Executed DbCommand (32ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 05:05:49.0699 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:05:49.1063 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:05:49.1096 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:05:49.1096 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:05:49.1096 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:05:49.1096 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:05:49.1096 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:05:49.1096 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:05:49.1096 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:06:02.1499 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 05:06:02.1629 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 05:06:04.0714 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 05:06:15.4141 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 05:06:15.4223 INFO Executed DbCommand (1ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-05 05:06:15.5703 ERROR Failed executing DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 50), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [PaymentMethod], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9); 
2025-05-05 05:06:15.5960 ERROR An exception occurred in the database while saving changes for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'PaymentMethod'.
Invalid column name 'TourScheduleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:c06232fa-3d54-4cab-bce5-f0e776545aae
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'PaymentMethod'.
Invalid column name 'TourScheduleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:c06232fa-3d54-4cab-bce5-f0e776545aae
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2025-05-05 05:10:45.2165 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-05 05:10:45.2395 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-05 05:10:45.2585 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-05 05:10:45.3031 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-05 05:10:45.3031 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-05 05:10:45.3031 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-05 05:10:45.3118 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-05 05:10:45.3118 INFO Applying migration '20250504214437_AddTourScheduleFix'. 
2025-05-05 05:10:45.3445 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD [PaymentMethod] nvarchar(max) NOT NULL DEFAULT N''; 
2025-05-05 05:10:45.3445 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD [TourScheduleId] int NOT NULL DEFAULT 0; 
2025-05-05 05:10:45.3445 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TourSchedules] (
    [TourScheduleId] int NOT NULL IDENTITY,
    [TourId] int NOT NULL,
    [StartDate] datetime2 NOT NULL,
    [EndDate] datetime2 NOT NULL,
    [Price] decimal(18,2) NOT NULL,
    [RemainingSeats] int NOT NULL,
    CONSTRAINT [PK_TourSchedules] PRIMARY KEY ([TourScheduleId]),
    CONSTRAINT [FK_TourSchedules_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE
); 
2025-05-05 05:10:45.3445 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_TourScheduleId] ON [Bookings] ([TourScheduleId]); 
2025-05-05 05:10:45.3445 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_TourSchedules_TourId] ON [TourSchedules] ([TourId]); 
2025-05-05 05:10:45.3445 ERROR Failed executing DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD CONSTRAINT [FK_Bookings_TourSchedules_TourScheduleId] FOREIGN KEY ([TourScheduleId]) REFERENCES [TourSchedules] ([TourScheduleId]) ON DELETE CASCADE; 
2025-05-05 05:11:36.6969 INFO Now listening on: http://localhost:5062 
2025-05-05 05:11:36.7808 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 05:11:36.7808 INFO Hosting environment: Development 
2025-05-05 05:11:36.7808 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 05:12:11.7452 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 05:12:12.4117 INFO Executed DbCommand (37ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 05:12:12.5304 INFO Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 05:12:12.6379 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:12:12.6708 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:12:12.6708 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:12:12.6708 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:12:12.6708 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:12:12.6708 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:12:12.6708 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:12:12.6708 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:12:12.6708 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:12:13.7873 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 05:12:13.8055 INFO Executed DbCommand (6ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 05:12:15.5166 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 05:12:23.6673 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 05:12:23.6744 INFO Executed DbCommand (1ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-05 05:12:23.8072 INFO Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 200), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7); 
2025-05-05 05:12:23.8343 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 05:12:23.8343 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 05:12:23.8426 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:12:23.8426 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:12:23.8426 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:12:23.8426 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:12:23.8426 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:12:23.8426 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:12:23.8426 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:12:23.8426 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 05:12:23.8426 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 15:57:47.9884 INFO Now listening on: http://localhost:5062 
2025-05-05 15:57:48.0764 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 15:57:48.0764 INFO Hosting environment: Development 
2025-05-05 15:57:48.0764 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 15:57:53.0016 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 15:57:54.1966 INFO Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 15:57:54.3337 INFO Executed DbCommand (66ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 15:57:54.4175 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 15:57:54.4486 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 15:57:54.4486 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 15:57:54.4511 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 15:57:54.4511 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 15:57:54.4511 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 15:57:54.4511 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 15:57:54.4511 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 15:57:54.4511 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 15:57:56.7566 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 15:57:56.7669 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 15:57:59.1691 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 15:58:42.6434 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 15:58:42.6573 INFO Executed DbCommand (6ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-05 15:58:42.7791 INFO Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 200), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7); 
2025-05-05 15:58:42.8089 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 15:58:42.8112 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 15:58:42.8112 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 15:58:42.8112 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 15:58:42.8112 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 15:58:42.8112 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 15:58:42.8112 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 15:58:42.8112 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 15:58:42.8112 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 15:58:42.8112 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 15:58:42.8112 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:00:29.6554 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 16:00:29.6554 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 16:00:38.2704 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 16:01:21.1284 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 16:01:21.1284 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[TourId] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 16:01:21.1445 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-05 16:01:23.2351 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 16:01:23.2351 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-05 16:01:38.9132 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 16:01:38.9132 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 16:06:33.3253 INFO Now listening on: http://localhost:5062 
2025-05-05 16:06:33.3844 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 16:06:33.3844 INFO Hosting environment: Development 
2025-05-05 16:06:33.3844 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 16:06:37.0641 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 16:06:37.4539 INFO Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 16:06:37.5145 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 16:06:37.5875 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:06:37.6110 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:06:37.6110 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:06:37.6110 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:06:37.6110 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:06:37.6110 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:06:37.6110 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:06:37.6110 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:06:37.6110 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:06:39.5074 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 16:06:39.5176 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 16:06:42.1952 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 16:07:04.3981 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 16:07:04.4067 INFO Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-05 16:07:04.5106 INFO Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 200), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7); 
2025-05-05 16:07:04.5380 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 16:07:04.5380 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 16:07:04.5450 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:07:04.5450 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:07:04.5450 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:07:04.5450 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:07:04.5450 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:07:04.5450 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:07:04.5450 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:07:04.5450 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:07:04.5450 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:07:35.3719 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 16:07:35.3719 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 16:07:37.5542 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 16:08:05.7398 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 16:08:05.7398 INFO Executed DbCommand (1ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-05 16:08:05.7398 INFO Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 200), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7); 
2025-05-05 16:08:05.7566 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 16:08:05.7566 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 16:08:05.7566 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:08:05.7566 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:08:05.7627 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:08:05.7627 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:08:05.7627 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:08:05.7627 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:08:05.7627 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:08:05.7627 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:08:05.7627 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:08:08.5661 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 16:08:08.5661 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 16:08:42.0943 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 16:09:03.7240 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 16:09:03.7240 INFO Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-05 16:09:03.7327 INFO Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 200), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7); 
2025-05-05 16:09:03.7327 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 16:09:03.7327 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 16:09:03.7509 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:09:03.7509 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:09:03.7509 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:09:03.7509 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:09:03.7509 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:09:03.7509 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:09:03.7509 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:09:03.7509 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:09:03.7509 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:09:20.2672 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 16:09:20.2672 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 16:09:23.4473 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 16:09:52.5233 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 16:09:52.5233 INFO Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-05 16:09:52.5320 INFO Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-05 16:09:52.5320 INFO Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 200), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7); 
2025-05-05 16:09:52.5513 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 16:09:52.5513 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 16:09:52.5513 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:09:52.5513 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:09:52.5513 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:09:52.5513 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:09:52.5513 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:09:52.5601 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:09:52.5601 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:09:52.5601 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:09:52.5601 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:13:01.8142 INFO Now listening on: http://localhost:5062 
2025-05-05 16:13:01.9236 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 16:13:01.9236 INFO Hosting environment: Development 
2025-05-05 16:13:01.9236 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 16:13:15.1269 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 16:13:15.7082 INFO Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 16:13:15.8041 INFO Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 16:13:15.8986 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:13:15.9288 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:13:15.9288 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:13:15.9288 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:13:15.9288 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:13:15.9288 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:13:15.9288 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:13:15.9288 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:13:15.9288 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:14:17.9838 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 16:14:17.9838 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[TourId] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 16:14:18.0020 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-05 16:15:10.0862 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 16:15:10.0862 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 16:15:10.0953 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:15:10.0953 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:15:10.0953 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:15:10.0953 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:15:10.0953 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:15:10.0953 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:15:10.0953 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:15:10.0953 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:15:10.0953 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:17:41.3442 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 16:17:41.3607 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 16:18:05.5114 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 16:18:20.7366 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 16:19:42.7162 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 16:19:42.7162 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 16:21:47.7495 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 16:27:38.9170 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 16:27:38.9195 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[TourId] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 16:27:38.9195 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-05 16:31:11.0744 INFO Now listening on: http://localhost:5062 
2025-05-05 16:31:11.1335 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 16:31:11.1335 INFO Hosting environment: Development 
2025-05-05 16:31:11.1335 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 16:35:26.5714 INFO Now listening on: http://localhost:5062 
2025-05-05 16:35:26.6536 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 16:35:26.6536 INFO Hosting environment: Development 
2025-05-05 16:35:26.6536 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 16:35:48.2916 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 16:35:48.6706 INFO Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 16:35:48.7303 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 16:35:48.8070 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:35:48.8320 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:35:48.8320 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:35:48.8320 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:35:48.8320 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:35:48.8320 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:35:48.8320 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:35:48.8320 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:35:48.8320 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:35:55.6453 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 16:35:55.6576 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 16:36:05.3363 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-05 16:36:08.2636 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 16:36:08.2636 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[TourId] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 16:36:08.2636 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-05 16:36:52.0259 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 16:36:52.0294 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[TourId] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 16:36:52.0294 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-05 16:37:36.0425 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 16:37:36.0511 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__id_0 
2025-05-05 16:37:36.1395 INFO Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Images]
OUTPUT 1
WHERE [ImageId] = @p0;
DELETE FROM [Images]
OUTPUT 1
WHERE [ImageId] = @p1;
DELETE FROM [Tours]
OUTPUT 1
WHERE [TourId] = @p2; 
2025-05-05 16:37:36.1583 INFO Đã xóa tour ID 14: Tour Bến Tre – Cồn Phụng 1N và xóa toàn bộ thư mục ảnh 
2025-05-05 16:37:36.1745 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 16:37:36.1745 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[TourId] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 16:37:36.1745 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-05 16:43:19.7299 INFO Now listening on: http://localhost:5062 
2025-05-05 16:43:19.7927 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 16:43:19.7927 INFO Hosting environment: Development 
2025-05-05 16:43:19.7927 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 16:43:20.6954 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 16:43:21.0629 INFO Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 16:43:21.1219 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[TourId] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 16:43:21.1855 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-05 16:43:34.2761 INFO Now listening on: http://localhost:5062 
2025-05-05 16:43:34.3483 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 16:43:34.3483 INFO Hosting environment: Development 
2025-05-05 16:43:34.3483 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 16:45:34.6384 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 16:45:35.2030 INFO Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 16:45:35.2913 INFO Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 16:45:35.3907 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:45:35.4196 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:45:35.4196 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:45:35.4196 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:45:35.4196 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:45:35.4196 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:45:35.4196 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:45:35.4196 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:45:35.4196 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:45:37.4543 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 16:45:37.4684 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 16:45:40.7697 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 16:46:13.1062 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 16:48:29.0706 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 16:48:29.0706 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 16:48:29.0804 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:48:29.0804 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:48:29.0804 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:48:29.0804 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:48:29.0804 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:48:29.0804 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:48:29.0804 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:48:29.0804 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:48:29.0804 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:53:55.4629 INFO Now listening on: http://localhost:5062 
2025-05-05 16:53:55.5439 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 16:53:55.5439 INFO Hosting environment: Development 
2025-05-05 16:53:55.5439 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 16:53:58.2339 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 16:53:58.8220 INFO Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 16:53:58.9031 INFO Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 16:53:58.9879 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:53:59.0180 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:53:59.0180 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:53:59.0180 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:53:59.0180 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:53:59.0180 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:53:59.0180 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:53:59.0180 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:53:59.0180 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:54:03.8846 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 16:54:03.9022 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 16:54:14.5996 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 16:54:14.6660 ERROR An unhandled exception has occurred while executing the request. System.InvalidOperationException: The layout view '~/Areas/Admin/Views/Shared/_Layout.cshtml' could not be located. The following locations were searched:
~/Areas/Admin/Views/Shared/_Layout.cshtml
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.GetLayoutPage(ViewContext context, String executingFilePath, String layoutPath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-05 16:56:33.1999 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 16:56:44.8750 INFO Now listening on: http://localhost:5062 
2025-05-05 16:56:44.9325 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 16:56:44.9325 INFO Hosting environment: Development 
2025-05-05 16:56:44.9325 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 16:56:57.5714 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 16:56:57.9898 INFO Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 16:58:03.0591 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 16:59:15.2888 INFO Now listening on: http://localhost:5062 
2025-05-05 16:59:15.3696 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 16:59:15.3696 INFO Hosting environment: Development 
2025-05-05 16:59:15.3696 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 16:59:22.8121 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 16:59:23.3733 INFO Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 16:59:45.9840 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 16:59:46.0086 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 16:59:46.0395 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:59:46.0542 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:59:46.0542 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:59:46.0542 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:59:46.0542 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:59:46.0542 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:59:46.0542 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:59:46.0542 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:59:46.0603 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 16:59:50.1487 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 16:59:50.1653 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 16:59:55.0829 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 17:00:02.0922 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 17:00:02.0922 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 17:00:07.0978 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 17:00:25.8785 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 17:01:04.5908 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 17:01:04.5908 INFO Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-05 17:01:04.6762 INFO Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-05 17:01:04.7012 INFO Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 200), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7); 
2025-05-05 17:01:04.7012 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 17:01:04.7012 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 17:01:04.7205 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:01:04.7205 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:01:04.7205 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:01:04.7205 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:01:04.7205 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:01:04.7205 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:01:04.7205 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:01:04.7205 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:01:04.7205 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:01:09.6912 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 17:01:16.2001 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 17:01:16.2025 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 17:01:18.4690 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 17:06:59.3961 INFO Now listening on: http://localhost:5062 
2025-05-05 17:06:59.4784 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 17:06:59.4784 INFO Hosting environment: Development 
2025-05-05 17:06:59.4784 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 17:07:06.9183 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 17:07:07.6507 INFO Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 17:07:10.1384 INFO Executed DbCommand (28ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-05 17:07:10.1384 ERROR The view 'Details' was not found. Searched locations: /Areas/Admin/Views/Bookings/Details.cshtml, /Areas/Admin/Views/Shared/Details.cshtml, /Views/Shared/Details.cshtml 
2025-05-05 17:07:10.1384 ERROR An unhandled exception has occurred while executing the request. System.InvalidOperationException: The view 'Details' was not found. The following locations were searched:
/Areas/Admin/Views/Bookings/Details.cshtml
/Areas/Admin/Views/Shared/Details.cshtml
/Views/Shared/Details.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-05 17:07:12.4824 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 17:07:20.3414 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[BookingId] = @__p_0 
2025-05-05 17:07:20.4317 INFO Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Bookings]
OUTPUT 1
WHERE [BookingId] = @p0; 
2025-05-05 17:07:20.4590 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 17:08:54.1079 INFO Now listening on: http://localhost:5062 
2025-05-05 17:08:54.2081 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 17:08:54.2081 INFO Hosting environment: Development 
2025-05-05 17:08:54.2081 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 17:09:02.0443 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 17:09:02.7347 INFO Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 17:09:40.4894 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 17:09:40.5221 INFO Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 17:09:40.5513 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:09:40.5676 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:09:40.5676 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:09:40.5676 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:09:40.5676 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:09:40.5676 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:09:40.5676 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:09:40.5676 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:09:40.5676 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:09:42.2004 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-05 17:09:42.2161 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-05 17:09:44.6690 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-05 17:14:48.1682 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 17:14:51.2785 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 17:14:51.2785 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[TourId] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 17:14:51.2785 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-05 17:14:53.1087 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-05 17:14:53.1087 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-05 17:15:00.7379 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 17:15:04.2205 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 17:15:09.4512 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 17:15:40.0483 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-05 17:15:40.0483 ERROR The view 'Details' was not found. Searched locations: /Areas/Admin/Views/Bookings/Details.cshtml, /Areas/Admin/Views/Shared/Details.cshtml, /Views/Shared/Details.cshtml 
2025-05-05 17:15:40.0483 ERROR An unhandled exception has occurred while executing the request. System.InvalidOperationException: The view 'Details' was not found. The following locations were searched:
/Areas/Admin/Views/Bookings/Details.cshtml
/Areas/Admin/Views/Shared/Details.cshtml
/Views/Shared/Details.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-05 17:15:41.8364 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 17:16:48.1982 INFO Now listening on: http://localhost:5062 
2025-05-05 17:16:48.2640 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 17:16:48.2640 INFO Hosting environment: Development 
2025-05-05 17:16:48.2640 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 17:16:51.8398 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 17:16:52.3939 INFO Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-05 17:16:52.4840 INFO Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-05 17:16:52.5797 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:16:52.6107 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:16:52.6107 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:16:52.6107 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:16:52.6107 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:16:52.6107 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:16:52.6107 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:16:52.6107 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:16:52.6107 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-05 17:16:58.2537 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 17:17:00.3384 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-05 17:17:00.3412 ERROR The view 'Details' was not found. Searched locations: /Areas/Admin/Views/Bookings/Details.cshtml, /Areas/Admin/Views/Shared/Details.cshtml, /Views/Shared/Details.cshtml 
2025-05-05 17:17:00.3412 ERROR An unhandled exception has occurred while executing the request. System.InvalidOperationException: The view 'Details' was not found. The following locations were searched:
/Areas/Admin/Views/Bookings/Details.cshtml
/Areas/Admin/Views/Shared/Details.cshtml
/Views/Shared/Details.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-05 17:17:49.3037 INFO Now listening on: http://localhost:5062 
2025-05-05 17:17:49.3689 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 17:17:49.3689 INFO Hosting environment: Development 
2025-05-05 17:17:49.3689 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 17:18:06.1974 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 17:18:06.6134 INFO Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 17:18:37.5040 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 17:21:26.6580 INFO Now listening on: http://localhost:5062 
2025-05-05 17:21:26.7474 INFO Application started. Press Ctrl+C to shut down. 
2025-05-05 17:21:26.7483 INFO Hosting environment: Development 
2025-05-05 17:21:26.7483 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-05 17:21:33.4404 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-05 17:21:34.1727 INFO Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 17:21:40.2113 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-05 17:22:12.1375 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
