2025-05-12 00:02:10.2824 INFO Executed DbCommand (69ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 00:02:10.3903 INFO Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 00:02:10.8015 INFO Now listening on: http://localhost:5062 
2025-05-12 00:02:10.8538 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 00:02:10.8538 INFO Hosting environment: Development 
2025-05-12 00:02:10.8538 INFO Content root path: C:\Users\PC\Downloads\TourBookingWeb 
2025-05-12 00:06:20.7462 INFO Executed DbCommand (111ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 00:06:20.8634 INFO Executed DbCommand (13ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 00:06:21.3061 INFO Now listening on: http://localhost:5062 
2025-05-12 00:06:21.3828 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 00:06:21.3834 INFO Hosting environment: Development 
2025-05-12 00:06:21.3834 INFO Content root path: C:\Users\PC\Downloads\TourBookingWeb 
2025-05-12 00:16:07.2053 INFO Executed DbCommand (95ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 00:16:07.3107 INFO Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 00:16:07.7700 INFO Now listening on: http://localhost:5062 
2025-05-12 00:16:07.8282 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 00:16:07.8282 INFO Hosting environment: Development 
2025-05-12 00:16:07.8282 INFO Content root path: C:\Users\PC\Downloads\TourBookingWeb 
2025-05-12 00:21:03.5775 INFO Executed DbCommand (105ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 00:21:03.6973 INFO Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 00:21:04.1416 INFO Now listening on: http://localhost:5062 
2025-05-12 00:21:04.2054 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 00:21:04.2054 INFO Hosting environment: Development 
2025-05-12 00:21:04.2054 INFO Content root path: C:\Users\PC\Downloads\TourBookingWeb 
2025-05-12 00:22:29.0895 INFO Executed DbCommand (118ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 00:22:29.1934 INFO Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 00:22:29.6316 INFO Now listening on: http://localhost:5062 
2025-05-12 00:22:29.7005 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 00:22:29.7005 INFO Hosting environment: Development 
2025-05-12 00:22:29.7005 INFO Content root path: C:\Users\PC\Downloads\TourBookingWeb 
2025-05-12 00:23:30.9398 INFO Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 00:23:31.1574 INFO Executed DbCommand (7ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 00:23:31.1876 INFO Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 00:23:31.1876 INFO Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 00:23:31.2029 INFO Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 00:23:31.2151 INFO Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 00:23:31.2151 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 00:23:31.2151 INFO Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 00:23:31.2151 INFO Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 00:23:31.2151 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 00:23:31.2846 INFO Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 00:23:31.2920 WARN admin 
2025-05-12 00:23:34.2891 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 00:23:34.3604 INFO Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 00:23:34.5892 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 00:23:34.6248 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 00:23:36.3309 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 00:23:36.3435 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 00:23:37.2908 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 00:23:46.6310 INFO Executed DbCommand (11ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0 
2025-05-12 00:23:46.6735 INFO Executed DbCommand (13ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([b].[TotalPrice]), 0.0)
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0 
2025-05-12 00:23:46.7517 INFO Executed DbCommand (22ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryName] AS [Region], COUNT(*) AS [Count]
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
INNER JOIN [Categories] AS [c] ON [t].[CategoryId] = [c].[CategoryId]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
GROUP BY [c].[CategoryName] 
2025-05-12 00:23:46.7728 INFO Executed DbCommand (11ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b].[PaymentMethod] AS [Method], COUNT(*) AS [Count]
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
GROUP BY [b].[PaymentMethod] 
2025-05-12 00:23:46.7963 INFO Executed DbCommand (8ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[Key] AS [Month], COALESCE(SUM([b0].[TotalPrice]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[TotalPrice], DATEPART(month, [b].[DepartureDate]) AS [Key]
    FROM [Bookings] AS [b]
    WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
) AS [b0]
GROUP BY [b0].[Key] 
2025-05-12 00:23:46.8060 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 00:24:34.9107 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 00:24:34.9574 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 00:24:34.9861 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 00:24:34.9990 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 00:24:35.1521 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 00:24:35.2289 INFO Executed DbCommand (25ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 00:26:48.1453 INFO Executed DbCommand (141ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 00:26:48.2659 INFO Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 00:26:48.7150 INFO Now listening on: http://localhost:5062 
2025-05-12 00:26:48.7714 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 00:26:48.7714 INFO Hosting environment: Development 
2025-05-12 00:26:48.7714 INFO Content root path: C:\Users\PC\Downloads\TourBookingWeb 
2025-05-12 00:30:59.3286 INFO Executed DbCommand (98ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 00:30:59.4345 INFO Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 00:30:59.8750 INFO Now listening on: http://localhost:5062 
2025-05-12 00:30:59.9665 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 00:30:59.9665 INFO Hosting environment: Development 
2025-05-12 00:30:59.9665 INFO Content root path: C:\Users\PC\Downloads\TourBookingWeb 
2025-05-12 00:33:36.5331 INFO Executed DbCommand (41ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 00:33:36.6756 INFO Executed DbCommand (41ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 00:33:36.7954 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 00:33:36.8342 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 00:33:37.2355 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 00:33:37.3914 INFO Executed DbCommand (56ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 00:33:38.8342 INFO Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 00:33:38.8744 INFO Executed DbCommand (7ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 00:39:11.8961 INFO Executed DbCommand (83ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 00:39:12.0156 INFO Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 00:39:12.4745 INFO Now listening on: http://localhost:5062 
2025-05-12 00:39:12.5827 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 00:39:12.5827 INFO Hosting environment: Development 
2025-05-12 00:39:12.5827 INFO Content root path: C:\Users\PC\Downloads\TourBookingWeb 
2025-05-12 00:39:17.0204 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 00:39:17.1477 INFO Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 00:39:17.2955 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 00:39:17.3765 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 00:39:17.8404 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 00:39:17.9114 INFO Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 00:39:19.0747 INFO Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 00:39:19.1216 INFO Executed DbCommand (4ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 00:40:21.2703 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 00:40:21.2926 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 00:40:21.3156 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 00:40:21.3222 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 00:40:21.6467 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 00:40:21.6669 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 00:40:22.9614 INFO Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 00:40:22.9614 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 00:40:26.6920 INFO Executed DbCommand (9ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 00:40:26.7080 INFO Người dùng mở trang đặt tour: "Tour Ba Vì – Làng Văn hóa 1N" – Ngày đi: "17/10/2025" 
2025-05-12 00:40:26.7745 INFO Executed DbCommand (8ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 00:40:55.8042 INFO Executed DbCommand (15ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 00:41:06.8616 INFO Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 00:41:06.9721 INFO Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 00:41:07.0085 INFO Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 00:41:07.0367 INFO Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 00:41:07.0392 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 00:41:07.0392 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 00:41:07.1360 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 00:41:07.1360 WARN  
2025-05-12 00:41:10.5067 INFO Executed DbCommand (8ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 00:41:14.2632 INFO Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 00:41:14.3128 INFO Executed DbCommand (9ms) [Parameters=[@__user_UserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b].[TourScheduleId] = [t0].[TourScheduleId]
LEFT JOIN [Images] AS [i] ON [t].[TourId] = [i].[TourId]
WHERE [b].[UserId] = @__user_UserId_0
ORDER BY [b].[BookingDate] DESC, [b].[BookingId], [t].[TourId], [t0].[TourScheduleId] 
2025-05-12 00:41:17.6466 INFO Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 00:45:16.6925 INFO Executed DbCommand (87ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 00:45:16.7982 INFO Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 00:45:19.2083 INFO Now listening on: http://localhost:5062 
2025-05-12 00:45:19.2985 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 00:45:19.2985 INFO Hosting environment: Development 
2025-05-12 00:45:19.2985 INFO Content root path: C:\Users\PC\Downloads\TourBookingWeb 
2025-05-12 00:50:01.3396 INFO Executed DbCommand (121ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 00:50:01.4835 INFO Executed DbCommand (39ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 00:50:02.0429 INFO Now listening on: http://localhost:5062 
2025-05-12 00:50:02.1097 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 00:50:02.1097 INFO Hosting environment: Development 
2025-05-12 00:50:02.1097 INFO Content root path: C:\Users\PC\Downloads\TourBookingWeb 
2025-05-12 00:51:31.9300 INFO Executed DbCommand (60ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 00:51:57.4265 INFO Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 00:51:57.6393 INFO Executed DbCommand (42ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 00:51:57.7907 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 00:51:57.8464 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 00:51:58.5550 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 00:51:58.7629 INFO Executed DbCommand (63ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 00:52:00.4392 INFO Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 00:52:00.4670 INFO Executed DbCommand (6ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 00:52:15.7048 INFO Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 00:52:15.8547 INFO Executed DbCommand (9ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 00:52:15.8940 INFO Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 00:52:15.9009 INFO Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 00:52:15.9009 INFO Executed DbCommand (4ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 00:52:15.9347 INFO Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 00:52:15.9347 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 00:52:15.9347 INFO Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 00:52:15.9347 INFO Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 00:52:15.9509 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 00:52:16.0174 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 00:52:16.0174 WARN admin 
2025-05-12 00:52:18.0065 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 00:52:22.7157 INFO Executed DbCommand (22ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0 
2025-05-12 00:52:22.7463 INFO Executed DbCommand (7ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([b].[TotalPrice]), 0.0)
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0 
2025-05-12 00:52:22.8406 INFO Executed DbCommand (21ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryName] AS [Region], COUNT(*) AS [Count]
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
INNER JOIN [Categories] AS [c] ON [t].[CategoryId] = [c].[CategoryId]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
GROUP BY [c].[CategoryName] 
2025-05-12 00:52:22.8684 INFO Executed DbCommand (14ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b].[PaymentMethod] AS [Method], COUNT(*) AS [Count]
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
GROUP BY [b].[PaymentMethod] 
2025-05-12 00:52:22.8940 INFO Executed DbCommand (7ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[Key] AS [Month], COALESCE(SUM([b0].[TotalPrice]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[TotalPrice], DATEPART(month, [b].[DepartureDate]) AS [Key]
    FROM [Bookings] AS [b]
    WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
) AS [b0]
GROUP BY [b0].[Key] 
2025-05-12 00:52:22.9093 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 00:52:30.4872 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 00:52:30.4988 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 00:52:32.1941 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 00:52:32.2283 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 00:52:32.3061 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 00:52:32.3350 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 00:52:34.1474 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 00:52:34.1634 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 00:52:36.0778 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 00:52:36.0778 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 00:52:38.0901 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 00:52:38.0901 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 00:52:42.0578 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 00:52:42.0578 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 00:52:42.0730 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 00:52:42.1648 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 00:52:42.1869 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 00:52:42.1964 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 00:52:44.4193 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 00:52:44.4335 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 00:52:44.4335 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 00:52:56.5326 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c] 
2025-05-12 00:52:56.5424 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
ORDER BY [c].[CategoryId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 00:53:13.5489 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 00:53:13.5599 INFO Executed DbCommand (7ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 00:53:26.1096 INFO Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 00:53:26.1187 INFO Executed DbCommand (6ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 00:53:26.7751 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 00:53:26.7751 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 00:53:27.2103 INFO Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 00:53:27.2189 INFO Executed DbCommand (5ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 00:53:27.4149 INFO Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 00:53:27.4149 INFO Executed DbCommand (5ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 00:53:45.0928 INFO Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 00:53:45.1542 INFO Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 00:53:45.1542 INFO Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 00:53:45.1542 INFO Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 00:53:45.1652 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 00:53:45.1652 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 00:53:45.1652 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 00:53:45.1652 WARN  
2025-05-12 00:53:46.9520 INFO Executed DbCommand (12ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 00:53:51.7034 INFO Executed DbCommand (8ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 00:54:13.9558 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 00:54:13.9665 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 00:54:13.9779 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 00:54:13.9779 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 00:54:14.5531 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 00:54:14.5688 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 00:54:18.6456 INFO Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 00:54:18.6545 INFO Executed DbCommand (7ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 00:58:12.5131 INFO Executed DbCommand (526ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [TourBookingDB]; 
2025-05-12 00:58:12.7406 INFO Executed DbCommand (198ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [TourBookingDB] SET READ_COMMITTED_SNAPSHOT ON;
END; 
2025-05-12 00:58:12.7612 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-12 00:58:12.7612 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-12 00:58:12.7958 INFO Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-12 00:58:12.8539 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-12 00:58:12.8539 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-12 00:58:12.8539 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-12 00:58:12.8893 INFO Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-12 00:58:12.8893 INFO Applying migration '20250506041246_InitDb1'. 
2025-05-12 00:58:12.9229 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Categories] (
    [CategoryId] int NOT NULL IDENTITY,
    [CategoryName] nvarchar(200) NOT NULL,
    CONSTRAINT [PK_Categories] PRIMARY KEY ([CategoryId])
); 
2025-05-12 00:58:12.9229 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [UserId] int NOT NULL IDENTITY,
    [Email] nvarchar(200) NOT NULL,
    [FullName] nvarchar(200) NOT NULL,
    [Phone] nvarchar(200) NOT NULL,
    [Address] nvarchar(200) NOT NULL,
    [Password] nvarchar(200) NOT NULL,
    [Role] nvarchar(200) NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([UserId])
); 
2025-05-12 00:58:12.9312 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Tours] (
    [TourId] int NOT NULL IDENTITY,
    [Title] nvarchar(200) NOT NULL,
    [Capacity] int NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [AdultPrice] decimal(18,2) NOT NULL,
    [ChildPrice] decimal(18,2) NOT NULL,
    [Transport] nvarchar(200) NOT NULL,
    [Departures] nvarchar(max) NOT NULL,
    [Destination] nvarchar(200) NOT NULL,
    [Duration] nvarchar(200) NOT NULL,
    [Itinerary] nvarchar(2000) NOT NULL,
    [CategoryId] int NOT NULL,
    CONSTRAINT [PK_Tours] PRIMARY KEY ([TourId]),
    CONSTRAINT [FK_Tours_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([CategoryId]) ON DELETE NO ACTION
); 
2025-05-12 00:58:12.9312 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Images] (
    [ImageId] int NOT NULL IDENTITY,
    [Url] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NOT NULL,
    [TourId] int NOT NULL,
    [DayNumber] int NULL,
    CONSTRAINT [PK_Images] PRIMARY KEY ([ImageId]),
    CONSTRAINT [FK_Images_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE
); 
2025-05-12 00:58:12.9312 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TourSchedules] (
    [Id] int NOT NULL IDENTITY,
    [TourId] int NOT NULL,
    [DepartureDate] datetime2 NOT NULL,
    [ReturnDate] datetime2 NOT NULL,
    [RemainingSlot] int NOT NULL,
    CONSTRAINT [PK_TourSchedules] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TourSchedules_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE
); 
2025-05-12 00:58:12.9312 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Bookings] (
    [BookingId] int NOT NULL IDENTITY,
    [BookingDate] datetime2 NOT NULL,
    [AdultQuantity] int NOT NULL,
    [ChildQuantity] int NOT NULL,
    [TotalPrice] decimal(18,2) NOT NULL,
    [SpecialRequest] nvarchar(200) NULL,
    [TourId] int NOT NULL,
    [UserId] int NOT NULL,
    [DepartureDate] datetime2 NOT NULL,
    [TourScheduleId] int NULL,
    [PaymentMethod] nvarchar(max) NULL,
    [CategoryId] int NULL,
    CONSTRAINT [PK_Bookings] PRIMARY KEY ([BookingId]),
    CONSTRAINT [FK_Bookings_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([CategoryId]),
    CONSTRAINT [FK_Bookings_TourSchedules_TourScheduleId] FOREIGN KEY ([TourScheduleId]) REFERENCES [TourSchedules] ([Id]),
    CONSTRAINT [FK_Bookings_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE,
    CONSTRAINT [FK_Bookings_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([UserId]) ON DELETE CASCADE
); 
2025-05-12 00:58:13.1073 INFO Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_CategoryId] ON [Bookings] ([CategoryId]); 
2025-05-12 00:58:13.1073 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_TourId] ON [Bookings] ([TourId]); 
2025-05-12 00:58:13.1073 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_TourScheduleId] ON [Bookings] ([TourScheduleId]); 
2025-05-12 00:58:13.1073 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_UserId] ON [Bookings] ([UserId]); 
2025-05-12 00:58:13.1073 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Images_TourId] ON [Images] ([TourId]); 
2025-05-12 00:58:13.1197 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Tours_CategoryId] ON [Tours] ([CategoryId]); 
2025-05-12 00:58:13.1197 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_TourSchedules_TourId] ON [TourSchedules] ([TourId]); 
2025-05-12 00:58:13.1406 INFO Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250506041246_InitDb1', N'9.0.4'); 
2025-05-12 00:58:13.1406 INFO Applying migration '20250506173007_AddTourSchedule'. 
2025-05-12 00:58:13.1527 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250506173007_AddTourSchedule', N'9.0.4'); 
2025-05-12 00:58:13.1527 INFO Applying migration '20250507134435_DeleteForgeinKey'. 
2025-05-12 00:58:13.1774 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] DROP CONSTRAINT [FK_Bookings_Categories_CategoryId]; 
2025-05-12 00:58:13.1803 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] DROP CONSTRAINT [FK_Bookings_TourSchedules_TourScheduleId]; 
2025-05-12 00:58:13.1803 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Bookings_CategoryId] ON [Bookings]; 
2025-05-12 00:58:13.2851 INFO Executed DbCommand (101ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Tours]') AND [c].[name] = N'Departures');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [Tours] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [Tours] DROP COLUMN [Departures]; 
2025-05-12 00:58:13.3157 INFO Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Bookings]') AND [c].[name] = N'CategoryId');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Bookings] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Bookings] DROP COLUMN [CategoryId]; 
2025-05-12 00:58:13.3157 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD CONSTRAINT [FK_Bookings_TourSchedules_TourScheduleId] FOREIGN KEY ([TourScheduleId]) REFERENCES [TourSchedules] ([Id]) ON DELETE NO ACTION; 
2025-05-12 00:58:13.3241 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250507134435_DeleteForgeinKey', N'9.0.4'); 
2025-05-12 00:58:13.3241 INFO Applying migration '20250507161659_DeleteCagtegoryNavigation'. 
2025-05-12 00:58:13.3401 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Tours] DROP CONSTRAINT [FK_Tours_Categories_CategoryId]; 
2025-05-12 00:58:13.3401 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Tours] ADD CONSTRAINT [FK_Tours_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([CategoryId]) ON DELETE CASCADE; 
2025-05-12 00:58:13.3401 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250507161659_DeleteCagtegoryNavigation', N'9.0.4'); 
2025-05-12 00:58:13.3401 INFO Applying migration '20250508102523_AddIdentityTables'. 
2025-05-12 00:58:13.3843 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
); 
2025-05-12 00:58:13.3843 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] nvarchar(450) NOT NULL,
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [LockoutEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
); 
2025-05-12 00:58:13.3843 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
); 
2025-05-12 00:58:13.3843 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
); 
2025-05-12 00:58:13.4023 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
); 
2025-05-12 00:58:13.4023 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] nvarchar(450) NOT NULL,
    [RoleId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
); 
2025-05-12 00:58:13.4023 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] nvarchar(450) NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
); 
2025-05-12 00:58:13.4023 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]); 
2025-05-12 00:58:13.4023 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL; 
2025-05-12 00:58:13.5594 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]); 
2025-05-12 00:58:13.5594 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]); 
2025-05-12 00:58:13.5594 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]); 
2025-05-12 00:58:13.5594 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]); 
2025-05-12 00:58:13.5594 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL; 
2025-05-12 00:58:13.5736 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250508102523_AddIdentityTables', N'9.0.4'); 
2025-05-12 00:58:13.5736 INFO Applying migration '20250508171127_Final'. 
2025-05-12 00:58:13.5862 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250508171127_Final', N'9.0.4'); 
2025-05-12 00:58:13.5862 INFO Applying migration '20250510054812_InitDb'. 
2025-05-12 00:58:13.5862 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250510054812_InitDb', N'9.0.4'); 
2025-05-12 00:58:13.5862 INFO Applying migration '20250510070108_InitDb4'. 
2025-05-12 00:58:13.9578 INFO Executed DbCommand (334ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[TourSchedules].[Id]', N'TourScheduleId', 'COLUMN'; 
2025-05-12 00:58:13.9611 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250510070108_InitDb4', N'9.0.4'); 
2025-05-12 00:58:13.9611 INFO Applying migration '20250511075937_addIsDelete'. 
2025-05-12 00:58:13.9835 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TourSchedules] ADD [IsDeleted] bit NOT NULL DEFAULT CAST(0 AS bit); 
2025-05-12 00:58:13.9835 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250511075937_addIsDelete', N'9.0.4'); 
2025-05-12 00:58:13.9835 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result 
2025-05-12 01:00:48.7339 INFO Executed DbCommand (403ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:00:48.8413 INFO Executed DbCommand (12ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:00:49.0738 INFO Executed DbCommand (44ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([Id], [ConcurrencyStamp], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2, @p3); 
2025-05-12 01:00:49.1197 INFO Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:00:49.2657 INFO Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0 
2025-05-12 01:00:49.3628 INFO Executed DbCommand (16ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (Size = 256), @p8='?' (Size = 256), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14); 
2025-05-12 01:00:49.4427 INFO Executed DbCommand (62ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0 
2025-05-12 01:00:49.5103 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1 
2025-05-12 01:00:49.5103 INFO Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0 
2025-05-12 01:00:49.5511 INFO Executed DbCommand (15ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0 
2025-05-12 01:00:49.6241 INFO Executed DbCommand (38ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p16='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p17='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [LockoutEnabled] = @p6, [LockoutEnd] = @p7, [NormalizedEmail] = @p8, [NormalizedUserName] = @p9, [PasswordHash] = @p10, [PhoneNumber] = @p11, [PhoneNumberConfirmed] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15
OUTPUT 1
WHERE [Id] = @p16 AND [ConcurrencyStamp] = @p17; 
2025-05-12 01:00:50.2971 INFO Now listening on: http://localhost:5062 
2025-05-12 01:00:50.3889 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 01:00:50.3889 INFO Hosting environment: Development 
2025-05-12 01:00:50.3889 INFO Content root path: C:\Users\PC\Downloads\TourBookingWeb 
2025-05-12 01:04:10.6161 INFO Executed DbCommand (121ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:04:10.7151 INFO Executed DbCommand (13ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:04:11.1250 INFO Now listening on: http://localhost:5062 
2025-05-12 01:04:11.1841 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 01:04:11.1841 INFO Hosting environment: Development 
2025-05-12 01:04:11.1841 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 01:04:36.8465 INFO Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:04:37.0236 INFO Executed DbCommand (48ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 01:04:37.1843 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 01:04:37.2559 INFO Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 01:04:37.5039 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:04:37.6157 INFO Executed DbCommand (42ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:04:47.8782 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:04:47.9526 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:04:47.9635 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 01:04:47.9635 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 01:04:47.9822 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 01:04:48.5460 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:04:48.5573 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:04:48.5753 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:04:53.5990 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:04:53.6388 INFO Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 01:04:53.6671 INFO Executed DbCommand (5ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 01:04:56.2893 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:04:57.5306 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:04.1437 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:04.1970 INFO Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:05:17.4185 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:17.4344 INFO Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:05:17.5263 INFO Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:05:17.5600 INFO Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:05:17.5600 INFO Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:05:17.5756 INFO Executed DbCommand (3ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 01:05:17.5914 INFO Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:05:17.5914 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:05:17.5914 INFO Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:05:17.5914 INFO Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 01:05:17.6047 INFO Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:05:17.8015 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:05:17.8015 WARN admin 
2025-05-12 01:05:17.8217 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:22.4385 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:22.4601 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:05:22.5021 INFO Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:05:22.6345 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:22.6754 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:05:22.7031 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:05:24.4105 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:24.4161 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:05:24.4311 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:05:25.6011 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:25.6284 INFO Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:25.6417 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:41.6007 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:41.6117 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:41.6117 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:42.3009 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:42.3084 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:42.3084 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:42.6862 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:42.6862 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:42.6961 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:42.8441 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:42.8441 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:42.8545 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:43.0053 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:43.0133 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:43.0133 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:43.1347 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:43.1347 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:43.1347 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:43.2689 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:43.2764 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:43.2764 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:43.4158 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:43.4158 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:43.4342 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:43.5339 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:43.5548 INFO Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:43.5638 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:43.6615 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:43.6703 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:43.6703 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:43.8054 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:43.8054 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:43.8054 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:43.9373 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:43.9475 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:43.9475 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:44.0656 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:44.0769 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:44.0769 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:44.1916 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:44.1969 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:44.1969 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:44.3333 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:44.3433 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:44.3433 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:44.4586 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:44.4722 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:44.4823 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:44.7359 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:44.7424 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:44.7424 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:44.8710 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:44.8710 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:44.8879 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:45.1142 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:45.1222 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:45.1222 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:45.2578 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:45.2642 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:45.2642 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:45.4368 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:45.4368 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:45.4505 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:51.3349 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:53.8413 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:53.8726 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:05:55.4507 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:05:55.4507 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:05:55.4507 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:05:59.6773 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:42.2730 INFO Executed DbCommand (157ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:10:42.3894 INFO Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:10:42.8276 INFO Now listening on: http://localhost:5062 
2025-05-12 01:10:42.8910 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 01:10:42.8910 INFO Hosting environment: Development 
2025-05-12 01:10:42.8910 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 01:10:44.4015 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:52.1523 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:54.1777 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:54.7230 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:54.8735 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:55.0153 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:55.1341 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:55.2584 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:55.3905 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:55.5127 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:55.6356 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:55.7647 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:55.8902 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:56.0101 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:56.1439 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:56.2848 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:56.4083 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:56.5368 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:56.6728 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:56.8187 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:56.9213 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:57.0749 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:57.6998 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:57.8512 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:58.0025 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:59.0740 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:10:59.4812 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:15.0739 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:19.7736 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:20.2559 INFO Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:11:20.3713 INFO Executed DbCommand (36ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 01:11:20.4968 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 01:11:20.5335 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 01:11:21.5136 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:21.5606 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:11:21.6710 INFO Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:11:24.0647 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:31.8425 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:31.9052 INFO Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:11:32.1512 INFO Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:11:32.1782 INFO Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:11:32.1833 INFO Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:11:32.1833 INFO Executed DbCommand (3ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 01:11:32.2067 INFO Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:11:32.2067 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:11:32.2119 INFO Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:11:32.2119 INFO Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 01:11:32.2119 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:11:32.2361 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:11:32.2361 WARN admin 
2025-05-12 01:11:32.2519 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:33.8309 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:34.2672 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:34.4419 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:34.6044 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:34.7553 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:34.9029 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:35.0625 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:36.3452 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:36.3721 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:11:37.1735 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:37.1942 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:11:37.2032 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:11:38.7361 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:38.7574 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:11:38.7932 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:11:38.8648 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:38.8937 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:11:38.9316 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:11:39.8599 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:39.8683 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:11:39.8683 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:11:39.9213 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:39.9213 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:11:39.9388 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:11:40.0685 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:40.0718 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:11:40.0718 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:11:40.1654 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:40.1654 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:11:40.2136 INFO Executed DbCommand (37ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:11:40.2745 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:40.2745 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:11:40.2950 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:11:40.3364 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:40.3364 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:11:40.3614 INFO Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:11:40.4293 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:40.4351 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:11:40.4351 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:11:40.4955 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:40.4955 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:11:40.5201 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:11:40.6184 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:40.6184 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:11:40.6406 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:11:40.6793 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:40.6882 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:11:40.6994 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:11:40.8345 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:40.8392 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:11:40.8392 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:11:40.8837 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:40.8837 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:11:40.9072 INFO Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:11:41.1443 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:41.1548 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:11:41.1715 INFO Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:11:41.2189 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:41.2362 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:11:41.2511 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:11:41.8738 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:41.8738 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:11:41.8896 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:11:41.9247 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:41.9247 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:11:41.9392 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:11:43.4368 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:43.4368 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:11:43.4550 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:11:43.5042 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:11:43.5106 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:11:43.5254 INFO Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:12:21.7928 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:12:21.9006 INFO Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:12:21.9337 INFO Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:12:22.1091 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:12:22.1243 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:12:22.1243 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:12:23.7566 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:12:23.7741 INFO Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:12:23.7940 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:12:23.8597 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:12:23.8780 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:12:23.8944 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:12:24.7388 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:12:24.7480 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:12:25.6538 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:12:25.6538 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:12:26.0308 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:12:26.0423 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:12:26.0423 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:12:31.2617 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:12:35.7415 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:12:35.7471 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:12:35.7471 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:12:35.7920 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:12:35.7920 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:12:35.8152 INFO Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:12:37.3920 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:12:37.3920 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:12:37.3998 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:12:38.3041 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:12:38.3076 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:12:46.8195 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:12:46.8298 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:12:46.8376 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 01:12:46.8522 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 01:12:46.8522 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 01:12:46.9817 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:12:46.9817 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:12:47.0142 INFO Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:12:53.4435 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:12:53.4493 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:12:54.0103 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:12:54.0103 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:12:54.5115 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:12:54.5115 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:13:03.6816 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:13:03.6816 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:13:03.8611 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:13:03.8672 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:14:46.3206 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:14:46.3642 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:14:46.3829 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:14:46.5339 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:14:46.5424 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:14:46.5547 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:14:47.4069 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:14:47.4265 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:14:47.4358 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:14:48.1820 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:14:48.1820 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:14:49.0577 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:14:49.0577 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:14:49.0577 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:14:49.2316 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:14:49.2316 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:14:49.2316 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:14:49.5517 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:14:49.5603 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:14:49.5603 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:14:57.3276 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:14:57.3402 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:14:57.3402 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:14:57.6493 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:14:57.6493 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:14:57.6493 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:14:57.8788 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:14:57.8875 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:14:57.8875 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:14:58.0150 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:14:58.0150 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:14:58.0150 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:14:58.1245 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:14:58.1245 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:14:58.1412 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:14:58.3609 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:14:58.3721 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:14:58.3721 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:14:58.6330 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:14:58.6530 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:14:58.6530 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:14:58.8623 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:14:58.8676 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:14:58.8676 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:14:59.0424 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:14:59.0611 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:14:59.0720 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:15:00.3107 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:00.3289 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:15:01.2876 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:01.2936 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:15:02.2433 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:02.2433 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:15:02.2677 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:15:02.3125 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:02.3457 INFO Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:15:02.3675 INFO Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:15:02.9784 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:02.9784 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:15:03.0102 INFO Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:15:03.0753 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:03.0970 INFO Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:15:03.1104 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:15:03.1820 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:03.1820 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:15:03.2121 INFO Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:15:03.3146 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:03.3264 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:15:03.3537 INFO Executed DbCommand (25ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:15:03.3537 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:03.3724 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:15:03.3912 INFO Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:15:03.4680 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:03.4926 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:15:03.5280 INFO Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:15:03.5280 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:03.5478 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:15:03.5627 INFO Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:15:03.6569 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:03.6679 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:15:03.6849 INFO Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:15:03.8135 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:03.8244 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:15:03.8360 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:15:03.8967 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:03.9124 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:15:03.9326 INFO Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:15:03.9865 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:04.0206 INFO Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:15:04.0411 INFO Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:15:04.1059 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:04.1179 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:15:04.1381 INFO Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:15:04.2260 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:04.2330 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:15:04.2431 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:15:04.3169 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:04.3292 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:15:04.3487 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:15:04.3852 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:04.3852 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:15:04.4252 INFO Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:15:04.5247 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:04.5247 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:15:04.5503 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:15:04.6251 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:04.6350 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:15:04.6494 INFO Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:15:04.7176 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:04.7274 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:15:04.7274 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:15:06.8495 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:15:07.8420 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:16:29.9871 INFO Executed DbCommand (255ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:16:30.1257 INFO Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:16:30.5743 INFO Now listening on: http://localhost:5062 
2025-05-12 01:16:30.6358 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 01:16:30.6358 INFO Hosting environment: Development 
2025-05-12 01:16:30.6358 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 01:16:54.2237 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:16:58.2582 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:00.8793 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:01.3577 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:01.5001 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:01.6442 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:03.4972 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:04.2887 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:05.4787 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:05.8792 INFO Executed DbCommand (85ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:17:06.0349 INFO Executed DbCommand (49ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:17:06.2834 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:06.3409 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:17:06.3712 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:17:07.3926 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:07.4314 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:17:08.1346 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:08.1713 INFO Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:17:08.1835 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:17:10.2393 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:10.2733 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 01:17:10.3137 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 01:17:10.3355 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 01:17:10.4418 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:10.4800 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:17:10.5270 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 01:17:10.5401 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 01:17:10.5692 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:25.0026 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:26.4174 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:30.8992 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:30.9257 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:17:30.9468 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 01:17:30.9468 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 01:17:30.9643 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 01:17:31.6952 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:31.7111 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:17:31.8371 INFO Executed DbCommand (48ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:17:32.6520 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:40.8044 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:40.8515 INFO Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:17:41.1250 INFO Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:17:41.1461 INFO Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:17:41.1514 INFO Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:17:41.1663 INFO Executed DbCommand (4ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 01:17:41.1833 INFO Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:17:41.1833 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:17:41.1833 INFO Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:17:41.1833 INFO Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 01:17:41.1833 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:17:41.2092 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:17:41.2110 WARN admin 
2025-05-12 01:17:41.2110 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:45.1585 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:45.6937 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:45.8548 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:45.9889 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:46.1401 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:46.2817 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:46.4201 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:17:46.5687 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:18:50.5011 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:18:51.0167 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:18:51.2318 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:18:51.3957 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:18:51.5979 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:18:54.8210 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:18:54.8638 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 01:18:54.8782 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 01:18:54.8837 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 01:18:54.9536 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:18:54.9680 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:18:54.9874 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 01:18:54.9974 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 01:18:55.0174 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:18:57.7208 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:18:57.8126 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:18:57.8924 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c] 
2025-05-12 01:18:57.9185 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
ORDER BY [c].[CategoryId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:23:33.8792 INFO Executed DbCommand (127ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:23:33.9908 INFO Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:23:34.9477 INFO Now listening on: http://localhost:5062 
2025-05-12 01:23:35.0073 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 01:23:35.0081 INFO Hosting environment: Development 
2025-05-12 01:23:35.0081 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 01:23:44.5946 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:23:45.2357 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:23:45.3948 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c] 
2025-05-12 01:23:45.4144 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
ORDER BY [c].[CategoryId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:23:46.7543 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:23:49.9394 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:23:50.0555 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:23:51.4165 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:23:51.4377 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:23:51.4514 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:23:55.1792 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:23:55.2727 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:23:55.3771 INFO Executed DbCommand (27ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:23:55.5601 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:23:55.6557 INFO Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:23:55.7075 INFO Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:23:58.6983 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:23:58.6983 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:23:58.7186 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:23:58.7685 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:23:58.7749 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:23:58.7749 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:23:59.1377 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:23:59.1484 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:23:59.1484 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:23:59.2091 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:23:59.2156 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:23:59.2289 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:23:59.2882 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:23:59.2929 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:23:59.2929 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:23:59.3351 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:23:59.3407 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:23:59.3407 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:23:59.4410 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:23:59.4487 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:23:59.4487 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:23:59.5138 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:23:59.5138 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:23:59.5318 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:24:12.3240 INFO Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:24:12.5118 INFO Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:24:12.5368 INFO Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:24:12.5418 INFO Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:24:12.5418 INFO Executed DbCommand (4ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 01:24:12.5668 INFO Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:24:12.5668 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:24:12.5704 INFO Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:24:12.5704 INFO Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 01:24:12.5704 INFO Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:24:12.5965 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:24:12.6035 WARN admin 
2025-05-12 01:24:16.3743 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:24:16.3743 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:24:16.9789 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:24:19.1887 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:24:19.1961 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:24:19.8998 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:24:19.8998 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:24:21.5703 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:24:21.5703 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:24:21.6283 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:24:21.6400 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:24:23.1513 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 01:24:23.1832 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 01:24:23.2019 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 01:24:23.2875 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:24:23.3411 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 01:24:23.3411 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 01:24:24.9405 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 01:24:27.3196 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c] 
2025-05-12 01:24:27.3250 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
ORDER BY [c].[CategoryId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:24:29.1691 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c] 
2025-05-12 01:24:29.1691 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
ORDER BY [c].[CategoryId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:27:20.2574 INFO Executed DbCommand (256ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:27:20.4062 INFO Executed DbCommand (22ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:27:21.0102 INFO Now listening on: http://localhost:5062 
2025-05-12 01:27:21.0793 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 01:27:21.0793 INFO Hosting environment: Development 
2025-05-12 01:27:21.0793 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 01:27:30.9880 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:27:31.4320 INFO Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:27:31.5485 INFO Executed DbCommand (30ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:27:31.7994 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:27:31.8368 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:27:31.8731 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:27:33.3363 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:27:33.3469 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:27:33.3516 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:27:33.4001 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:27:33.4001 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:27:33.4173 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:27:34.1362 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:27:34.1362 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:27:34.1362 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:27:34.2002 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:27:34.2002 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:27:34.2119 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:27:34.2948 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:27:34.2948 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:27:34.3052 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:27:34.3589 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:27:34.3702 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:27:34.3702 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:27:34.4639 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:27:34.4639 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:27:34.4639 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:27:34.5305 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:27:34.5391 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:27:34.5391 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:27:34.5842 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:27:34.5954 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:27:34.5954 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:27:34.6518 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:27:34.6518 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:27:34.6518 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:27:34.8217 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:27:34.8217 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:27:34.8217 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:27:34.8694 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:27:34.8694 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:27:34.8694 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:27:52.7045 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:27:56.8534 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:27:58.8897 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:28:07.3508 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:28:07.4028 INFO Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:28:07.8635 INFO Executed DbCommand (7ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:28:07.8855 INFO Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:28:07.8855 INFO Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:28:07.8996 INFO Executed DbCommand (3ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 01:28:07.9141 INFO Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:28:07.9141 INFO Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:28:07.9141 INFO Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:28:07.9141 INFO Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 01:28:07.9331 INFO Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:28:07.9491 INFO Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:28:07.9491 WARN admin 
2025-05-12 01:28:07.9673 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:28:10.2336 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:28:10.2704 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:28:10.9582 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:28:10.9816 INFO Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:28:10.9944 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:28:12.0476 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:28:12.0476 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:28:12.0617 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:28:12.1098 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:28:12.1098 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:28:12.1350 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:30:27.7969 INFO Executed DbCommand (124ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:30:27.9518 INFO Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:30:28.4842 INFO Now listening on: http://localhost:5062 
2025-05-12 01:30:28.5530 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 01:30:28.5530 INFO Hosting environment: Development 
2025-05-12 01:30:28.5530 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 01:30:33.8325 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:30:34.3015 INFO Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:30:34.4063 INFO Executed DbCommand (32ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:30:34.7624 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:30:34.8022 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:30:34.8372 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:30:36.3467 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:30:36.3568 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:30:36.3568 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:30:36.4123 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:30:36.4217 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:30:36.4347 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:30:37.3448 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:30:39.1722 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:30:39.2162 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:30:39.2420 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c] 
2025-05-12 01:30:39.2420 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
ORDER BY [c].[CategoryId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:30:41.2521 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:30:41.2888 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:30:41.2995 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:30:41.8283 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:30:41.8604 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:30:43.8153 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:30:43.8243 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:30:44.2130 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:30:44.2315 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:30:44.2315 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:30:58.0726 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:30:58.7262 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:31:03.6040 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:31:06.3527 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:31:14.5009 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:31:14.5480 INFO Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:31:14.8551 INFO Executed DbCommand (6ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:31:14.8843 INFO Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:31:14.8843 INFO Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:31:14.9015 INFO Executed DbCommand (3ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 01:31:14.9224 INFO Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:31:14.9224 INFO Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:31:14.9224 INFO Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:31:14.9296 INFO Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 01:31:14.9296 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:31:14.9471 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:31:14.9471 WARN admin 
2025-05-12 01:31:14.9650 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:31:17.9884 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:31:18.5662 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:31:18.6252 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:31:18.6339 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c] 
2025-05-12 01:31:18.6339 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
ORDER BY [c].[CategoryId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:31:19.2990 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:31:19.3064 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:31:19.3064 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:31:19.3604 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:31:19.3604 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:31:19.3801 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:31:20.7397 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:31:20.7502 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:31:21.3159 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:31:21.3224 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:31:21.3224 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:33:20.7651 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:33:20.8847 INFO Executed DbCommand (67ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:33:20.8997 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:33:23.2570 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:33:24.6974 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:33:24.6974 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:33:24.6974 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:33:26.3204 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:33:26.3204 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:33:27.1675 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:33:27.1883 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:33:27.2272 INFO Executed DbCommand (35ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:33:27.2877 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:33:27.3059 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:33:27.3230 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:34:47.7596 INFO Executed DbCommand (132ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:34:47.8811 INFO Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:34:48.3214 INFO Now listening on: http://localhost:5062 
2025-05-12 01:34:48.3767 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 01:34:48.3767 INFO Hosting environment: Development 
2025-05-12 01:34:48.3767 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 01:34:53.6612 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:34:54.1101 INFO Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:34:54.2101 INFO Executed DbCommand (33ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:34:54.4781 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:34:54.5348 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:34:54.5697 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:35:05.9144 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:35:05.9513 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:36:26.2824 INFO Executed DbCommand (129ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:36:26.4065 INFO Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:36:26.8759 INFO Now listening on: http://localhost:5062 
2025-05-12 01:36:26.9360 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 01:36:26.9360 INFO Hosting environment: Development 
2025-05-12 01:36:26.9360 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 01:36:30.7220 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:36:31.2962 INFO Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:36:33.5014 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:36:33.5240 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:36:34.1334 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:36:34.1334 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:36:34.7456 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:36:38.0845 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:36:38.1638 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:36:38.2855 INFO Executed DbCommand (34ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:36:38.4478 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:36:38.4797 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:36:38.5032 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:36:41.3222 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:36:42.3615 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:21.0032 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:33.3134 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:37.4333 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:39.5136 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:48.2887 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:48.4429 INFO Executed DbCommand (23ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:38:49.0674 INFO Executed DbCommand (16ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:38:49.1147 INFO Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:38:49.1227 INFO Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:38:49.1394 INFO Executed DbCommand (8ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 01:38:49.1651 INFO Executed DbCommand (6ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:38:49.1651 INFO Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:38:49.1651 INFO Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:38:49.1832 INFO Executed DbCommand (3ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 01:38:49.1832 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:38:49.2192 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:38:49.2288 WARN admin 
2025-05-12 01:38:49.2288 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:50.7864 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:51.8379 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:51.8528 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:38:51.8791 INFO Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:38:51.9554 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:51.9763 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:38:51.9980 INFO Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:38:52.9855 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:52.9943 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:38:53.9982 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:53.9982 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:38:55.2446 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:55.2920 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:38:55.3097 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:38:56.5697 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:56.5840 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:38:56.5911 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:38:57.1691 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:57.1691 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:38:58.1044 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:58.1044 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:38:59.1846 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:59.1846 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:38:59.3566 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:59.3566 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:38:59.5159 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:59.5159 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:38:59.6849 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:59.6849 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:38:59.8308 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:59.8308 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:38:59.9833 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:38:59.9833 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:39:00.1608 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:39:00.1658 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:39:00.3348 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:39:00.3396 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:39:01.1436 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:39:01.1501 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:39:01.1501 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:39:03.6989 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:39:07.7178 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:39:07.7485 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 01:39:07.7912 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 01:39:07.8086 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 01:39:07.8875 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:39:07.9131 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:39:07.9667 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 01:39:07.9667 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 01:39:08.0135 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:39:09.2749 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:39:09.2992 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:39:24.7095 INFO Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:39:30.4206 INFO Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:39:30.4926 INFO Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:39:30.4926 INFO Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:39:30.4926 INFO Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:39:30.4926 INFO Executed DbCommand (3ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 01:39:30.4926 INFO Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:39:30.5089 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:39:30.5089 INFO Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:39:30.5089 INFO Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 01:39:30.5089 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:39:30.5089 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:39:30.5089 WARN admin 
2025-05-12 01:39:34.2017 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:39:35.0191 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:39:35.0306 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:39:36.0285 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:39:36.0285 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:39:36.0936 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:39:36.1127 INFO Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:39:37.4960 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 01:39:39.7623 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c] 
2025-05-12 01:39:39.7828 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
ORDER BY [c].[CategoryId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:40:11.3645 INFO Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:40:11.3711 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:40:11.9440 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:40:12.5524 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:40:12.5621 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:40:18.7648 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:40:19.3959 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:40:20.1100 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:40:20.1100 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:40:57.0269 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:40:57.0269 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:41:02.0063 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:41:02.0092 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:41:02.5747 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:41:03.7087 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:41:03.7289 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:41:03.7924 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:41:03.8123 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:41:48.3018 INFO Executed DbCommand (151ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:41:48.4102 INFO Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:41:48.9413 INFO Now listening on: http://localhost:5062 
2025-05-12 01:41:49.0000 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 01:41:49.0000 INFO Hosting environment: Development 
2025-05-12 01:41:49.0000 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 01:42:11.9604 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:42:13.6897 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:42:25.6010 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:42:25.9242 INFO Executed DbCommand (23ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:42:26.9098 INFO Executed DbCommand (8ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:42:26.9601 INFO Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:42:26.9669 INFO Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:42:26.9669 INFO Executed DbCommand (3ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 01:42:26.9899 INFO Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:42:26.9899 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:42:26.9934 INFO Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 01:42:26.9934 INFO Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 01:42:26.9934 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:42:27.0190 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:42:27.0282 WARN admin 
2025-05-12 01:42:27.0521 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:42:34.3657 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:42:34.5385 INFO Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:42:34.6527 INFO Executed DbCommand (53ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:42:34.8673 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:42:34.9072 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:42:34.9340 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:42:39.4957 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:42:39.5343 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 01:42:39.5658 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 01:42:39.5818 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 01:42:40.0153 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:42:40.1668 INFO Executed DbCommand (53ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:42:43.5939 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:42:43.6140 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:42:50.7172 INFO Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 01:42:50.7467 INFO Executed DbCommand (5ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 01:42:58.8811 INFO Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 01:42:58.8930 INFO Executed DbCommand (4ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 01:43:16.4609 INFO Executed DbCommand (7ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 01:43:16.4609 INFO Người dùng mở trang đặt tour: "Tour Sapa Fansipan mùa đông 3N2Đ" – Ngày đi: "03/11/2025" 
2025-05-12 01:43:16.5483 INFO Executed DbCommand (19ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 01:44:14.9075 INFO Executed DbCommand (35ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-12 01:44:14.9767 INFO Executed DbCommand (32ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-12 01:44:15.0100 INFO Executed DbCommand (7ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-12 01:44:15.1986 INFO Executed DbCommand (15ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-12 01:44:15.2854 INFO Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [ChildQuantity], [DepartureDate], [PaymentMethod], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [TourSchedules] SET [RemainingSlot] = @p10
OUTPUT 1
WHERE [TourScheduleId] = @p11; 
2025-05-12 01:44:15.2971 INFO  Đặt tour thành công – TourID: 4, Tên tour: "Tour Sapa Fansipan mùa đông 3N2Đ", Ngày đi: "03/11/2025", Người đặt: "Nhã Linh", Email: "nhalinh@gmail.com", Số điện thoại: "0557894122", Địa chỉ: "Cà Mau", Người lớn: 1, Trẻ em: 2, Tổng tiền: "8,400,000" đ, Thanh toán: "Quầy" 
2025-05-12 01:44:15.3187 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:44:15.3308 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 01:44:15.3378 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 01:44:15.3378 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 01:44:15.6699 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:44:15.6913 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:44:19.5548 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 01:44:19.5548 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 01:44:26.0341 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:44:26.0428 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:44:26.0428 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:44:26.1058 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:44:26.1058 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:44:26.1199 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:44:35.1682 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:44:35.1682 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:44:35.1946 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:44:35.6552 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:44:35.6552 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:44:35.6651 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:44:36.0385 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:44:36.0423 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:44:36.0423 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:44:36.9571 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:44:36.9807 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:44:36.9928 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:44:39.7569 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:44:39.7614 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:44:39.7614 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY 
2025-05-12 01:44:42.5123 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:44:42.5499 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u0].[UserId], [u0].[Address], [u0].[Email], [u0].[FullName], [u0].[Password], [u0].[Phone], [u0].[Role], [s].[BookingId], [s].[AdultQuantity], [s].[BookingDate], [s].[ChildQuantity], [s].[DepartureDate], [s].[PaymentMethod], [s].[SpecialRequest], [s].[TotalPrice], [s].[TourId], [s].[TourScheduleId], [s].[UserId], [s].[TourId0], [s].[AdultPrice], [s].[Capacity], [s].[CategoryId], [s].[ChildPrice], [s].[Description], [s].[Destination], [s].[Duration], [s].[Itinerary], [s].[Title], [s].[Transport]
FROM (
    SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
    FROM [Users] AS [u]
    WHERE [u].[UserId] = @__id_0
) AS [u0]
LEFT JOIN (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [t].[TourId] AS [TourId0], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Bookings] AS [b]
    INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
) AS [s] ON [u0].[UserId] = [s].[UserId]
ORDER BY [u0].[UserId], [s].[BookingId] 
2025-05-12 01:44:42.5558 INFO Admin xem chi tiết người dùng ID: 12 
2025-05-12 01:44:45.4271 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:44:45.4305 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:44:45.4305 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:44:55.2725 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 01:44:55.2725 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 01:45:02.9958 INFO Executed DbCommand (4ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 01:45:02.9958 INFO Người dùng mở trang đặt tour: "Tour Bến Tre – Cồn Phụng 1N" – Ngày đi: "12/11/2025" 
2025-05-12 01:45:02.9958 INFO Executed DbCommand (5ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 01:45:21.9291 INFO Executed DbCommand (4ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-12 01:45:21.9397 INFO Executed DbCommand (8ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-12 01:45:21.9397 INFO Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-12 01:45:21.9540 INFO Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-12 01:45:21.9540 INFO Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [ChildQuantity], [DepartureDate], [PaymentMethod], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [TourSchedules] SET [RemainingSlot] = @p10
OUTPUT 1
WHERE [TourScheduleId] = @p11; 
2025-05-12 01:45:21.9620 INFO  Đặt tour thành công – TourID: 14, Tên tour: "Tour Bến Tre – Cồn Phụng 1N", Ngày đi: "12/11/2025", Người đặt: "Phương Linh", Email: "ptduong394@gmail.com", Số điện thoại: "0367934563", Địa chỉ: "An Giang", Người lớn: 2, Trẻ em: 1, Tổng tiền: "2,600,000" đ, Thanh toán: "MoMo" 
2025-05-12 01:45:21.9620 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:45:21.9778 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 01:45:21.9778 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 01:45:21.9778 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 01:45:22.0346 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:45:22.0536 INFO Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:45:32.3167 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:45:32.3272 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 01:45:32.3404 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 01:45:32.3404 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 01:45:32.4036 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:45:32.4314 INFO Executed DbCommand (25ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:45:36.0195 INFO Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 01:45:36.0195 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 01:45:40.0494 INFO Executed DbCommand (6ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 01:45:40.0494 INFO Người dùng mở trang đặt tour: "Tour Mộc Châu mùa hoa mận 2N1Đ" – Ngày đi: "15/12/2025" 
2025-05-12 01:45:40.0571 INFO Executed DbCommand (5ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 01:45:54.3137 INFO Executed DbCommand (3ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-12 01:45:54.3137 INFO Executed DbCommand (3ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-12 01:45:54.3222 INFO Executed DbCommand (3ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-12 01:45:54.3222 INFO Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [ChildQuantity], [DepartureDate], [PaymentMethod], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [TourSchedules] SET [RemainingSlot] = @p10
OUTPUT 1
WHERE [TourScheduleId] = @p11; 
2025-05-12 01:45:54.3222 INFO  Đặt tour thành công – TourID: 3, Tên tour: "Tour Mộc Châu mùa hoa mận 2N1Đ", Ngày đi: "15/12/2025", Người đặt: "Phương Linh", Email: "ptduong394@gmail.com", Số điện thoại: "0367934563", Địa chỉ: "Kiên Giang", Người lớn: 1, Trẻ em: 1, Tổng tiền: "3,300,000" đ, Thanh toán: "MoMo" 
2025-05-12 01:45:54.3444 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:45:54.3444 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 01:45:54.3564 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 01:45:54.3564 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 01:45:54.6935 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:45:54.7079 INFO Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:46:00.2637 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:46:00.2637 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:46:00.2752 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:46:00.3168 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:46:00.3168 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:46:00.3263 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:46:01.2356 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:46:01.2356 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:46:01.2356 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:46:01.2813 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:46:01.2813 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:46:01.2813 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:46:05.4053 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:46:05.4053 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:46:05.4148 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:46:07.4417 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:46:07.4417 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:46:07.4481 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY 
2025-05-12 01:46:10.2266 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:46:10.2266 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:46:10.2266 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:46:44.0086 INFO Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:46:44.0237 INFO Executed DbCommand (3ms) [Parameters=[@__model_Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__model_Email_0 
2025-05-12 01:46:44.0237 INFO Cập nhật vai trò từ Guest sang user cho ptduong394@gmail.com 
2025-05-12 01:46:44.1501 INFO Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0 
2025-05-12 01:46:44.2594 INFO Executed DbCommand (23ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (Size = 256), @p8='?' (Size = 256), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 256), @p17='?' (DbType = Int32), @p15='?' (Size = 200), @p16='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
UPDATE [Users] SET [Address] = @p15, [Role] = @p16
OUTPUT 1
WHERE [UserId] = @p17; 
2025-05-12 01:46:49.2328 INFO Đăng ký thành công cho ptduong394@gmail.com, đã gửi mã OTP 
2025-05-12 01:46:56.7202 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:46:56.7319 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 01:46:56.7319 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 01:46:56.7452 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 01:46:56.9486 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:46:56.9669 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:47:13.5141 INFO Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:47:24.2888 INFO Executed DbCommand (12ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:48:03.6629 INFO Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:48:03.6780 INFO Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0 
2025-05-12 01:48:03.7393 INFO Executed DbCommand (15ms) [Parameters=[@p14='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p15='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [SecurityStamp] = @p11, [TwoFactorEnabled] = @p12, [UserName] = @p13
OUTPUT 1
WHERE [Id] = @p14 AND [ConcurrencyStamp] = @p15; 
2025-05-12 01:48:16.8218 INFO Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:48:16.9038 INFO Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:48:16.9151 INFO Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:48:16.9151 INFO Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:48:16.9151 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:48:16.9151 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:48:16.9347 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:48:16.9347 WARN  
2025-05-12 01:48:27.8155 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:48:27.8300 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:48:27.8367 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY 
2025-05-12 01:48:30.5404 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:48:30.5584 INFO Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u0].[UserId], [u0].[Address], [u0].[Email], [u0].[FullName], [u0].[Password], [u0].[Phone], [u0].[Role], [s].[BookingId], [s].[AdultQuantity], [s].[BookingDate], [s].[ChildQuantity], [s].[DepartureDate], [s].[PaymentMethod], [s].[SpecialRequest], [s].[TotalPrice], [s].[TourId], [s].[TourScheduleId], [s].[UserId], [s].[TourId0], [s].[AdultPrice], [s].[Capacity], [s].[CategoryId], [s].[ChildPrice], [s].[Description], [s].[Destination], [s].[Duration], [s].[Itinerary], [s].[Title], [s].[Transport]
FROM (
    SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
    FROM [Users] AS [u]
    WHERE [u].[UserId] = @__id_0
) AS [u0]
LEFT JOIN (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [t].[TourId] AS [TourId0], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Bookings] AS [b]
    INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
) AS [s] ON [u0].[UserId] = [s].[UserId]
ORDER BY [u0].[UserId], [s].[BookingId] 
2025-05-12 01:48:30.5584 INFO Admin xem chi tiết người dùng ID: 13 
2025-05-12 01:48:32.7190 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:48:32.7301 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:48:32.7301 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:48:36.8043 INFO Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 01:48:39.8212 INFO Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 01:48:39.8946 INFO Executed DbCommand (31ms) [Parameters=[@__user_UserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b].[TourScheduleId] = [t0].[TourScheduleId]
LEFT JOIN [Images] AS [i] ON [t].[TourId] = [i].[TourId]
WHERE [b].[UserId] = @__user_UserId_0
ORDER BY [b].[BookingDate] DESC, [b].[BookingId], [t].[TourId], [t0].[TourScheduleId] 
2025-05-12 01:49:06.2435 INFO Executed DbCommand (13ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:49:09.8209 INFO Đã gửi OTP đặt lại mật khẩu cho ptduong394@gmail.com 
2025-05-12 01:49:24.5202 INFO Executed DbCommand (60ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:49:24.5480 ERROR Lỗi đặt lại mật khẩu cho ptduong394@gmail.com: Passwords must be at least 8 characters. 
2025-05-12 01:49:24.5480 ERROR Lỗi đặt lại mật khẩu cho ptduong394@gmail.com: Passwords must have at least one non alphanumeric character. 
2025-05-12 01:49:24.5480 ERROR Lỗi đặt lại mật khẩu cho ptduong394@gmail.com: Passwords must have at least one digit ('0'-'9'). 
2025-05-12 01:49:24.5480 ERROR Lỗi đặt lại mật khẩu cho ptduong394@gmail.com: Passwords must have at least one uppercase ('A'-'Z'). 
2025-05-12 01:49:31.8488 INFO Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:49:31.9227 INFO Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0 
2025-05-12 01:49:31.9349 INFO Executed DbCommand (10ms) [Parameters=[@p14='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p15='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [SecurityStamp] = @p11, [TwoFactorEnabled] = @p12, [UserName] = @p13
OUTPUT 1
WHERE [Id] = @p14 AND [ConcurrencyStamp] = @p15; 
2025-05-12 01:49:31.9349 INFO Đặt lại mật khẩu thành công cho ptduong394@gmail.com 
2025-05-12 01:49:41.2196 INFO Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:49:41.2831 INFO Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:49:41.2831 INFO Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:49:41.2918 INFO Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:49:41.2918 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:49:41.2918 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:49:41.2918 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:49:41.2918 WARN  
2025-05-12 01:49:55.9332 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:49:55.9332 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:49:55.9567 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:49:56.0284 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:49:56.0413 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:49:56.0562 INFO Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:50:05.2684 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:05.3107 INFO Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:50:05.3349 INFO Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:50:05.6179 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:05.6179 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:50:05.6179 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:50:13.3148 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:13.3234 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:50:13.3234 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 01:50:13.3583 INFO Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 01:50:13.3583 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 01:50:13.4810 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:13.4810 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:50:13.5174 INFO Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:50:23.0601 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:23.0772 INFO Executed DbCommand (4ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 
2025-05-12 01:50:23.1110 INFO Executed DbCommand (10ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:50:23.1110 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:23.1183 INFO Executed DbCommand (3ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 
2025-05-12 01:50:23.1183 INFO Executed DbCommand (4ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:50:26.2459 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:26.2459 INFO Executed DbCommand (3ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 
2025-05-12 01:50:26.2632 INFO Executed DbCommand (8ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:50:26.2632 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:26.2632 INFO Executed DbCommand (3ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 
2025-05-12 01:50:26.2779 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:26.2779 INFO Executed DbCommand (13ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:50:26.2925 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:32.1609 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:32.1905 INFO Executed DbCommand (14ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__departureDate_Value_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 AND EXISTS (
    SELECT 1
    FROM [TourSchedules] AS [t0]
    WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_1) 
2025-05-12 01:50:32.2492 INFO Executed DbCommand (17ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__departureDate_Value_Date_1='?' (DbType = DateTime2), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t2].[TourId], [t2].[Title], [t2].[Destination], [t2].[Duration], [t2].[Capacity], [t2].[AdultPrice], [t4].[DepartureDate], [t4].[TourScheduleId], [t2].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0 AND EXISTS (
        SELECT 1
        FROM [TourSchedules] AS [t0]
        WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_1)
    ORDER BY [t].[Title]
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t2]
LEFT JOIN (
    SELECT [t3].[DepartureDate], [t3].[TourScheduleId], [t3].[TourId]
    FROM (
        SELECT [t1].[DepartureDate], [t1].[TourScheduleId], [t1].[TourId], ROW_NUMBER() OVER(PARTITION BY [t1].[TourId] ORDER BY [t1].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t1]
        WHERE [t1].[IsDeleted] = CAST(0 AS bit)
    ) AS [t3]
    WHERE [t3].[row] <= 3
) AS [t4] ON [t2].[TourId] = [t4].[TourId]
ORDER BY [t2].[Title], [t2].[TourId], [t4].[TourId], [t4].[DepartureDate] 
2025-05-12 01:50:32.5129 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:32.5300 INFO Executed DbCommand (11ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__departureDate_Value_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 AND EXISTS (
    SELECT 1
    FROM [TourSchedules] AS [t0]
    WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_1) 
2025-05-12 01:50:32.5450 INFO Executed DbCommand (14ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__departureDate_Value_Date_1='?' (DbType = DateTime2), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t2].[TourId], [t2].[Title], [t2].[Destination], [t2].[Duration], [t2].[Capacity], [t2].[AdultPrice], [t4].[DepartureDate], [t4].[TourScheduleId], [t2].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0 AND EXISTS (
        SELECT 1
        FROM [TourSchedules] AS [t0]
        WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_1)
    ORDER BY [t].[Title]
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t2]
LEFT JOIN (
    SELECT [t3].[DepartureDate], [t3].[TourScheduleId], [t3].[TourId]
    FROM (
        SELECT [t1].[DepartureDate], [t1].[TourScheduleId], [t1].[TourId], ROW_NUMBER() OVER(PARTITION BY [t1].[TourId] ORDER BY [t1].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t1]
        WHERE [t1].[IsDeleted] = CAST(0 AS bit)
    ) AS [t3]
    WHERE [t3].[row] <= 3
) AS [t4] ON [t2].[TourId] = [t4].[TourId]
ORDER BY [t2].[Title], [t2].[TourId], [t4].[TourId], [t4].[DepartureDate] 
2025-05-12 01:50:33.3682 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:33.3837 INFO Executed DbCommand (7ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__departureDate_Value_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 AND EXISTS (
    SELECT 1
    FROM [TourSchedules] AS [t0]
    WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_1) 
2025-05-12 01:50:33.3991 INFO Executed DbCommand (14ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__departureDate_Value_Date_1='?' (DbType = DateTime2), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t2].[TourId], [t2].[Title], [t2].[Destination], [t2].[Duration], [t2].[Capacity], [t2].[AdultPrice], [t4].[DepartureDate], [t4].[TourScheduleId], [t2].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0 AND EXISTS (
        SELECT 1
        FROM [TourSchedules] AS [t0]
        WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_1)
    ORDER BY [t].[Title]
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t2]
LEFT JOIN (
    SELECT [t3].[DepartureDate], [t3].[TourScheduleId], [t3].[TourId]
    FROM (
        SELECT [t1].[DepartureDate], [t1].[TourScheduleId], [t1].[TourId], ROW_NUMBER() OVER(PARTITION BY [t1].[TourId] ORDER BY [t1].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t1]
        WHERE [t1].[IsDeleted] = CAST(0 AS bit)
    ) AS [t3]
    WHERE [t3].[row] <= 3
) AS [t4] ON [t2].[TourId] = [t4].[TourId]
ORDER BY [t2].[Title], [t2].[TourId], [t4].[TourId], [t4].[DepartureDate] 
2025-05-12 01:50:34.1366 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:34.1506 INFO Executed DbCommand (12ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__departureDate_Value_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 AND EXISTS (
    SELECT 1
    FROM [TourSchedules] AS [t0]
    WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_1) 
2025-05-12 01:50:34.1722 INFO Executed DbCommand (18ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__departureDate_Value_Date_1='?' (DbType = DateTime2), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t2].[TourId], [t2].[Title], [t2].[Destination], [t2].[Duration], [t2].[Capacity], [t2].[AdultPrice], [t4].[DepartureDate], [t4].[TourScheduleId], [t2].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0 AND EXISTS (
        SELECT 1
        FROM [TourSchedules] AS [t0]
        WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_1)
    ORDER BY [t].[Title]
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t2]
LEFT JOIN (
    SELECT [t3].[DepartureDate], [t3].[TourScheduleId], [t3].[TourId]
    FROM (
        SELECT [t1].[DepartureDate], [t1].[TourScheduleId], [t1].[TourId], ROW_NUMBER() OVER(PARTITION BY [t1].[TourId] ORDER BY [t1].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t1]
        WHERE [t1].[IsDeleted] = CAST(0 AS bit)
    ) AS [t3]
    WHERE [t3].[row] <= 3
) AS [t4] ON [t2].[TourId] = [t4].[TourId]
ORDER BY [t2].[Title], [t2].[TourId], [t4].[TourId], [t4].[DepartureDate] 
2025-05-12 01:50:34.7518 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:34.7639 INFO Executed DbCommand (9ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__departureDate_Value_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 AND EXISTS (
    SELECT 1
    FROM [TourSchedules] AS [t0]
    WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_1) 
2025-05-12 01:50:34.7794 INFO Executed DbCommand (13ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__departureDate_Value_Date_1='?' (DbType = DateTime2), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t2].[TourId], [t2].[Title], [t2].[Destination], [t2].[Duration], [t2].[Capacity], [t2].[AdultPrice], [t4].[DepartureDate], [t4].[TourScheduleId], [t2].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0 AND EXISTS (
        SELECT 1
        FROM [TourSchedules] AS [t0]
        WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_1)
    ORDER BY [t].[Title]
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t2]
LEFT JOIN (
    SELECT [t3].[DepartureDate], [t3].[TourScheduleId], [t3].[TourId]
    FROM (
        SELECT [t1].[DepartureDate], [t1].[TourScheduleId], [t1].[TourId], ROW_NUMBER() OVER(PARTITION BY [t1].[TourId] ORDER BY [t1].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t1]
        WHERE [t1].[IsDeleted] = CAST(0 AS bit)
    ) AS [t3]
    WHERE [t3].[row] <= 3
) AS [t4] ON [t2].[TourId] = [t4].[TourId]
ORDER BY [t2].[Title], [t2].[TourId], [t4].[TourId], [t4].[DepartureDate] 
2025-05-12 01:50:36.3959 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:36.4069 INFO Executed DbCommand (9ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__departureDate_Value_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 AND EXISTS (
    SELECT 1
    FROM [TourSchedules] AS [t0]
    WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_1) 
2025-05-12 01:50:36.4230 INFO Executed DbCommand (14ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__departureDate_Value_Date_1='?' (DbType = DateTime2), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t2].[TourId], [t2].[Title], [t2].[Destination], [t2].[Duration], [t2].[Capacity], [t2].[AdultPrice], [t4].[DepartureDate], [t4].[TourScheduleId], [t2].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0 AND EXISTS (
        SELECT 1
        FROM [TourSchedules] AS [t0]
        WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_1)
    ORDER BY [t].[Title]
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t2]
LEFT JOIN (
    SELECT [t3].[DepartureDate], [t3].[TourScheduleId], [t3].[TourId]
    FROM (
        SELECT [t1].[DepartureDate], [t1].[TourScheduleId], [t1].[TourId], ROW_NUMBER() OVER(PARTITION BY [t1].[TourId] ORDER BY [t1].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t1]
        WHERE [t1].[IsDeleted] = CAST(0 AS bit)
    ) AS [t3]
    WHERE [t3].[row] <= 3
) AS [t4] ON [t2].[TourId] = [t4].[TourId]
ORDER BY [t2].[Title], [t2].[TourId], [t4].[TourId], [t4].[DepartureDate] 
2025-05-12 01:50:36.4230 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:36.4364 INFO Executed DbCommand (8ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__departureDate_Value_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 AND EXISTS (
    SELECT 1
    FROM [TourSchedules] AS [t0]
    WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_1) 
2025-05-12 01:50:36.4504 INFO Executed DbCommand (12ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__departureDate_Value_Date_1='?' (DbType = DateTime2), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t2].[TourId], [t2].[Title], [t2].[Destination], [t2].[Duration], [t2].[Capacity], [t2].[AdultPrice], [t4].[DepartureDate], [t4].[TourScheduleId], [t2].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0 AND EXISTS (
        SELECT 1
        FROM [TourSchedules] AS [t0]
        WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_1)
    ORDER BY [t].[Title]
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t2]
LEFT JOIN (
    SELECT [t3].[DepartureDate], [t3].[TourScheduleId], [t3].[TourId]
    FROM (
        SELECT [t1].[DepartureDate], [t1].[TourScheduleId], [t1].[TourId], ROW_NUMBER() OVER(PARTITION BY [t1].[TourId] ORDER BY [t1].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t1]
        WHERE [t1].[IsDeleted] = CAST(0 AS bit)
    ) AS [t3]
    WHERE [t3].[row] <= 3
) AS [t4] ON [t2].[TourId] = [t4].[TourId]
ORDER BY [t2].[Title], [t2].[TourId], [t4].[TourId], [t4].[DepartureDate] 
2025-05-12 01:50:41.5378 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:41.5456 INFO Executed DbCommand (4ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 
2025-05-12 01:50:41.5611 INFO Executed DbCommand (12ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:50:41.5611 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:41.5736 INFO Executed DbCommand (5ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 
2025-05-12 01:50:41.5736 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:41.5883 INFO Executed DbCommand (12ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:50:41.6217 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:43.5631 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:43.6261 INFO Executed DbCommand (15ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__destination_1_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 AND [t].[Destination] LIKE @__destination_1_contains ESCAPE N'\' 
2025-05-12 01:50:43.6485 INFO Executed DbCommand (9ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__destination_1_contains='?' (Size = 200), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0 AND [t].[Destination] LIKE @__destination_1_contains ESCAPE N'\'
    ORDER BY [t].[Title]
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:50:48.2331 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:48.2331 INFO Executed DbCommand (3ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 
2025-05-12 01:50:48.2483 INFO Executed DbCommand (9ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:50:48.2483 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:49.4777 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:49.4777 INFO Executed DbCommand (4ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 
2025-05-12 01:50:49.4932 INFO Executed DbCommand (8ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:50:49.4932 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:52.3746 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:52.3746 INFO Executed DbCommand (4ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__destination_1_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 AND [t].[Destination] LIKE @__destination_1_contains ESCAPE N'\' 
2025-05-12 01:50:52.3746 INFO Executed DbCommand (6ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__destination_1_contains='?' (Size = 200), @__p_2='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0 AND [t].[Destination] LIKE @__destination_1_contains ESCAPE N'\'
    ORDER BY [t].[Title]
    OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:50:56.4709 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:50:56.4709 INFO Executed DbCommand (3ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 
2025-05-12 01:50:56.4817 INFO Executed DbCommand (6ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:50:56.4817 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:51:00.9602 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:51:00.9659 INFO Executed DbCommand (3ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 
2025-05-12 01:51:00.9659 INFO Executed DbCommand (6ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:51:00.9776 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:51:01.1178 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:51:01.1178 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:51:01.1178 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:51:01.1178 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:51:01.1369 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:51:01.1369 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:51:05.0450 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:51:05.0653 INFO Executed DbCommand (10ms) [Parameters=[@__destination_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[Destination] LIKE @__destination_0_contains ESCAPE N'\' 
2025-05-12 01:51:05.1328 INFO Executed DbCommand (46ms) [Parameters=[@__destination_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[Destination] LIKE @__destination_0_contains ESCAPE N'\'
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:51:13.4437 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:51:13.4478 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:51:13.4478 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:51:14.2307 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:51:14.2307 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:51:14.2470 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:51:16.2413 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:51:16.2467 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:51:16.2588 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:51:16.2588 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:51:37.4513 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:51:37.4634 INFO Executed DbCommand (5ms) [Parameters=[@__keyword_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[Title] LIKE @__keyword_0_contains ESCAPE N'\' 
2025-05-12 01:51:37.5114 INFO Executed DbCommand (34ms) [Parameters=[@__keyword_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[Title] LIKE @__keyword_0_contains ESCAPE N'\'
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 01:51:38.2011 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:51:38.2171 INFO Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 01:51:38.2338 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 01:51:51.5149 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:51:51.5259 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:51:51.5259 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:51:51.9621 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:51:51.9621 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:51:51.9621 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:51:52.6738 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:51:52.6738 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:51:52.6858 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:51:53.6179 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:51:53.6179 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:51:53.6179 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:52:00.4080 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:52:00.4567 INFO Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-12 01:52:00.4670 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-12 01:52:00.4835 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-12 01:52:00.4961 INFO Executed DbCommand (5ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-12 01:52:47.2349 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:52:47.3008 INFO Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
LEFT JOIN [TourSchedules] AS [t] ON [b].[TourScheduleId] = [t].[TourScheduleId]
WHERE [b].[BookingId] = @__id_0 
2025-05-12 01:52:47.3090 INFO Executed DbCommand (3ms) [Parameters=[@__existing_TourScheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__existing_TourScheduleId_0 
2025-05-12 01:52:47.3090 INFO Executed DbCommand (2ms) [Parameters=[@__existing_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__existing_TourId_0 
2025-05-12 01:52:47.3383 INFO Executed DbCommand (7ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p4='?' (DbType = Int32), @p3='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Bookings] SET [BookingDate] = @p0, [PaymentMethod] = @p1
OUTPUT 1
WHERE [BookingId] = @p2;
UPDATE [Users] SET [Email] = @p3
OUTPUT 1
WHERE [UserId] = @p4; 
2025-05-12 01:52:47.3383 INFO Admin đã chỉnh sửa booking #23 – Người đặt: Phương Linh 
2025-05-12 01:52:47.3586 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:52:47.3961 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:52:47.4024 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:52:47.4402 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:52:47.4454 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:52:47.4679 INFO Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:52:57.7656 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:52:57.7656 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:52:57.7656 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:52:57.8153 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:52:57.8199 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:52:57.8199 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:53:26.6779 INFO Executed DbCommand (7ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 01:53:26.6779 ERROR Không tìm thấy người dùng khi truy cập trang hồ sơ. Email: ptduong394@gmail.com 
2025-05-12 01:53:56.5199 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:53:56.5509 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:53:57.1733 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:53:57.1733 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:53:57.1809 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:53:58.4699 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:53:58.4699 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:53:58.4699 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:54:00.5431 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:54:00.5431 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:54:00.5431 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY 
2025-05-12 01:54:06.7359 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:54:06.7826 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__p_0 
2025-05-12 01:54:06.7896 INFO Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:54:06.8186 INFO Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Users]
OUTPUT 1
WHERE [UserId] = @p0; 
2025-05-12 01:54:06.8258 WARN Admin xoá người dùng ID: 13, Email: "phuonglinhreal@gmail.com" 
2025-05-12 01:54:06.8258 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:54:06.8391 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:54:06.8391 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 01:54:08.6946 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:54:08.6971 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 01:54:08.6971 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY 
2025-05-12 01:54:11.7237 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:54:11.7304 INFO Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 01:54:29.6324 INFO Executed DbCommand (12ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 01:54:29.6996 INFO Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:54:29.6996 INFO Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:54:29.7121 INFO Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 01:54:29.7121 INFO Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:54:29.7121 INFO Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:54:29.7300 INFO Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 01:54:29.7300 WARN  
2025-05-12 01:54:31.1533 INFO Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 01:54:31.1533 ERROR Không tìm thấy người dùng khi truy cập trang hồ sơ. Email: ptduong394@gmail.com 
2025-05-12 01:54:49.8564 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:54:49.8564 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 01:54:50.4227 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:54:50.4227 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:54:50.4384 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 01:54:50.4928 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:54:50.4928 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 01:54:50.5100 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 01:54:51.9122 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 01:54:51.9188 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-12 01:54:51.9188 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-12 01:54:51.9188 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-12 01:54:51.9188 INFO Executed DbCommand (4ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-12 02:00:17.9939 INFO Executed DbCommand (138ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 02:00:18.1056 INFO Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 02:00:18.5630 INFO Now listening on: http://localhost:5062 
2025-05-12 02:00:18.6285 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 02:00:18.6285 INFO Hosting environment: Development 
2025-05-12 02:00:18.6285 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 02:00:25.2994 INFO Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:00:25.4138 INFO Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 02:00:25.5562 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:00:25.6153 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:00:26.0598 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:00:26.1735 INFO Executed DbCommand (33ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 02:00:29.4263 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:00:29.4494 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 02:00:30.6181 INFO Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:00:30.6462 INFO Executed DbCommand (4ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 02:00:37.4915 INFO Executed DbCommand (5ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 02:00:37.4994 INFO Người dùng mở trang đặt tour: "Tour Vũng Tàu 2N1Đ - Biển gần Sài Gòn" – Ngày đi: "21/11/2025" 
2025-05-12 02:00:37.5231 INFO Executed DbCommand (4ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 02:00:59.2158 INFO Executed DbCommand (8ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-12 02:00:59.2431 INFO Executed DbCommand (16ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-12 02:00:59.2591 INFO Executed DbCommand (9ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-12 02:00:59.4410 INFO Executed DbCommand (24ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-12 02:00:59.5508 INFO Executed DbCommand (27ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [ChildQuantity], [DepartureDate], [PaymentMethod], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [TourSchedules] SET [RemainingSlot] = @p10
OUTPUT 1
WHERE [TourScheduleId] = @p11; 
2025-05-12 02:00:59.5634 INFO  Đặt tour thành công – TourID: 10, Tên tour: "Tour Vũng Tàu 2N1Đ - Biển gần Sài Gòn", Ngày đi: "21/11/2025", Người đặt: "Phước Thuận", Email: "ptduong394@gmail.com", Số điện thoại: "0367934563", Địa chỉ: "Kiên Giang", Người lớn: 1, Trẻ em: 1, Tổng tiền: "2,400,000" đ, Thanh toán: "VNPAY" 
2025-05-12 02:00:59.5797 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:00:59.5900 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 02:00:59.6034 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:00:59.6034 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:00:59.7008 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:00:59.7241 INFO Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 02:01:02.1046 INFO Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 02:01:05.5787 INFO Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 02:01:05.6296 INFO Executed DbCommand (10ms) [Parameters=[@__user_UserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b].[TourScheduleId] = [t0].[TourScheduleId]
LEFT JOIN [Images] AS [i] ON [t].[TourId] = [i].[TourId]
WHERE [b].[UserId] = @__user_UserId_0
ORDER BY [b].[BookingDate] DESC, [b].[BookingId], [t].[TourId], [t0].[TourScheduleId] 
2025-05-12 02:01:12.9023 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:01:12.9887 INFO Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-12 02:01:13.0013 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-12 02:01:13.0154 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-12 02:01:13.0279 INFO Executed DbCommand (3ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-12 02:01:20.4008 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:01:20.4312 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:01:20.4571 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 02:01:20.5811 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:01:20.6082 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:01:20.6344 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:01:22.4487 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:01:22.4620 INFO Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-12 02:01:22.4620 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-12 02:01:22.4620 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-12 02:01:22.4620 INFO Executed DbCommand (5ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-12 02:01:28.5162 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:01:28.5884 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
LEFT JOIN [TourSchedules] AS [t] ON [b].[TourScheduleId] = [t].[TourScheduleId]
WHERE [b].[BookingId] = @__id_0 
2025-05-12 02:01:28.5884 INFO Executed DbCommand (1ms) [Parameters=[@__existing_TourScheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__existing_TourScheduleId_0 
2025-05-12 02:01:28.6038 INFO Executed DbCommand (3ms) [Parameters=[@__existing_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__existing_TourId_0 
2025-05-12 02:01:28.6038 INFO Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p2='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Bookings] SET [BookingDate] = @p0
OUTPUT 1
WHERE [BookingId] = @p1;
UPDATE [Users] SET [FullName] = @p2
OUTPUT 1
WHERE [UserId] = @p3; 
2025-05-12 02:01:28.6038 INFO Admin đã chỉnh sửa booking #24 – Người đặt: Dương Phước Thuận 
2025-05-12 02:01:28.6216 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:01:28.6216 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:01:28.6342 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 02:01:28.6713 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:01:28.6837 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:01:28.6980 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:01:29.8380 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:01:29.8566 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 02:01:29.8566 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 02:01:31.6840 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:01:31.6840 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 02:01:31.6958 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY 
2025-05-12 02:01:35.3943 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:01:35.4000 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 02:01:35.4000 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 02:01:36.9304 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:01:36.9304 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 02:01:36.9304 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY 
2025-05-12 02:01:37.7976 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:01:37.7976 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:01:37.8155 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 02:01:37.8672 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:01:37.8672 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:01:37.8859 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:01:41.7452 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:01:41.7452 INFO Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-12 02:01:41.7596 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-12 02:01:41.7596 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-12 02:01:41.7596 INFO Executed DbCommand (3ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-12 02:02:01.0806 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:01.0963 INFO Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
LEFT JOIN [TourSchedules] AS [t] ON [b].[TourScheduleId] = [t].[TourScheduleId]
WHERE [b].[BookingId] = @__id_0 
2025-05-12 02:02:01.0963 INFO Executed DbCommand (3ms) [Parameters=[@__existing_TourScheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__existing_TourScheduleId_0 
2025-05-12 02:02:01.1106 INFO Executed DbCommand (2ms) [Parameters=[@__booking_TourScheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__booking_TourScheduleId_0 
2025-05-12 02:02:01.1106 INFO Executed DbCommand (4ms) [Parameters=[@__existing_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__existing_TourId_0 
2025-05-12 02:02:01.1372 INFO Executed DbCommand (10ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p4='?' (DbType = Int32), @p3='?' (DbType = Int32), @p6='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Bookings] SET [DepartureDate] = @p0, [TourScheduleId] = @p1
OUTPUT 1
WHERE [BookingId] = @p2;
UPDATE [TourSchedules] SET [RemainingSlot] = @p3
OUTPUT 1
WHERE [TourScheduleId] = @p4;
UPDATE [TourSchedules] SET [RemainingSlot] = @p5
OUTPUT 1
WHERE [TourScheduleId] = @p6; 
2025-05-12 02:02:01.1372 INFO Admin đã chỉnh sửa booking #24 – Người đặt: Dương Phước Thuận 
2025-05-12 02:02:01.1372 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:01.1524 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:02:01.3515 INFO Executed DbCommand (197ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 02:02:01.4065 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:01.4065 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:02:01.4212 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:02:03.0634 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:03.0764 INFO Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-12 02:02:03.0764 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-12 02:02:03.0764 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-12 02:02:03.0764 INFO Executed DbCommand (4ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-12 02:02:10.2396 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:10.2467 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:02:10.2584 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 02:02:10.3055 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:10.3055 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:02:10.3205 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:02:12.1216 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:12.1216 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:02:12.1417 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:02:12.6422 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:12.6422 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:02:12.6533 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:02:14.7727 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:14.8042 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:02:17.2969 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:17.3197 INFO Executed DbCommand (14ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0 
2025-05-12 02:02:17.3338 INFO Executed DbCommand (3ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([b].[TotalPrice]), 0.0)
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0 
2025-05-12 02:02:17.3676 INFO Executed DbCommand (9ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryName] AS [Region], COUNT(*) AS [Count]
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
INNER JOIN [Categories] AS [c] ON [t].[CategoryId] = [c].[CategoryId]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
GROUP BY [c].[CategoryName] 
2025-05-12 02:02:17.3676 INFO Executed DbCommand (10ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b].[PaymentMethod] AS [Method], COUNT(*) AS [Count]
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
GROUP BY [b].[PaymentMethod] 
2025-05-12 02:02:17.3918 INFO Executed DbCommand (4ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[Key] AS [Month], COALESCE(SUM([b0].[TotalPrice]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[TotalPrice], DATEPART(month, [b].[DepartureDate]) AS [Key]
    FROM [Bookings] AS [b]
    WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
) AS [b0]
GROUP BY [b0].[Key] 
2025-05-12 02:02:17.3918 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:02:22.7848 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:22.7917 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 02:02:22.7917 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 02:02:24.8034 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:24.8082 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 02:02:24.8082 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY 
2025-05-12 02:02:29.6567 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:29.6673 INFO Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 02:02:29.6673 INFO Executed DbCommand (7ms) [Parameters=[@__user_UserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b].[TourScheduleId] = [t0].[TourScheduleId]
LEFT JOIN [Images] AS [i] ON [t].[TourId] = [i].[TourId]
WHERE [b].[UserId] = @__user_UserId_0
ORDER BY [b].[BookingDate] DESC, [b].[BookingId], [t].[TourId], [t0].[TourScheduleId] 
2025-05-12 02:02:33.0719 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:33.0719 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:02:33.0909 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 02:02:33.0909 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:02:33.1031 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:02:33.1905 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:33.1970 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:02:33.2140 INFO Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 02:02:36.8217 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:36.8367 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:02:36.8367 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:02:36.8367 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:02:36.9256 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:36.9523 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:02:36.9799 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:02:36.9799 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:02:37.0149 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:39.2921 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:39.2921 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:02:39.3105 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:02:39.3105 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:02:42.6898 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:42.7035 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:02:52.0389 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:52.1078 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:02:52.1425 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c] 
2025-05-12 02:02:52.1577 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
ORDER BY [c].[CategoryId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 02:02:53.4281 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:03:01.1972 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:03:01.2165 INFO Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Categories] ([CategoryName])
OUTPUT INSERTED.[CategoryId]
VALUES (@p0); 
2025-05-12 02:03:01.2165 INFO Đã thêm loại tour mới: Du lịch Nước Ngoài 
2025-05-12 02:03:01.2406 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:03:01.2939 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:03:01.2939 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c] 
2025-05-12 02:03:01.2939 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
ORDER BY [c].[CategoryId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 02:03:05.1448 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:03:05.1517 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:03:05.1517 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:03:05.1517 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:03:05.2188 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:03:05.2281 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:03:05.2281 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:03:05.2281 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:03:05.2620 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:03:06.9434 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:03:06.9482 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:04:13.2197 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:04:13.4122 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:04:13.4343 INFO Executed DbCommand (12ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 4000), @p5='?' (Size = 200), @p6='?' (Size = 200), @p7='?' (Size = 2000), @p8='?' (Size = 200), @p9='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tours] ([AdultPrice], [Capacity], [CategoryId], [ChildPrice], [Description], [Destination], [Duration], [Itinerary], [Title], [Transport])
OUTPUT INSERTED.[TourId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9); 
2025-05-12 02:04:13.4343 INFO Đã thêm tour mới ID 16: Du lịch Nhật Bổn 
2025-05-12 02:04:13.5272 INFO Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (DbType = Int32), @p3='?' (Size = 200), @p4='?' (DbType = Int32), @p5='?' (Size = 200), @p6='?' (DbType = Int32), @p7='?' (Size = 200), @p8='?' (DbType = Int32), @p9='?' (Size = 200), @p10='?' (DbType = Int32), @p11='?' (Size = 200), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime2), @p18='?' (DbType = Boolean), @p19='?' (DbType = Int32), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [Images] USING (
VALUES (@p0, @p1, @p2, @p3, 0),
(@p4, @p5, @p6, @p7, 1),
(@p8, @p9, @p10, @p11, 2)) AS i ([DayNumber], [Description], [TourId], [Url], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([DayNumber], [Description], [TourId], [Url])
VALUES (i.[DayNumber], i.[Description], i.[TourId], i.[Url])
OUTPUT INSERTED.[ImageId], i._Position;
MERGE [TourSchedules] USING (
VALUES (@p12, @p13, @p14, @p15, @p16, 0),
(@p17, @p18, @p19, @p20, @p21, 1)) AS i ([DepartureDate], [IsDeleted], [RemainingSlot], [ReturnDate], [TourId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([DepartureDate], [IsDeleted], [RemainingSlot], [ReturnDate], [TourId])
VALUES (i.[DepartureDate], i.[IsDeleted], i.[RemainingSlot], i.[ReturnDate], i.[TourId])
OUTPUT INSERTED.[TourScheduleId], i._Position; 
2025-05-12 02:04:13.5432 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:04:13.5432 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:04:13.5591 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:04:13.5591 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:04:13.6111 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:04:13.6111 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:04:13.6244 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:04:13.6244 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:04:13.6538 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:04:17.5089 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:04:17.5657 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:04:17.5952 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:04:19.5584 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:04:19.5584 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:04:19.5584 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:04:19.5584 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:04:19.6198 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:04:19.6198 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:04:19.6198 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:04:19.6438 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:04:19.6623 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:04:35.0380 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:04:35.0476 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:04:35.0476 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:04:38.0835 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:04:38.0921 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:04:38.1038 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 02:04:38.1818 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:04:38.1959 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:04:38.1959 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:04:42.0687 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:04:42.0803 INFO Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-12 02:04:42.0803 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-12 02:04:42.0803 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-12 02:04:42.0915 INFO Executed DbCommand (4ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-12 02:04:51.9828 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:04:51.9928 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:04:51.9928 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 02:04:52.0696 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:04:52.0745 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:04:52.0894 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:05:06.0322 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:05:06.0627 INFO Executed DbCommand (6ms) [Parameters=[@__keyword_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[Title] LIKE @__keyword_0_contains ESCAPE N'\' 
2025-05-12 02:05:06.0881 INFO Executed DbCommand (6ms) [Parameters=[@__keyword_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[Title] LIKE @__keyword_0_contains ESCAPE N'\'
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 02:05:07.4530 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:05:07.4701 INFO Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:05:07.4701 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 02:05:13.1550 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:05:13.1685 INFO Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-12 02:05:13.1685 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-12 02:05:13.1685 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-12 02:05:13.1825 INFO Executed DbCommand (3ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-12 02:05:29.1160 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:05:29.1233 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:05:29.1233 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:05:29.1233 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:05:29.1763 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:05:29.1820 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:05:29.1820 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:05:29.1975 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:05:29.2252 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:05:32.3519 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:05:32.3605 INFO Executed DbCommand (3ms) [Parameters=[@__keyword_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[Title] LIKE @__keyword_0_contains ESCAPE N'\' 
2025-05-12 02:05:32.3789 INFO Executed DbCommand (4ms) [Parameters=[@__keyword_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[Title] LIKE @__keyword_0_contains ESCAPE N'\'
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:05:32.3789 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:05:33.8241 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:05:33.8241 INFO Executed DbCommand (3ms) [Parameters=[@__keyword_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[Title] LIKE @__keyword_0_contains ESCAPE N'\' 
2025-05-12 02:05:33.8241 INFO Executed DbCommand (4ms) [Parameters=[@__keyword_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[Title] LIKE @__keyword_0_contains ESCAPE N'\'
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:05:33.8386 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:05:35.1696 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:05:35.1696 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:05:35.1696 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:05:41.3391 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:05:41.3626 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:05:41.3802 INFO Executed DbCommand (4ms) [Parameters=[@__model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__model_TourId_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:05:41.3900 INFO Executed DbCommand (3ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:05:41.3900 INFO Executed DbCommand (0ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:05:41.3900 INFO Executed DbCommand (0ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:05:41.3900 INFO Executed DbCommand (0ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:05:41.3900 INFO Executed DbCommand (0ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:05:41.4008 INFO Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TourSchedules] SET [IsDeleted] = @p0
OUTPUT 1
WHERE [TourScheduleId] = @p1; 
2025-05-12 02:05:41.4008 INFO Cập nhật tour ID 14: Tour Bến Tre – Cồn Phụng 1N 
2025-05-12 02:05:41.4008 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:05:41.4008 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:05:41.4008 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:05:41.4160 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:05:41.4736 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:05:41.4788 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:05:41.4788 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:05:41.4788 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:05:41.5088 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:05:43.8347 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:05:43.8426 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:05:43.8426 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 02:05:48.7139 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:05:48.7139 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:05:48.7292 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 02:05:48.7770 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:05:48.7938 INFO Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:05:48.8110 INFO Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:05:55.7290 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:05:55.7290 INFO Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-12 02:05:55.7454 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-12 02:05:55.7454 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-12 02:05:55.7454 INFO Executed DbCommand (3ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-12 02:06:05.0589 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:06:05.0817 INFO Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:06:05.1133 INFO Executed DbCommand (30ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 02:06:05.2387 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:06:05.2495 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:06:05.2643 INFO Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:06:08.0983 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:06:08.1034 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:06:08.1034 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 02:06:08.1627 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:06:08.1699 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:06:08.1968 INFO Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:06:12.7675 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:06:12.7759 INFO Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:06:12.7759 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 02:06:19.8516 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:06:19.8516 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:06:19.8516 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:06:19.8516 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:06:19.9308 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:06:19.9308 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:06:19.9500 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:06:19.9500 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:06:19.9752 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:06:21.8229 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:06:21.8229 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:06:21.8229 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:06:27.5911 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:06:27.6014 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:06:27.6014 WARN Dữ liệu tour không hợp lệ khi cập nhật. 
2025-05-12 02:06:33.4145 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:06:33.4225 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:06:33.4225 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:06:33.4314 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:06:33.4945 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:06:33.4945 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:06:33.5084 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:06:33.5084 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:06:33.5512 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:06:36.0105 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:06:36.0105 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:06:36.0105 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:06:40.2763 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:06:40.2763 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:06:40.2763 WARN Dữ liệu tour không hợp lệ khi cập nhật. 
2025-05-12 02:06:41.6280 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:06:41.6342 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:06:41.6342 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:06:41.6342 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:06:41.6997 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:06:41.6997 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:06:41.7144 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:06:41.7144 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:06:41.7436 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:06:44.7031 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:06:44.7117 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:06:44.7117 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:06:50.6879 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:06:50.6879 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:06:50.6879 WARN Dữ liệu tour không hợp lệ khi cập nhật. 
2025-05-12 02:07:10.9394 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:10.9449 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:10.9449 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:07:10.9449 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:07:11.0188 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:11.0261 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:07:11.0261 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:07:11.0261 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:11.0576 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:12.9350 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:12.9455 INFO Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:07:12.9455 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:07:23.5233 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:23.5233 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:07:23.5400 INFO Executed DbCommand (7ms) [Parameters=[@__model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__model_TourId_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:07:23.5400 INFO Executed DbCommand (4ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:07:23.5400 INFO Executed DbCommand (0ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:07:23.5400 INFO Executed DbCommand (0ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:07:23.5400 INFO Executed DbCommand (0ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:07:23.5400 INFO Executed DbCommand (0ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:07:23.5400 INFO Cập nhật tour ID 7: Tour Đà Lạt 3N2Đ - Thành phố ngàn hoa 
2025-05-12 02:07:23.5400 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:23.5581 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:23.5581 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:07:23.5581 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:07:23.6119 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:23.6181 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:07:23.6181 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:07:23.6181 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:23.6478 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:28.1639 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:28.1709 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:07:28.1709 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:07:29.6964 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:29.6964 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:29.6964 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:07:29.7124 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:07:29.7767 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:29.7767 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:07:29.7926 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:07:29.7926 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:29.8249 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:30.6247 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:30.6247 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:07:30.6247 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:07:32.2320 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:32.2320 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:32.2431 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:07:32.2431 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:07:32.3205 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:32.3302 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:07:32.3401 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:07:32.3401 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:32.3638 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:33.8159 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:33.8243 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:07:33.8243 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:07:36.0311 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:36.0479 INFO Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:36.0479 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:07:36.0479 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:07:36.1012 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:36.1065 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:07:36.1065 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:07:36.1180 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:36.1350 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:37.6439 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:37.6439 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:07:37.6499 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:07:39.5890 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:39.5890 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:39.5890 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:07:39.5890 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:07:39.6618 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:39.6665 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:07:39.6665 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:07:39.6665 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:39.7073 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:41.3937 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:41.3937 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:07:41.3937 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:07:43.0603 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:43.0603 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:43.0603 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:07:43.0603 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:07:43.1352 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:43.1352 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:07:43.1352 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:07:43.1352 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:43.1741 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:44.8315 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:44.8315 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:07:44.8315 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:07:46.4545 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:46.4545 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:46.4545 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:07:46.4628 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:07:46.5104 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:46.5104 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:07:46.5104 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:07:46.5258 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:46.5443 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:49.6067 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:49.6067 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:07:49.6067 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:07:51.1764 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:51.1764 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:51.1817 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:07:51.1817 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:07:51.2384 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:51.2436 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:07:51.2436 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:07:51.2436 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:51.2697 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:53.6777 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:53.6810 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:07:53.6810 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:07:55.1413 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:55.1413 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:55.1413 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:07:55.1413 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:07:55.2044 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:55.2044 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:07:55.2044 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:07:55.2202 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:55.2412 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:57.1168 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:57.1206 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:07:57.1206 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:07:58.5673 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:58.5699 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:58.5699 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:07:58.5699 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:07:58.6496 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:58.6496 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:07:58.6496 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:07:58.6659 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:07:58.6859 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:59.9659 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:07:59.9659 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:07:59.9659 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:08:01.4555 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:01.4555 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:08:01.4555 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:08:01.4622 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:08:01.5061 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:01.5100 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:08:01.5100 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:08:01.5100 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:08:01.5324 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:04.5600 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:04.5600 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:08:04.5600 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:08:08.9989 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:08.9989 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:08:08.9989 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:08:08.9989 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:08:09.0485 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:09.0485 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:08:09.0575 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:08:09.0575 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:08:09.0758 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:09.7923 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:09.7923 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:08:09.7923 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:08:11.8212 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:11.8212 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:08:11.8212 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:08:11.8212 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:08:11.8845 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:11.8845 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:08:11.8845 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:08:11.8845 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:08:11.9104 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:13.4725 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:13.4826 INFO Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:08:13.4826 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:08:15.0727 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:15.0727 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:08:15.0727 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:08:15.0727 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:08:15.1253 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:15.1253 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:08:15.1387 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:08:15.1387 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:08:15.1613 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:17.0401 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:17.0401 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:08:17.0401 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:08:18.5522 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:18.5574 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:08:18.5574 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:08:18.5574 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:08:18.6070 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:18.6070 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:08:18.6256 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:08:18.6327 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:08:18.6623 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:21.2620 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:21.2620 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:08:21.2788 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:08:22.5372 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:22.5439 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:08:22.5439 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:08:22.5439 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:08:22.5974 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:22.6036 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:08:22.6036 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:08:22.6200 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:08:22.6367 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:24.7721 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:24.7820 INFO Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:08:24.7820 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:08:27.1510 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:27.1510 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:08:27.1510 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:08:27.1510 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:08:27.2173 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:27.2173 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:08:27.2272 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:08:27.2272 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:08:27.2464 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:29.6000 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:29.6065 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:08:29.6065 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:08:31.6543 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:31.6543 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:08:31.6673 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:08:31.6673 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:08:31.7209 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:31.7285 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:08:31.7285 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:08:31.7285 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:08:31.7523 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:36.2651 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:08:36.3519 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-12 02:08:36.3749 INFO Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-12 02:08:36.4126 INFO Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__id_0 
2025-05-12 02:08:36.5411 INFO Executed DbCommand (61ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Images]
OUTPUT 1
WHERE [ImageId] = @p0;
DELETE FROM [Images]
OUTPUT 1
WHERE [ImageId] = @p1;
DELETE FROM [Images]
OUTPUT 1
WHERE [ImageId] = @p2;
DELETE FROM [Images]
OUTPUT 1
WHERE [ImageId] = @p3;
DELETE FROM [Images]
OUTPUT 1
WHERE [ImageId] = @p4;
DELETE FROM [TourSchedules]
OUTPUT 1
WHERE [TourScheduleId] = @p5;
DELETE FROM [TourSchedules]
OUTPUT 1
WHERE [TourScheduleId] = @p6;
DELETE FROM [TourSchedules]
OUTPUT 1
WHERE [TourScheduleId] = @p7;
DELETE FROM [TourSchedules]
OUTPUT 1
WHERE [TourScheduleId] = @p8;
DELETE FROM [TourSchedules]
OUTPUT 1
WHERE [TourScheduleId] = @p9;
DELETE FROM [Tours]
OUTPUT 1
WHERE [TourId] = @p10; 
2025-05-12 02:08:36.5782 ERROR An exception occurred in the database while saving changes for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Bookings_TourSchedules_TourScheduleId". The conflict occurred in database "TourBookingDB", table "dbo.Bookings", column 'TourScheduleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:d7635470-820e-423d-96a5-a0f4929edc9b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Bookings_TourSchedules_TourScheduleId". The conflict occurred in database "TourBookingDB", table "dbo.Bookings", column 'TourScheduleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:d7635470-820e-423d-96a5-a0f4929edc9b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2025-05-12 02:13:27.2379 INFO Executed DbCommand (165ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 02:13:27.3554 INFO Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 02:13:27.8094 INFO Now listening on: http://localhost:5062 
2025-05-12 02:13:27.8742 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 02:13:27.8742 INFO Hosting environment: Development 
2025-05-12 02:13:27.8742 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 02:13:36.2207 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:13:36.3972 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-12 02:13:36.4418 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-12 02:13:36.5781 INFO Executed DbCommand (77ms) [Parameters=[@__scheduleIds_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[TourScheduleId] IS NOT NULL AND [b].[TourScheduleId] IN (
    SELECT [s].[value]
    FROM OPENJSON(@__scheduleIds_0) WITH ([value] int '$') AS [s]
) 
2025-05-12 02:13:36.6230 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-12 02:13:36.6671 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__id_0 
2025-05-12 02:13:36.7995 INFO Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Bookings]
OUTPUT 1
WHERE [BookingId] = @p0;
DELETE FROM [Images]
OUTPUT 1
WHERE [ImageId] = @p1;
DELETE FROM [Images]
OUTPUT 1
WHERE [ImageId] = @p2;
DELETE FROM [Images]
OUTPUT 1
WHERE [ImageId] = @p3;
DELETE FROM [Images]
OUTPUT 1
WHERE [ImageId] = @p4;
DELETE FROM [Images]
OUTPUT 1
WHERE [ImageId] = @p5;
DELETE FROM [TourSchedules]
OUTPUT 1
WHERE [TourScheduleId] = @p6;
DELETE FROM [TourSchedules]
OUTPUT 1
WHERE [TourScheduleId] = @p7;
DELETE FROM [TourSchedules]
OUTPUT 1
WHERE [TourScheduleId] = @p8;
DELETE FROM [TourSchedules]
OUTPUT 1
WHERE [TourScheduleId] = @p9;
DELETE FROM [TourSchedules]
OUTPUT 1
WHERE [TourScheduleId] = @p10;
DELETE FROM [Tours]
OUTPUT 1
WHERE [TourId] = @p11; 
2025-05-12 02:13:36.8168 INFO Đã xóa tour ID 9: Tour Nha Trang biển xanh 3N2Đ, ảnh và toàn bộ lịch khởi hành 
2025-05-12 02:13:36.8354 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:13:36.8826 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:13:36.9655 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:13:36.9876 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:13:37.3710 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:13:37.4782 INFO Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:13:37.5975 INFO Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:13:37.6291 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:13:37.7018 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:13:46.8663 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:13:46.9017 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:13:47.6430 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:13:47.8024 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:13:47.8484 INFO Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 02:13:47.9391 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:13:47.9648 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:13:47.9901 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:13:49.7284 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:13:49.7446 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:13:49.7446 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:13:50.3719 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:13:50.3719 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:13:50.4124 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:13:53.3039 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:13:53.3194 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:13:53.3440 INFO Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:13:53.9512 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:13:53.9634 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:13:53.9634 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:13:54.3158 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:13:54.3229 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:13:54.3229 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:14:00.2150 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:00.2150 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:14:00.2150 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:14:02.8467 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:02.8545 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:14:02.8545 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 02:14:02.9044 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:02.9044 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:14:02.9215 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:14:04.7265 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:04.7338 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:14:04.7338 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:14:04.7449 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:14:04.7959 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:04.7959 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:14:04.8149 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:14:04.8257 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:14:04.8481 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:07.2786 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:07.2786 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:14:07.2954 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 02:14:07.3470 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:07.3577 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:14:07.3780 INFO Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:14:12.8799 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:12.8862 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:14:12.8862 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:14:12.9234 INFO Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:14:12.9790 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:12.9790 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:14:12.9948 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:14:12.9948 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:14:13.0267 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:15.9743 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:15.9938 INFO Executed DbCommand (10ms) [Parameters=[@__keyword_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[Title] LIKE @__keyword_0_contains ESCAPE N'\' 
2025-05-12 02:14:16.0104 INFO Executed DbCommand (5ms) [Parameters=[@__keyword_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[Title] LIKE @__keyword_0_contains ESCAPE N'\'
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:14:16.0104 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:14:18.3168 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:18.3271 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__p_0 
2025-05-12 02:14:18.3271 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-12 02:14:18.3470 INFO Executed DbCommand (11ms) [Parameters=[@__scheduleIds_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[TourScheduleId] IS NOT NULL AND [b].[TourScheduleId] IN (
    SELECT [s].[value]
    FROM OPENJSON(@__scheduleIds_0) WITH ([value] int '$') AS [s]
) 
2025-05-12 02:14:18.3518 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-12 02:14:18.3518 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__id_0 
2025-05-12 02:14:18.3951 INFO Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Bookings]
OUTPUT 1
WHERE [BookingId] = @p0;
DELETE FROM [Bookings]
OUTPUT 1
WHERE [BookingId] = @p1;
DELETE FROM [Images]
OUTPUT 1
WHERE [ImageId] = @p2;
DELETE FROM [Images]
OUTPUT 1
WHERE [ImageId] = @p3;
DELETE FROM [Images]
OUTPUT 1
WHERE [ImageId] = @p4;
DELETE FROM [Images]
OUTPUT 1
WHERE [ImageId] = @p5;
DELETE FROM [Images]
OUTPUT 1
WHERE [ImageId] = @p6;
DELETE FROM [TourSchedules]
OUTPUT 1
WHERE [TourScheduleId] = @p7;
DELETE FROM [TourSchedules]
OUTPUT 1
WHERE [TourScheduleId] = @p8;
DELETE FROM [TourSchedules]
OUTPUT 1
WHERE [TourScheduleId] = @p9;
DELETE FROM [TourSchedules]
OUTPUT 1
WHERE [TourScheduleId] = @p10;
DELETE FROM [TourSchedules]
OUTPUT 1
WHERE [TourScheduleId] = @p11;
DELETE FROM [Tours]
OUTPUT 1
WHERE [TourId] = @p12; 
2025-05-12 02:14:18.3951 INFO Đã xóa tour ID 11: Tour Tam Đảo mùa sương 2N1Đ, ảnh và toàn bộ lịch khởi hành 
2025-05-12 02:14:18.4100 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:18.4359 INFO Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:14:18.4359 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:14:18.4527 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:14:18.5252 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:18.5252 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:14:18.5399 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:14:18.5399 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:14:18.5648 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:21.2089 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:21.2151 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:14:21.2151 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 02:14:21.2859 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:21.2922 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:14:21.2922 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:14:26.3024 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:26.3090 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:14:26.3090 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:14:30.8463 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:30.8585 INFO Executed DbCommand (6ms) [Parameters=[@__tour_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [t].[Title] LIKE @__tour_0_contains ESCAPE N'\' 
2025-05-12 02:14:30.8825 INFO Executed DbCommand (7ms) [Parameters=[@__tour_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [s].[BookingId], [s].[AdultQuantity], [s].[BookingDate], [s].[ChildQuantity], [s].[DepartureDate], [s].[PaymentMethod], [s].[SpecialRequest], [s].[TotalPrice], [s].[TourId], [s].[TourScheduleId], [s].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [s].[TourId0], [s].[AdultPrice], [s].[Capacity], [s].[CategoryId], [s].[ChildPrice], [s].[Description], [s].[Destination], [s].[Duration], [s].[Itinerary], [s].[Title], [s].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [t].[TourId] AS [TourId0], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Bookings] AS [b]
    INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
    WHERE [t].[Title] LIKE @__tour_0_contains ESCAPE N'\'
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[UserId]
LEFT JOIN [TourSchedules] AS [t0] ON [s].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [s].[BookingId] DESC 
2025-05-12 02:14:31.3613 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:31.3613 INFO Executed DbCommand (4ms) [Parameters=[@__tour_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [t].[Title] LIKE @__tour_0_contains ESCAPE N'\' 
2025-05-12 02:14:31.3728 INFO Executed DbCommand (5ms) [Parameters=[@__tour_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [s].[BookingId], [s].[AdultQuantity], [s].[BookingDate], [s].[ChildQuantity], [s].[DepartureDate], [s].[PaymentMethod], [s].[SpecialRequest], [s].[TotalPrice], [s].[TourId], [s].[TourScheduleId], [s].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [s].[TourId0], [s].[AdultPrice], [s].[Capacity], [s].[CategoryId], [s].[ChildPrice], [s].[Description], [s].[Destination], [s].[Duration], [s].[Itinerary], [s].[Title], [s].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [t].[TourId] AS [TourId0], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Bookings] AS [b]
    INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
    WHERE [t].[Title] LIKE @__tour_0_contains ESCAPE N'\'
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[UserId]
LEFT JOIN [TourSchedules] AS [t0] ON [s].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [s].[BookingId] DESC 
2025-05-12 02:14:33.5111 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:33.5111 INFO Executed DbCommand (4ms) [Parameters=[@__tour_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [t].[Title] LIKE @__tour_0_contains ESCAPE N'\' 
2025-05-12 02:14:33.5111 INFO Executed DbCommand (4ms) [Parameters=[@__tour_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [s].[BookingId], [s].[AdultQuantity], [s].[BookingDate], [s].[ChildQuantity], [s].[DepartureDate], [s].[PaymentMethod], [s].[SpecialRequest], [s].[TotalPrice], [s].[TourId], [s].[TourScheduleId], [s].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [s].[TourId0], [s].[AdultPrice], [s].[Capacity], [s].[CategoryId], [s].[ChildPrice], [s].[Description], [s].[Destination], [s].[Duration], [s].[Itinerary], [s].[Title], [s].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [t].[TourId] AS [TourId0], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Bookings] AS [b]
    INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
    WHERE [t].[Title] LIKE @__tour_0_contains ESCAPE N'\'
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[UserId]
LEFT JOIN [TourSchedules] AS [t0] ON [s].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [s].[BookingId] DESC 
2025-05-12 02:14:34.7868 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:34.7940 INFO Executed DbCommand (4ms) [Parameters=[@__tour_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [t].[Title] LIKE @__tour_0_contains ESCAPE N'\' 
2025-05-12 02:14:34.7940 INFO Executed DbCommand (5ms) [Parameters=[@__tour_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [s].[BookingId], [s].[AdultQuantity], [s].[BookingDate], [s].[ChildQuantity], [s].[DepartureDate], [s].[PaymentMethod], [s].[SpecialRequest], [s].[TotalPrice], [s].[TourId], [s].[TourScheduleId], [s].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [s].[TourId0], [s].[AdultPrice], [s].[Capacity], [s].[CategoryId], [s].[ChildPrice], [s].[Description], [s].[Destination], [s].[Duration], [s].[Itinerary], [s].[Title], [s].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [t].[TourId] AS [TourId0], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Bookings] AS [b]
    INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
    WHERE [t].[Title] LIKE @__tour_0_contains ESCAPE N'\'
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[UserId]
LEFT JOIN [TourSchedules] AS [t0] ON [s].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [s].[BookingId] DESC 
2025-05-12 02:14:36.6523 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:36.6523 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:14:36.6523 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:14:40.5922 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:40.5922 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:14:40.6028 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:14:40.6028 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:14:40.7018 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:40.7117 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:14:40.7117 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:14:40.7290 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:14:40.7569 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:44.0302 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:44.0772 INFO Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:14:44.1018 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:14:52.4209 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:52.5412 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:14:52.5412 WARN Dữ liệu tour không hợp lệ khi cập nhật. 
2025-05-12 02:14:57.5628 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:57.5700 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:14:57.5700 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:14:57.5700 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:14:57.6593 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:57.6642 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:14:57.6642 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:14:57.6642 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:14:57.7074 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:59.4273 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:14:59.4377 INFO Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:14:59.4377 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:15:11.1362 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:11.1362 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:15:11.1905 INFO Executed DbCommand (20ms) [Parameters=[@__model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__model_TourId_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:15:11.2040 INFO Executed DbCommand (3ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:15:11.2040 INFO Executed DbCommand (3ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:15:11.2839 INFO Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [TourSchedules] ([DepartureDate], [IsDeleted], [RemainingSlot], [ReturnDate], [TourId])
OUTPUT INSERTED.[TourScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4); 
2025-05-12 02:15:11.2968 INFO Cập nhật tour ID 16: Du lịch Nhật Bổn 
2025-05-12 02:15:11.2968 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:11.3058 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:15:11.3058 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:15:11.3058 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:15:11.3553 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:11.3553 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:15:11.3553 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:15:11.3692 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:15:11.3962 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:12.7002 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:12.7002 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:15:12.7126 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:15:15.7809 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:15.7919 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:15:15.7919 INFO Executed DbCommand (7ms) [Parameters=[@__model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__model_TourId_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:15:15.7919 INFO Executed DbCommand (1ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:15:15.7919 INFO Executed DbCommand (0ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:15:15.8048 INFO Executed DbCommand (0ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:15:15.8048 INFO Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TourSchedules] SET [IsDeleted] = @p0
OUTPUT 1
WHERE [TourScheduleId] = @p1; 
2025-05-12 02:15:15.8048 INFO Cập nhật tour ID 16: Du lịch Nhật Bổn 
2025-05-12 02:15:15.8048 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:15.8251 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:15:15.8251 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:15:15.8251 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:15:15.8692 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:15.8692 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:15:15.8692 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:15:15.8692 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:15:15.9185 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:16.9124 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:16.9196 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:15:16.9196 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:15:25.3145 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:25.3220 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:15:25.3220 WARN Dữ liệu tour không hợp lệ khi cập nhật. 
2025-05-12 02:15:26.9381 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:26.9381 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:15:26.9501 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:15:26.9501 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:15:27.0221 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:27.0286 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:15:27.0286 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:15:27.0433 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:15:27.0692 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:28.3647 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:28.3786 INFO Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:15:28.3786 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:15:41.0998 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:41.1411 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:15:41.1411 INFO Executed DbCommand (2ms) [Parameters=[@__model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__model_TourId_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:15:41.1574 INFO Executed DbCommand (3ms) [Parameters=[@__model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__model_TourId_0 AND [i].[DayNumber] = 0 
2025-05-12 02:15:41.1738 INFO Executed DbCommand (2ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:15:41.1738 INFO Executed DbCommand (1ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:15:41.1738 INFO Executed DbCommand (1ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:15:41.1846 INFO Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (Size = 200), @p3='?' (DbType = Int32), @p4='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Images]
OUTPUT 1
WHERE [ImageId] = @p0;
INSERT INTO [Images] ([DayNumber], [Description], [TourId], [Url])
OUTPUT INSERTED.[ImageId]
VALUES (@p1, @p2, @p3, @p4); 
2025-05-12 02:15:41.1846 INFO Cập nhật tour ID 16: Du lịch Nhật Bổn 
2025-05-12 02:15:41.1846 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:41.1981 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:15:41.1981 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:15:41.1981 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:15:41.2524 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:41.2589 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:15:41.2589 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:15:41.2589 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:15:41.2938 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:47.8429 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:47.9133 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 02:15:47.9299 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 02:15:49.6988 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:49.8045 INFO Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u0].[UserId], [u0].[Address], [u0].[Email], [u0].[FullName], [u0].[Password], [u0].[Phone], [u0].[Role], [s].[BookingId], [s].[AdultQuantity], [s].[BookingDate], [s].[ChildQuantity], [s].[DepartureDate], [s].[PaymentMethod], [s].[SpecialRequest], [s].[TotalPrice], [s].[TourId], [s].[TourScheduleId], [s].[UserId], [s].[TourId0], [s].[AdultPrice], [s].[Capacity], [s].[CategoryId], [s].[ChildPrice], [s].[Description], [s].[Destination], [s].[Duration], [s].[Itinerary], [s].[Title], [s].[Transport]
FROM (
    SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
    FROM [Users] AS [u]
    WHERE [u].[UserId] = @__id_0
) AS [u0]
LEFT JOIN (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [t].[TourId] AS [TourId0], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Bookings] AS [b]
    INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
) AS [s] ON [u0].[UserId] = [s].[UserId]
ORDER BY [u0].[UserId], [s].[BookingId] 
2025-05-12 02:15:49.8045 INFO Admin xem chi tiết người dùng ID: 11 
2025-05-12 02:15:51.2831 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:51.2921 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 02:15:51.2921 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 02:15:52.2694 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:52.2813 INFO Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u0].[UserId], [u0].[Address], [u0].[Email], [u0].[FullName], [u0].[Password], [u0].[Phone], [u0].[Role], [s].[BookingId], [s].[AdultQuantity], [s].[BookingDate], [s].[ChildQuantity], [s].[DepartureDate], [s].[PaymentMethod], [s].[SpecialRequest], [s].[TotalPrice], [s].[TourId], [s].[TourScheduleId], [s].[UserId], [s].[TourId0], [s].[AdultPrice], [s].[Capacity], [s].[CategoryId], [s].[ChildPrice], [s].[Description], [s].[Destination], [s].[Duration], [s].[Itinerary], [s].[Title], [s].[Transport]
FROM (
    SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
    FROM [Users] AS [u]
    WHERE [u].[UserId] = @__id_0
) AS [u0]
LEFT JOIN (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [t].[TourId] AS [TourId0], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Bookings] AS [b]
    INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
) AS [s] ON [u0].[UserId] = [s].[UserId]
ORDER BY [u0].[UserId], [s].[BookingId] 
2025-05-12 02:15:52.2813 INFO Admin xem chi tiết người dùng ID: 2 
2025-05-12 02:15:54.1863 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:54.1863 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 02:15:54.2002 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 02:15:55.9573 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:15:55.9642 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:16:00.6400 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:16:00.6639 INFO Executed DbCommand (9ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0 
2025-05-12 02:16:00.6977 INFO Executed DbCommand (6ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([b].[TotalPrice]), 0.0)
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0 
2025-05-12 02:16:00.7417 INFO Executed DbCommand (7ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryName] AS [Region], COUNT(*) AS [Count]
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
INNER JOIN [Categories] AS [c] ON [t].[CategoryId] = [c].[CategoryId]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
GROUP BY [c].[CategoryName] 
2025-05-12 02:16:00.7537 INFO Executed DbCommand (7ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b].[PaymentMethod] AS [Method], COUNT(*) AS [Count]
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
GROUP BY [b].[PaymentMethod] 
2025-05-12 02:16:00.7648 INFO Executed DbCommand (5ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[Key] AS [Month], COALESCE(SUM([b0].[TotalPrice]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[TotalPrice], DATEPART(month, [b].[DepartureDate]) AS [Key]
    FROM [Bookings] AS [b]
    WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
) AS [b0]
GROUP BY [b0].[Key] 
2025-05-12 02:16:00.7648 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:16:10.1794 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:16:10.1850 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 02:16:10.1850 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 02:16:10.7150 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:16:10.7150 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:16:11.6976 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:16:11.6976 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 02:16:11.7129 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 02:16:13.6194 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:16:13.6194 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 02:16:13.6194 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY 
2025-05-12 02:16:15.1377 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:16:15.1377 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:16:15.1532 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 02:16:15.2146 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:16:15.2146 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:16:15.2291 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:16:17.1208 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:16:17.1208 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:16:17.1208 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:16:17.5079 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:16:17.5079 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:16:17.5079 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:16:18.3999 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:16:18.3999 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:16:18.3999 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:16:24.6714 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:16:24.7172 INFO Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:16:24.7326 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 02:16:31.4914 INFO Executed DbCommand (17ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 02:16:34.8667 INFO Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 02:16:34.9384 INFO Executed DbCommand (31ms) [Parameters=[@__user_UserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b].[TourScheduleId] = [t0].[TourScheduleId]
LEFT JOIN [Images] AS [i] ON [t].[TourId] = [i].[TourId]
WHERE [b].[UserId] = @__user_UserId_0
ORDER BY [b].[BookingDate] DESC, [b].[BookingId], [t].[TourId], [t0].[TourScheduleId] 
2025-05-12 02:16:40.1212 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:16:40.1559 INFO Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 02:16:40.1911 INFO Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:16:40.2050 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:16:40.3873 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:16:40.5066 INFO Executed DbCommand (27ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 02:16:58.4895 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:16:58.4995 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 02:16:58.4995 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:16:58.5101 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:16:58.8851 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:16:58.9009 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 02:16:59.9165 INFO Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:16:59.9165 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 02:17:02.6526 INFO Executed DbCommand (5ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 02:17:02.6526 INFO Người dùng mở trang đặt tour: "Tour Bến Tre – Cồn Phụng 1N" – Ngày đi: "20/10/2025" 
2025-05-12 02:17:02.6794 INFO Executed DbCommand (5ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 02:17:39.6737 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:17:39.6810 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 02:17:39.6810 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:17:39.6810 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:17:39.7645 INFO Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:17:39.7903 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 02:17:43.7056 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:17:43.7344 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 02:19:49.5523 INFO Executed DbCommand (8ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 02:19:53.6155 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:19:53.6248 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 02:19:53.6248 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:19:53.6368 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:19:53.8850 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:19:53.9057 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 02:19:55.0994 INFO Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:19:55.1096 INFO Executed DbCommand (6ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 02:19:58.1131 INFO Executed DbCommand (4ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 02:19:58.1131 INFO Người dùng mở trang đặt tour: "Tour Đà Lạt 3N2Đ - Thành phố ngàn hoa" – Ngày đi: "25/11/2025" 
2025-05-12 02:19:58.1131 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 02:21:56.3882 INFO Executed DbCommand (120ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 02:21:56.5040 INFO Executed DbCommand (13ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 02:21:56.9478 INFO Now listening on: http://localhost:5062 
2025-05-12 02:21:57.0124 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 02:21:57.0124 INFO Hosting environment: Development 
2025-05-12 02:21:57.0124 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 02:21:59.3248 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:22:06.9485 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:22:07.2241 INFO Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:22:07.3346 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 02:22:07.4612 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:22:07.4965 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:22:07.9281 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:22:07.9754 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:22:08.0533 INFO Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 02:22:09.2131 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:22:09.2591 INFO Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:22:09.2882 INFO Executed DbCommand (5ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 02:22:11.5409 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:22:11.6053 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:22:11.6321 INFO Executed DbCommand (5ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 02:22:11.6403 INFO Người dùng mở trang đặt tour: "Tour Ba Vì – Làng Văn hóa 1N" – Ngày đi: "13/11/2025" 
2025-05-12 02:22:11.6636 INFO Executed DbCommand (5ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 02:23:24.2218 INFO Executed DbCommand (177ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 02:23:24.3443 INFO Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 02:23:24.7953 INFO Now listening on: http://localhost:5062 
2025-05-12 02:23:24.8598 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 02:23:24.8598 INFO Hosting environment: Development 
2025-05-12 02:23:24.8598 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 02:23:25.8835 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:23:29.9995 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:23:30.1032 INFO Executed DbCommand (9ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 02:23:35.0312 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:23:35.1138 INFO Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 02:23:35.2585 INFO Executed DbCommand (16ms) [Parameters=[@__user_UserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b].[TourScheduleId] = [t0].[TourScheduleId]
LEFT JOIN [Images] AS [i] ON [t].[TourId] = [i].[TourId]
WHERE [b].[UserId] = @__user_UserId_0
ORDER BY [b].[BookingDate] DESC, [b].[BookingId], [t].[TourId], [t0].[TourScheduleId] 
2025-05-12 02:23:38.1001 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:23:38.3191 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:23:38.3748 INFO Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 02:23:38.5548 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:23:38.6088 INFO Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:23:39.3291 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:23:39.3653 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:23:39.4725 INFO Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 02:23:40.5819 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:23:40.6171 INFO Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:23:40.6440 INFO Executed DbCommand (5ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 02:23:42.9751 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:23:43.0110 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:23:43.0379 INFO Executed DbCommand (5ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 02:23:43.0481 INFO Người dùng mở trang đặt tour: "Tour Ba Vì – Làng Văn hóa 1N" – Ngày đi: "17/10/2025" 
2025-05-12 02:23:43.0758 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 02:33:29.7338 INFO Executed DbCommand (150ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 02:33:29.8291 INFO Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 02:33:30.2235 INFO Now listening on: http://localhost:5062 
2025-05-12 02:33:30.2880 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 02:33:30.2880 INFO Hosting environment: Development 
2025-05-12 02:33:30.2880 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 02:33:34.5870 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:34.8937 INFO Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:33:35.0371 INFO Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 02:33:36.3589 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:36.3765 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:33:36.3851 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 02:33:36.4945 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:36.5547 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:33:36.5964 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:33:36.7996 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:36.8104 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:33:36.8293 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 02:33:36.8968 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:36.9073 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 02:33:36.9191 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 02:33:38.6142 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:41.1467 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:41.1821 INFO Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:33:41.2277 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:33:41.2551 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:33:41.3693 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:41.4041 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:33:41.4621 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:33:41.4621 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:33:41.5323 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:43.3919 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:43.4241 INFO Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:33:43.4376 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:33:46.1014 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:46.1094 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:33:46.1094 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:33:46.1196 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:33:46.1901 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:46.2007 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:33:46.2007 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:33:46.2129 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:33:46.2284 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:47.9869 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:47.9997 INFO Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:33:47.9997 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:33:49.9948 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:49.9948 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:33:49.9948 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:33:50.0141 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:33:50.0834 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:50.0909 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:33:50.1051 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:33:50.1051 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:33:50.1288 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:51.2013 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:51.2150 INFO Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:33:51.2150 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:33:52.9781 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:52.9922 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:33:52.9922 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:33:52.9922 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:33:53.0599 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:53.0599 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:33:53.0742 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:33:53.0742 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:33:53.0940 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:54.0735 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:33:54.0735 INFO Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:33:54.0902 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:34:21.6724 INFO Executed DbCommand (135ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 02:34:21.7776 INFO Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 02:34:22.1582 INFO Now listening on: http://localhost:5062 
2025-05-12 02:34:22.2171 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 02:34:22.2171 INFO Hosting environment: Development 
2025-05-12 02:34:22.2171 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 02:34:26.2009 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:34:26.9173 INFO Executed DbCommand (26ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:34:27.0293 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:34:49.0908 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:34:49.1986 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:34:49.1986 WARN Dữ liệu tour không hợp lệ khi cập nhật. 
2025-05-12 02:35:01.3021 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:01.3153 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:35:01.3378 INFO Executed DbCommand (4ms) [Parameters=[@__model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__model_TourId_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:35:01.4938 INFO Executed DbCommand (30ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [TourSchedules] ([DepartureDate], [IsDeleted], [RemainingSlot], [ReturnDate], [TourId])
OUTPUT INSERTED.[TourScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4); 
2025-05-12 02:35:01.5100 INFO Cập nhật tour ID 6: Tour Phú Quốc 4N3Đ - Thiên đường nghỉ dưỡng 
2025-05-12 02:35:01.5100 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:01.5448 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:35:01.5832 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:35:01.6153 INFO Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:35:01.6931 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:01.7442 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:35:01.7965 INFO Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:35:01.8179 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:35:01.8595 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:04.3147 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:04.3234 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:35:04.3234 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:35:06.4731 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:06.4802 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:35:06.4802 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:35:06.4802 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:35:06.5386 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:06.5386 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:35:06.5578 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:35:06.5578 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:35:06.5814 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:07.5547 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:07.5547 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:35:07.5547 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:35:10.6631 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:10.6691 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:35:10.6691 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:35:10.6815 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:35:10.7324 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:10.7424 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:35:10.7424 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:35:10.7692 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:35:10.7809 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:15.3316 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:15.3395 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:35:15.3395 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:35:20.3187 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:20.3260 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:35:20.3260 WARN Dữ liệu tour không hợp lệ khi cập nhật. 
2025-05-12 02:35:34.2137 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:34.2137 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:35:34.2137 INFO Executed DbCommand (4ms) [Parameters=[@__model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__model_TourId_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:35:34.2296 INFO Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [TourSchedules] ([DepartureDate], [IsDeleted], [RemainingSlot], [ReturnDate], [TourId])
OUTPUT INSERTED.[TourScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4); 
2025-05-12 02:35:34.2296 INFO Cập nhật tour ID 16: Du lịch Nhật Bổn 
2025-05-12 02:35:34.2296 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:34.2467 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:35:34.2467 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:35:34.2467 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:35:34.2960 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:34.2960 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:35:34.3110 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:35:34.3110 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:35:34.3505 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:35.4514 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:35.4514 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:35:35.4625 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:35:38.8780 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:38.8845 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:35:38.8845 INFO Executed DbCommand (4ms) [Parameters=[@__model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__model_TourId_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:35:38.8996 INFO Executed DbCommand (3ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:35:38.8996 INFO Executed DbCommand (0ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:35:38.8996 INFO Executed DbCommand (0ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:35:38.8996 INFO Executed DbCommand (0ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:35:38.8996 INFO Cập nhật tour ID 16: Du lịch Nhật Bổn 
2025-05-12 02:35:38.8996 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:38.8996 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:35:38.9152 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:35:38.9152 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:35:38.9661 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:38.9661 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:35:38.9829 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:35:38.9829 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:35:39.0031 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:40.6468 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:40.6533 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:35:40.6533 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:35:43.3788 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:43.3848 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:35:43.3848 INFO Executed DbCommand (6ms) [Parameters=[@__model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__model_TourId_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:35:43.3848 INFO Executed DbCommand (2ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:35:43.3848 INFO Executed DbCommand (3ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:35:43.3848 INFO Executed DbCommand (1ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:35:43.3999 INFO Executed DbCommand (0ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__scheduleId_0 
2025-05-12 02:35:43.4372 INFO Executed DbCommand (14ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p3='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p4='?' (DbType = Boolean)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [TourSchedules] SET [IsDeleted] = @p0
OUTPUT 1
WHERE [TourScheduleId] = @p1;
UPDATE [TourSchedules] SET [IsDeleted] = @p2
OUTPUT 1
WHERE [TourScheduleId] = @p3;
UPDATE [TourSchedules] SET [IsDeleted] = @p4
OUTPUT 1
WHERE [TourScheduleId] = @p5; 
2025-05-12 02:35:43.4455 INFO Cập nhật tour ID 16: Du lịch Nhật Bổn 
2025-05-12 02:35:43.4455 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:43.4455 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:35:43.4455 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:35:43.4616 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:35:43.4994 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:43.4994 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:35:43.5131 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:35:43.5131 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:35:43.5363 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:44.6050 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:44.6050 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:35:44.6174 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:35:45.9629 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:45.9629 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:35:45.9629 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:35:45.9629 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:35:46.0200 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:46.0258 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:35:46.0258 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:35:46.0258 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:35:46.0503 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:48.3051 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:48.6582 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:35:48.6879 INFO Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 02:35:48.6977 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:35:48.6977 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:35:50.3984 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:50.4450 INFO Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:35:50.4606 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 02:35:50.5252 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:57.2369 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:35:57.2466 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 02:35:57.2466 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:36:02.2977 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:36:02.2977 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 02:36:02.2977 WARN Dữ liệu tour không hợp lệ khi cập nhật. 
2025-05-12 02:36:08.4564 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:36:08.4642 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:36:08.4642 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 02:36:08.4642 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 02:36:08.5273 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:36:08.5273 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:36:08.5422 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:36:08.5422 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 02:36:08.5596 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:36:10.5827 WARN Error unprotecting the session cookie. System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-05-12 02:36:10.5875 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 02:36:10.6014 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 02:36:10.6014 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 12:41:38.9221 INFO Executed DbCommand (391ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [TourBookingDB]; 
2025-05-12 12:41:39.0628 INFO Executed DbCommand (114ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [TourBookingDB] SET READ_COMMITTED_SNAPSHOT ON;
END; 
2025-05-12 12:41:39.0836 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-12 12:41:39.0836 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-12 12:41:39.1123 INFO Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-12 12:41:39.1801 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-12 12:41:39.1801 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-12 12:41:39.1801 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-12 12:41:39.2116 INFO Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-12 12:41:39.2116 INFO Applying migration '20250506041246_InitDb1'. 
2025-05-12 12:41:39.2569 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Categories] (
    [CategoryId] int NOT NULL IDENTITY,
    [CategoryName] nvarchar(200) NOT NULL,
    CONSTRAINT [PK_Categories] PRIMARY KEY ([CategoryId])
); 
2025-05-12 12:41:39.2588 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [UserId] int NOT NULL IDENTITY,
    [Email] nvarchar(200) NOT NULL,
    [FullName] nvarchar(200) NOT NULL,
    [Phone] nvarchar(200) NOT NULL,
    [Address] nvarchar(200) NOT NULL,
    [Password] nvarchar(200) NOT NULL,
    [Role] nvarchar(200) NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([UserId])
); 
2025-05-12 12:41:39.2588 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Tours] (
    [TourId] int NOT NULL IDENTITY,
    [Title] nvarchar(200) NOT NULL,
    [Capacity] int NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [AdultPrice] decimal(18,2) NOT NULL,
    [ChildPrice] decimal(18,2) NOT NULL,
    [Transport] nvarchar(200) NOT NULL,
    [Departures] nvarchar(max) NOT NULL,
    [Destination] nvarchar(200) NOT NULL,
    [Duration] nvarchar(200) NOT NULL,
    [Itinerary] nvarchar(2000) NOT NULL,
    [CategoryId] int NOT NULL,
    CONSTRAINT [PK_Tours] PRIMARY KEY ([TourId]),
    CONSTRAINT [FK_Tours_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([CategoryId]) ON DELETE NO ACTION
); 
2025-05-12 12:41:39.2588 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Images] (
    [ImageId] int NOT NULL IDENTITY,
    [Url] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NOT NULL,
    [TourId] int NOT NULL,
    [DayNumber] int NULL,
    CONSTRAINT [PK_Images] PRIMARY KEY ([ImageId]),
    CONSTRAINT [FK_Images_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE
); 
2025-05-12 12:41:39.2588 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TourSchedules] (
    [Id] int NOT NULL IDENTITY,
    [TourId] int NOT NULL,
    [DepartureDate] datetime2 NOT NULL,
    [ReturnDate] datetime2 NOT NULL,
    [RemainingSlot] int NOT NULL,
    CONSTRAINT [PK_TourSchedules] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TourSchedules_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE
); 
2025-05-12 12:41:39.2588 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Bookings] (
    [BookingId] int NOT NULL IDENTITY,
    [BookingDate] datetime2 NOT NULL,
    [AdultQuantity] int NOT NULL,
    [ChildQuantity] int NOT NULL,
    [TotalPrice] decimal(18,2) NOT NULL,
    [SpecialRequest] nvarchar(200) NULL,
    [TourId] int NOT NULL,
    [UserId] int NOT NULL,
    [DepartureDate] datetime2 NOT NULL,
    [TourScheduleId] int NULL,
    [PaymentMethod] nvarchar(max) NULL,
    [CategoryId] int NULL,
    CONSTRAINT [PK_Bookings] PRIMARY KEY ([BookingId]),
    CONSTRAINT [FK_Bookings_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([CategoryId]),
    CONSTRAINT [FK_Bookings_TourSchedules_TourScheduleId] FOREIGN KEY ([TourScheduleId]) REFERENCES [TourSchedules] ([Id]),
    CONSTRAINT [FK_Bookings_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE,
    CONSTRAINT [FK_Bookings_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([UserId]) ON DELETE CASCADE
); 
2025-05-12 12:41:39.2745 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_CategoryId] ON [Bookings] ([CategoryId]); 
2025-05-12 12:41:39.2745 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_TourId] ON [Bookings] ([TourId]); 
2025-05-12 12:41:39.2745 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_TourScheduleId] ON [Bookings] ([TourScheduleId]); 
2025-05-12 12:41:39.2745 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_UserId] ON [Bookings] ([UserId]); 
2025-05-12 12:41:39.2745 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Images_TourId] ON [Images] ([TourId]); 
2025-05-12 12:41:39.2745 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Tours_CategoryId] ON [Tours] ([CategoryId]); 
2025-05-12 12:41:39.2745 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_TourSchedules_TourId] ON [TourSchedules] ([TourId]); 
2025-05-12 12:41:39.2745 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250506041246_InitDb1', N'9.0.4'); 
2025-05-12 12:41:39.2899 INFO Applying migration '20250506173007_AddTourSchedule'. 
2025-05-12 12:41:39.2899 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250506173007_AddTourSchedule', N'9.0.4'); 
2025-05-12 12:41:39.2899 INFO Applying migration '20250507134435_DeleteForgeinKey'. 
2025-05-12 12:41:39.3156 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] DROP CONSTRAINT [FK_Bookings_Categories_CategoryId]; 
2025-05-12 12:41:39.3156 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] DROP CONSTRAINT [FK_Bookings_TourSchedules_TourScheduleId]; 
2025-05-12 12:41:39.3156 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Bookings_CategoryId] ON [Bookings]; 
2025-05-12 12:41:39.3996 INFO Executed DbCommand (81ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Tours]') AND [c].[name] = N'Departures');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [Tours] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [Tours] DROP COLUMN [Departures]; 
2025-05-12 12:41:39.4304 INFO Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Bookings]') AND [c].[name] = N'CategoryId');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Bookings] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Bookings] DROP COLUMN [CategoryId]; 
2025-05-12 12:41:39.4304 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD CONSTRAINT [FK_Bookings_TourSchedules_TourScheduleId] FOREIGN KEY ([TourScheduleId]) REFERENCES [TourSchedules] ([Id]) ON DELETE NO ACTION; 
2025-05-12 12:41:39.4370 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250507134435_DeleteForgeinKey', N'9.0.4'); 
2025-05-12 12:41:39.4370 INFO Applying migration '20250507161659_DeleteCagtegoryNavigation'. 
2025-05-12 12:41:39.4540 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Tours] DROP CONSTRAINT [FK_Tours_Categories_CategoryId]; 
2025-05-12 12:41:39.4540 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Tours] ADD CONSTRAINT [FK_Tours_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([CategoryId]) ON DELETE CASCADE; 
2025-05-12 12:41:39.4540 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250507161659_DeleteCagtegoryNavigation', N'9.0.4'); 
2025-05-12 12:41:39.4672 INFO Applying migration '20250508102523_AddIdentityTables'. 
2025-05-12 12:41:39.5023 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
); 
2025-05-12 12:41:39.5023 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] nvarchar(450) NOT NULL,
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [LockoutEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
); 
2025-05-12 12:41:39.5023 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
); 
2025-05-12 12:41:39.5023 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
); 
2025-05-12 12:41:39.5115 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
); 
2025-05-12 12:41:39.5115 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] nvarchar(450) NOT NULL,
    [RoleId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
); 
2025-05-12 12:41:39.5115 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] nvarchar(450) NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
); 
2025-05-12 12:41:39.5115 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]); 
2025-05-12 12:41:39.5115 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL; 
2025-05-12 12:41:39.5115 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]); 
2025-05-12 12:41:39.5115 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]); 
2025-05-12 12:41:39.5115 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]); 
2025-05-12 12:41:39.5115 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]); 
2025-05-12 12:41:39.5115 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL; 
2025-05-12 12:41:39.5115 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250508102523_AddIdentityTables', N'9.0.4'); 
2025-05-12 12:41:39.5115 INFO Applying migration '20250508171127_Final'. 
2025-05-12 12:41:39.5345 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250508171127_Final', N'9.0.4'); 
2025-05-12 12:41:39.5345 INFO Applying migration '20250510054812_InitDb'. 
2025-05-12 12:41:39.5444 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250510054812_InitDb', N'9.0.4'); 
2025-05-12 12:41:39.5444 INFO Applying migration '20250510070108_InitDb4'. 
2025-05-12 12:41:40.0079 INFO Executed DbCommand (447ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[TourSchedules].[Id]', N'TourScheduleId', 'COLUMN'; 
2025-05-12 12:41:40.0126 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250510070108_InitDb4', N'9.0.4'); 
2025-05-12 12:41:40.0126 INFO Applying migration '20250511075937_addIsDelete'. 
2025-05-12 12:41:40.0399 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TourSchedules] ADD [IsDeleted] bit NOT NULL DEFAULT CAST(0 AS bit); 
2025-05-12 12:41:40.0439 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250511075937_addIsDelete', N'9.0.4'); 
2025-05-12 12:41:40.0439 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result 
2025-05-12 12:42:06.9737 INFO Executed DbCommand (255ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 12:42:07.0358 INFO Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 12:42:07.1675 INFO Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([Id], [ConcurrencyStamp], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2, @p3); 
2025-05-12 12:42:07.1951 INFO Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 12:42:08.0073 INFO Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0 
2025-05-12 12:42:08.0751 INFO Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (Size = 256), @p8='?' (Size = 256), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14); 
2025-05-12 12:42:08.1113 INFO Executed DbCommand (23ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0 
2025-05-12 12:42:08.1574 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1 
2025-05-12 12:42:08.1574 INFO Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0 
2025-05-12 12:42:08.1798 INFO Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0 
2025-05-12 12:42:08.2257 INFO Executed DbCommand (19ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p16='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p17='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [LockoutEnabled] = @p6, [LockoutEnd] = @p7, [NormalizedEmail] = @p8, [NormalizedUserName] = @p9, [PasswordHash] = @p10, [PhoneNumber] = @p11, [PhoneNumberConfirmed] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15
OUTPUT 1
WHERE [Id] = @p16 AND [ConcurrencyStamp] = @p17; 
2025-05-12 12:42:08.6678 INFO Now listening on: http://localhost:5062 
2025-05-12 12:42:08.7406 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 12:42:08.7406 INFO Hosting environment: Development 
2025-05-12 12:42:08.7406 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 12:42:16.4619 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 12:42:16.5900 INFO Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 12:42:16.7290 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 12:42:16.7850 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 12:42:17.2498 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 12:42:17.3602 INFO Executed DbCommand (31ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 12:42:26.1183 INFO Executed DbCommand (6ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 
2025-05-12 12:42:26.1488 INFO Executed DbCommand (13ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 12:42:26.1488 INFO Executed DbCommand (2ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 
2025-05-12 12:42:26.1740 INFO Executed DbCommand (7ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 12:42:30.9280 INFO Executed DbCommand (5ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 
2025-05-12 12:42:30.9425 INFO Executed DbCommand (12ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 12:42:30.9537 INFO Executed DbCommand (4ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 
2025-05-12 12:42:30.9638 INFO Executed DbCommand (5ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 12:42:33.9243 INFO Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 12:42:33.9572 INFO Executed DbCommand (4ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 12:42:58.2100 INFO Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 12:42:58.2164 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 12:43:06.4508 INFO Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 12:43:06.4508 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 12:43:38.6639 INFO Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 12:43:38.6704 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 12:43:43.8852 INFO Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 12:43:43.8852 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 12:44:05.6940 INFO Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 12:44:05.6997 INFO Executed DbCommand (4ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 12:49:29.6201 INFO Executed DbCommand (117ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 12:49:29.7578 INFO Executed DbCommand (17ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 12:49:30.2268 INFO Now listening on: http://localhost:5062 
2025-05-12 12:49:30.3523 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 12:49:30.3523 INFO Hosting environment: Development 
2025-05-12 12:49:30.3523 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 12:49:38.7140 INFO Executed DbCommand (43ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 12:49:38.8237 INFO Executed DbCommand (4ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 12:49:48.9041 INFO Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 12:49:48.9041 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 12:55:57.7528 INFO Executed DbCommand (109ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 12:55:57.8634 INFO Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 12:55:58.3056 INFO Now listening on: http://localhost:5062 
2025-05-12 12:55:58.3727 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 12:55:58.3727 INFO Hosting environment: Development 
2025-05-12 12:55:58.3727 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 12:56:18.7843 INFO Executed DbCommand (44ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 12:56:18.9122 INFO Executed DbCommand (5ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 12:59:22.4668 INFO Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 12:59:22.5679 INFO Executed DbCommand (51ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 12:59:22.6828 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 12:59:22.7548 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 12:59:23.3538 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 12:59:23.4905 INFO Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 12:59:29.5018 INFO Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 12:59:29.5640 INFO Executed DbCommand (13ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 12:59:37.2966 INFO Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 12:59:37.2966 INFO Executed DbCommand (4ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 12:59:43.5519 INFO Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 12:59:43.5582 INFO Executed DbCommand (4ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 12:59:45.9797 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 12:59:45.9797 INFO Executed DbCommand (4ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 12:59:49.5228 INFO Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 12:59:49.5330 INFO Executed DbCommand (6ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 12:59:51.6162 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 12:59:51.6203 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 12:59:54.3241 INFO Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 12:59:54.3241 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 12:59:56.1180 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 12:59:56.1217 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 13:00:06.0298 INFO Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 13:00:06.0298 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 13:00:11.0204 INFO Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 13:00:11.0204 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 13:00:51.7490 INFO Executed DbCommand (134ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 13:00:51.8645 INFO Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 13:00:52.3119 INFO Now listening on: http://localhost:5062 
2025-05-12 13:00:52.3925 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 13:00:52.3925 INFO Hosting environment: Development 
2025-05-12 13:00:52.3925 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 13:01:34.9008 INFO Executed DbCommand (16ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 13:01:35.2259 INFO Executed DbCommand (19ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 13:01:35.2848 INFO Executed DbCommand (25ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 13:01:35.2931 INFO Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 13:01:35.3070 INFO Executed DbCommand (4ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 13:01:35.3266 INFO Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 13:01:35.3266 INFO Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 13:01:35.3401 INFO Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 13:01:35.3401 INFO Executed DbCommand (4ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 13:01:35.3575 INFO Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 13:01:35.5944 INFO Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 13:01:35.5944 WARN admin 
2025-05-12 13:01:42.2319 INFO Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:01:42.2588 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:01:44.2973 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:01:44.2973 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY 
2025-05-12 13:01:50.6976 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:01:50.6976 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:01:54.1691 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:01:54.1691 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY 
2025-05-12 13:01:56.9447 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:01:56.9488 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:02:02.4209 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:02:02.4317 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY 
2025-05-12 13:03:00.4069 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:03:00.4069 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:03:01.8582 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:03:04.5932 INFO Executed DbCommand (15ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0 
2025-05-12 13:03:04.6200 INFO Executed DbCommand (4ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([b].[TotalPrice]), 0.0)
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0 
2025-05-12 13:03:04.7058 INFO Executed DbCommand (27ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryName] AS [Region], COUNT(*) AS [Count]
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
INNER JOIN [Categories] AS [c] ON [t].[CategoryId] = [c].[CategoryId]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
GROUP BY [c].[CategoryName] 
2025-05-12 13:03:04.7311 INFO Executed DbCommand (16ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b].[PaymentMethod] AS [Method], COUNT(*) AS [Count]
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
GROUP BY [b].[PaymentMethod] 
2025-05-12 13:03:04.7591 INFO Executed DbCommand (6ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[Key] AS [Month], COALESCE(SUM([b0].[TotalPrice]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[TotalPrice], DATEPART(month, [b].[DepartureDate]) AS [Key]
    FROM [Bookings] AS [b]
    WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
) AS [b0]
GROUP BY [b0].[Key] 
2025-05-12 13:03:04.7591 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:03:14.2045 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:03:14.2045 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:03:15.2027 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:03:15.2922 INFO Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 13:03:15.5286 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:03:15.5721 INFO Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:03:17.5714 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:03:17.5970 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:03:19.8009 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:03:19.8082 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:03:21.1399 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:03:21.1399 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:03:22.2202 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:03:22.2202 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:03:24.3761 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:03:24.4035 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] 
2025-05-12 13:20:04.2688 INFO Executed DbCommand (1,116ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 13:20:04.4084 INFO Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 13:20:04.9335 INFO Now listening on: http://localhost:5062 
2025-05-12 13:20:05.0012 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 13:20:05.0012 INFO Hosting environment: Development 
2025-05-12 13:20:05.0012 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 13:20:16.6899 INFO Executed DbCommand (36ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 13:20:19.5372 INFO Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 13:20:19.6947 INFO Executed DbCommand (38ms) [Parameters=[@__user_UserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b].[TourScheduleId] = [t0].[TourScheduleId]
LEFT JOIN [Images] AS [i] ON [t].[TourId] = [i].[TourId]
WHERE [b].[UserId] = @__user_UserId_0
ORDER BY [b].[BookingDate] DESC, [b].[BookingId], [t].[TourId], [t0].[TourScheduleId] 
2025-05-12 13:20:33.8562 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:20:33.9308 INFO Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 13:20:34.2196 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:20:34.2576 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:20:35.1611 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:20:36.4881 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:20:37.5943 INFO Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:20:37.6099 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:20:38.4272 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:20:39.0083 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:20:39.2307 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:20:39.4042 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:20:39.5516 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:20:39.7096 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:20:41.5743 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:20:41.5743 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:20:41.6000 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:20:41.6022 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:20:42.2445 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:20:42.2528 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 13:20:42.3018 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:20:42.3180 INFO Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:20:44.3589 INFO Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c] 
2025-05-12 13:20:44.3745 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
ORDER BY [c].[CategoryId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:20:45.2535 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:21:22.3182 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:21:49.0956 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:21:49.1365 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 13:21:49.1905 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 13:21:49.2343 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 13:21:50.3030 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:21:50.4774 INFO Executed DbCommand (68ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 13:22:00.3296 INFO Executed DbCommand (30ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 13:22:00.9963 INFO Executed DbCommand (9ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 13:22:01.0272 INFO Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 13:22:01.0272 INFO Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 13:22:01.0478 INFO Executed DbCommand (5ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 13:22:01.0701 INFO Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 13:22:01.0773 INFO Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 13:22:01.0773 INFO Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 13:22:01.0773 INFO Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 13:22:01.0996 INFO Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 13:22:01.1373 INFO Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 13:22:01.1373 WARN admin 
2025-05-12 13:22:02.5205 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:22:03.6990 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:22:04.5176 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:22:04.5176 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:22:06.1302 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:22:06.1492 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 13:22:06.2546 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:22:06.2716 INFO Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:22:07.1950 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:22:11.7093 INFO Executed DbCommand (16ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0 
2025-05-12 13:22:11.7443 INFO Executed DbCommand (7ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([b].[TotalPrice]), 0.0)
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0 
2025-05-12 13:22:11.8077 INFO Executed DbCommand (14ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryName] AS [Region], COUNT(*) AS [Count]
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
INNER JOIN [Categories] AS [c] ON [t].[CategoryId] = [c].[CategoryId]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
GROUP BY [c].[CategoryName] 
2025-05-12 13:22:11.8278 INFO Executed DbCommand (11ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b].[PaymentMethod] AS [Method], COUNT(*) AS [Count]
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
GROUP BY [b].[PaymentMethod] 
2025-05-12 13:22:11.8466 INFO Executed DbCommand (7ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[Key] AS [Month], COALESCE(SUM([b0].[TotalPrice]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[TotalPrice], DATEPART(month, [b].[DepartureDate]) AS [Key]
    FROM [Bookings] AS [b]
    WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
) AS [b0]
GROUP BY [b0].[Key] 
2025-05-12 13:22:11.8555 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:22:14.9598 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:22:17.1437 INFO Executed DbCommand (6ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0 
2025-05-12 13:22:17.1437 INFO Executed DbCommand (2ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([b].[TotalPrice]), 0.0)
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0 
2025-05-12 13:22:17.1580 INFO Executed DbCommand (9ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryName] AS [Region], COUNT(*) AS [Count]
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
INNER JOIN [Categories] AS [c] ON [t].[CategoryId] = [c].[CategoryId]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
GROUP BY [c].[CategoryName] 
2025-05-12 13:22:17.1580 INFO Executed DbCommand (6ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b].[PaymentMethod] AS [Method], COUNT(*) AS [Count]
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
GROUP BY [b].[PaymentMethod] 
2025-05-12 13:22:17.1692 INFO Executed DbCommand (4ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[Key] AS [Month], COALESCE(SUM([b0].[TotalPrice]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[TotalPrice], DATEPART(month, [b].[DepartureDate]) AS [Key]
    FROM [Bookings] AS [b]
    WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
) AS [b0]
GROUP BY [b0].[Key] 
2025-05-12 13:22:17.1692 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:22:22.4355 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:22:22.4483 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 13:22:22.5498 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:22:22.5677 INFO Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:22:23.6078 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:22:23.6078 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:22:23.6415 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:22:23.6415 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:22:24.6630 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:23:19.8063 INFO Executed DbCommand (117ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 13:23:19.9426 INFO Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 13:23:20.4173 INFO Now listening on: http://localhost:5062 
2025-05-12 13:23:20.4996 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 13:23:20.4996 INFO Hosting environment: Development 
2025-05-12 13:23:20.4996 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 13:23:32.4711 INFO Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:23:33.8124 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:23:34.4765 INFO Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:23:34.5137 INFO Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:23:36.0170 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:23:36.1621 INFO Executed DbCommand (30ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 13:23:36.4267 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:23:36.4588 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:23:40.5504 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:23:40.5821 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:23:40.9086 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:23:40.9233 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:23:41.1904 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:23:41.2003 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:23:42.5854 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:23:42.5948 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:24:18.9494 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:24:19.0679 INFO Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 13:24:19.1243 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 13:24:19.1622 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 13:24:19.7829 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:24:20.0010 INFO Executed DbCommand (47ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 13:24:39.5477 INFO Executed DbCommand (42ms) [Parameters=[@__departureDate_Value_Date_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE EXISTS (
    SELECT 1
    FROM [TourSchedules] AS [t0]
    WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_0) 
2025-05-12 13:24:39.6012 INFO Executed DbCommand (33ms) [Parameters=[@__departureDate_Value_Date_0='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t2].[TourId], [t2].[Title], [t2].[Destination], [t2].[Duration], [t2].[Capacity], [t2].[AdultPrice], [t4].[DepartureDate], [t4].[TourScheduleId], [t2].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE EXISTS (
        SELECT 1
        FROM [TourSchedules] AS [t0]
        WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_0)
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t2]
LEFT JOIN (
    SELECT [t3].[DepartureDate], [t3].[TourScheduleId], [t3].[TourId]
    FROM (
        SELECT [t1].[DepartureDate], [t1].[TourScheduleId], [t1].[TourId], ROW_NUMBER() OVER(PARTITION BY [t1].[TourId] ORDER BY [t1].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t1]
        WHERE [t1].[IsDeleted] = CAST(0 AS bit)
    ) AS [t3]
    WHERE [t3].[row] <= 3
) AS [t4] ON [t2].[TourId] = [t4].[TourId]
ORDER BY [t2].[Title], [t2].[TourId], [t4].[TourId], [t4].[DepartureDate] 
2025-05-12 13:24:39.6409 INFO Executed DbCommand (31ms) [Parameters=[@__departureDate_Value_Date_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE EXISTS (
    SELECT 1
    FROM [TourSchedules] AS [t0]
    WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_0) 
2025-05-12 13:24:39.7118 INFO Executed DbCommand (60ms) [Parameters=[@__departureDate_Value_Date_0='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t2].[TourId], [t2].[Title], [t2].[Destination], [t2].[Duration], [t2].[Capacity], [t2].[AdultPrice], [t4].[DepartureDate], [t4].[TourScheduleId], [t2].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE EXISTS (
        SELECT 1
        FROM [TourSchedules] AS [t0]
        WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_0)
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t2]
LEFT JOIN (
    SELECT [t3].[DepartureDate], [t3].[TourScheduleId], [t3].[TourId]
    FROM (
        SELECT [t1].[DepartureDate], [t1].[TourScheduleId], [t1].[TourId], ROW_NUMBER() OVER(PARTITION BY [t1].[TourId] ORDER BY [t1].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t1]
        WHERE [t1].[IsDeleted] = CAST(0 AS bit)
    ) AS [t3]
    WHERE [t3].[row] <= 3
) AS [t4] ON [t2].[TourId] = [t4].[TourId]
ORDER BY [t2].[Title], [t2].[TourId], [t4].[TourId], [t4].[DepartureDate] 
2025-05-12 13:24:42.3689 INFO Executed DbCommand (39ms) [Parameters=[@__departureDate_Value_Date_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE EXISTS (
    SELECT 1
    FROM [TourSchedules] AS [t0]
    WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_0) 
2025-05-12 13:24:42.3967 INFO Executed DbCommand (22ms) [Parameters=[@__departureDate_Value_Date_0='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t2].[TourId], [t2].[Title], [t2].[Destination], [t2].[Duration], [t2].[Capacity], [t2].[AdultPrice], [t4].[DepartureDate], [t4].[TourScheduleId], [t2].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE EXISTS (
        SELECT 1
        FROM [TourSchedules] AS [t0]
        WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_0)
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t2]
LEFT JOIN (
    SELECT [t3].[DepartureDate], [t3].[TourScheduleId], [t3].[TourId]
    FROM (
        SELECT [t1].[DepartureDate], [t1].[TourScheduleId], [t1].[TourId], ROW_NUMBER() OVER(PARTITION BY [t1].[TourId] ORDER BY [t1].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t1]
        WHERE [t1].[IsDeleted] = CAST(0 AS bit)
    ) AS [t3]
    WHERE [t3].[row] <= 3
) AS [t4] ON [t2].[TourId] = [t4].[TourId]
ORDER BY [t2].[Title], [t2].[TourId], [t4].[TourId], [t4].[DepartureDate] 
2025-05-12 13:24:42.8812 INFO Executed DbCommand (10ms) [Parameters=[@__departureDate_Value_Date_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE EXISTS (
    SELECT 1
    FROM [TourSchedules] AS [t0]
    WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_0) 
2025-05-12 13:24:42.8996 INFO Executed DbCommand (17ms) [Parameters=[@__departureDate_Value_Date_0='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t2].[TourId], [t2].[Title], [t2].[Destination], [t2].[Duration], [t2].[Capacity], [t2].[AdultPrice], [t4].[DepartureDate], [t4].[TourScheduleId], [t2].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE EXISTS (
        SELECT 1
        FROM [TourSchedules] AS [t0]
        WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_0)
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t2]
LEFT JOIN (
    SELECT [t3].[DepartureDate], [t3].[TourScheduleId], [t3].[TourId]
    FROM (
        SELECT [t1].[DepartureDate], [t1].[TourScheduleId], [t1].[TourId], ROW_NUMBER() OVER(PARTITION BY [t1].[TourId] ORDER BY [t1].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t1]
        WHERE [t1].[IsDeleted] = CAST(0 AS bit)
    ) AS [t3]
    WHERE [t3].[row] <= 3
) AS [t4] ON [t2].[TourId] = [t4].[TourId]
ORDER BY [t2].[Title], [t2].[TourId], [t4].[TourId], [t4].[DepartureDate] 
2025-05-12 13:24:43.3305 INFO Executed DbCommand (11ms) [Parameters=[@__departureDate_Value_Date_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE EXISTS (
    SELECT 1
    FROM [TourSchedules] AS [t0]
    WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_0) 
2025-05-12 13:24:43.3509 INFO Executed DbCommand (18ms) [Parameters=[@__departureDate_Value_Date_0='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t2].[TourId], [t2].[Title], [t2].[Destination], [t2].[Duration], [t2].[Capacity], [t2].[AdultPrice], [t4].[DepartureDate], [t4].[TourScheduleId], [t2].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE EXISTS (
        SELECT 1
        FROM [TourSchedules] AS [t0]
        WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_0)
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t2]
LEFT JOIN (
    SELECT [t3].[DepartureDate], [t3].[TourScheduleId], [t3].[TourId]
    FROM (
        SELECT [t1].[DepartureDate], [t1].[TourScheduleId], [t1].[TourId], ROW_NUMBER() OVER(PARTITION BY [t1].[TourId] ORDER BY [t1].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t1]
        WHERE [t1].[IsDeleted] = CAST(0 AS bit)
    ) AS [t3]
    WHERE [t3].[row] <= 3
) AS [t4] ON [t2].[TourId] = [t4].[TourId]
ORDER BY [t2].[Title], [t2].[TourId], [t4].[TourId], [t4].[DepartureDate] 
2025-05-12 13:24:46.0334 INFO Executed DbCommand (20ms) [Parameters=[@__departureDate_Value_Date_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE EXISTS (
    SELECT 1
    FROM [TourSchedules] AS [t0]
    WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_0) 
2025-05-12 13:24:46.0697 INFO Executed DbCommand (30ms) [Parameters=[@__departureDate_Value_Date_0='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t2].[TourId], [t2].[Title], [t2].[Destination], [t2].[Duration], [t2].[Capacity], [t2].[AdultPrice], [t4].[DepartureDate], [t4].[TourScheduleId], [t2].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE EXISTS (
        SELECT 1
        FROM [TourSchedules] AS [t0]
        WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_0)
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t2]
LEFT JOIN (
    SELECT [t3].[DepartureDate], [t3].[TourScheduleId], [t3].[TourId]
    FROM (
        SELECT [t1].[DepartureDate], [t1].[TourScheduleId], [t1].[TourId], ROW_NUMBER() OVER(PARTITION BY [t1].[TourId] ORDER BY [t1].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t1]
        WHERE [t1].[IsDeleted] = CAST(0 AS bit)
    ) AS [t3]
    WHERE [t3].[row] <= 3
) AS [t4] ON [t2].[TourId] = [t4].[TourId]
ORDER BY [t2].[Title], [t2].[TourId], [t4].[TourId], [t4].[DepartureDate] 
2025-05-12 13:24:47.4608 INFO Executed DbCommand (13ms) [Parameters=[@__departureDate_Value_Date_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE EXISTS (
    SELECT 1
    FROM [TourSchedules] AS [t0]
    WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_0) 
2025-05-12 13:24:47.4789 INFO Executed DbCommand (15ms) [Parameters=[@__departureDate_Value_Date_0='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t2].[TourId], [t2].[Title], [t2].[Destination], [t2].[Duration], [t2].[Capacity], [t2].[AdultPrice], [t4].[DepartureDate], [t4].[TourScheduleId], [t2].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE EXISTS (
        SELECT 1
        FROM [TourSchedules] AS [t0]
        WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_0)
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t2]
LEFT JOIN (
    SELECT [t3].[DepartureDate], [t3].[TourScheduleId], [t3].[TourId]
    FROM (
        SELECT [t1].[DepartureDate], [t1].[TourScheduleId], [t1].[TourId], ROW_NUMBER() OVER(PARTITION BY [t1].[TourId] ORDER BY [t1].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t1]
        WHERE [t1].[IsDeleted] = CAST(0 AS bit)
    ) AS [t3]
    WHERE [t3].[row] <= 3
) AS [t4] ON [t2].[TourId] = [t4].[TourId]
ORDER BY [t2].[Title], [t2].[TourId], [t4].[TourId], [t4].[DepartureDate] 
2025-05-12 13:24:49.2979 INFO Executed DbCommand (11ms) [Parameters=[@__departureDate_Value_Date_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE EXISTS (
    SELECT 1
    FROM [TourSchedules] AS [t0]
    WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_0) 
2025-05-12 13:24:49.3806 INFO Executed DbCommand (81ms) [Parameters=[@__departureDate_Value_Date_0='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t2].[TourId], [t2].[Title], [t2].[Destination], [t2].[Duration], [t2].[Capacity], [t2].[AdultPrice], [t4].[DepartureDate], [t4].[TourScheduleId], [t2].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE EXISTS (
        SELECT 1
        FROM [TourSchedules] AS [t0]
        WHERE [t].[TourId] = [t0].[TourId] AND CONVERT(date, [t0].[DepartureDate]) = @__departureDate_Value_Date_0)
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t2]
LEFT JOIN (
    SELECT [t3].[DepartureDate], [t3].[TourScheduleId], [t3].[TourId]
    FROM (
        SELECT [t1].[DepartureDate], [t1].[TourScheduleId], [t1].[TourId], ROW_NUMBER() OVER(PARTITION BY [t1].[TourId] ORDER BY [t1].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t1]
        WHERE [t1].[IsDeleted] = CAST(0 AS bit)
    ) AS [t3]
    WHERE [t3].[row] <= 3
) AS [t4] ON [t2].[TourId] = [t4].[TourId]
ORDER BY [t2].[Title], [t2].[TourId], [t4].[TourId], [t4].[DepartureDate] 
2025-05-12 13:24:55.3634 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:24:55.3781 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 13:24:55.3877 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:24:55.3877 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 13:24:58.7805 INFO Executed DbCommand (4ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 
2025-05-12 13:24:58.8046 INFO Executed DbCommand (12ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 13:24:58.8046 INFO Executed DbCommand (1ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 
2025-05-12 13:24:58.8490 INFO Executed DbCommand (33ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 13:25:04.7064 INFO Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 13:25:04.7472 INFO Executed DbCommand (8ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 13:25:32.0045 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:25:32.0221 INFO Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 13:25:32.1308 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:25:32.1451 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:25:37.2145 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:25:37.2331 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:25:37.9321 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:25:37.9321 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:25:40.9541 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:25:40.9541 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:25:43.6363 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:25:43.6363 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:25:50.3792 INFO Executed DbCommand (5ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 13:25:50.3873 INFO Người dùng mở trang đặt tour: "Tour Ai Cập 7N6Đ – Cairo – Luxor" – Ngày đi: "06/11/2025" 
2025-05-12 13:25:50.4185 INFO Executed DbCommand (7ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 13:26:12.0743 INFO Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:26:12.0957 INFO Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:26:18.3784 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:26:18.3784 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:26:24.9397 INFO Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-12 13:26:24.9510 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-12 13:26:24.9641 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-12 13:26:24.9820 INFO Executed DbCommand (7ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-12 13:26:54.3082 INFO Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
LEFT JOIN [TourSchedules] AS [t] ON [b].[TourScheduleId] = [t].[TourScheduleId]
WHERE [b].[BookingId] = @__id_0 
2025-05-12 13:26:54.3082 INFO Executed DbCommand (4ms) [Parameters=[@__existing_TourScheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__existing_TourScheduleId_0 
2025-05-12 13:26:54.3270 INFO Executed DbCommand (4ms) [Parameters=[@__existing_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__existing_TourId_0 
2025-05-12 13:26:54.4723 INFO Executed DbCommand (18ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Bookings] SET [BookingDate] = @p0, [TotalPrice] = @p1
OUTPUT 1
WHERE [BookingId] = @p2; 
2025-05-12 13:26:54.4816 INFO Admin đã chỉnh sửa booking #2 – Người đặt: Phạm Thị Lan 
2025-05-12 13:26:54.4942 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:26:54.4942 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 13:26:54.5687 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:26:54.5780 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:26:56.4116 INFO Executed DbCommand (10ms) [Parameters=[@__email_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
WHERE [u].[Email] LIKE @__email_0_contains ESCAPE N'\' 
2025-05-12 13:26:56.4292 INFO Executed DbCommand (6ms) [Parameters=[@__email_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [s].[BookingId], [s].[AdultQuantity], [s].[BookingDate], [s].[ChildQuantity], [s].[DepartureDate], [s].[PaymentMethod], [s].[SpecialRequest], [s].[TotalPrice], [s].[TourId], [s].[TourScheduleId], [s].[UserId], [s].[UserId0], [s].[Address], [s].[Email], [s].[FullName], [s].[Password], [s].[Phone], [s].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId] AS [UserId0], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
    FROM [Bookings] AS [b]
    INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
    WHERE [u].[Email] LIKE @__email_0_contains ESCAPE N'\'
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Tours] AS [t] ON [s].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [s].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [s].[BookingId] DESC 
2025-05-12 13:26:59.9081 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-12 13:26:59.9081 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-12 13:26:59.9146 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-12 13:26:59.9146 INFO Executed DbCommand (9ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-12 13:27:01.7595 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:27:01.7595 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 13:27:01.8127 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:27:01.8213 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:27:03.3695 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:27:03.3695 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:27:03.8245 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:27:03.8245 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:27:04.3453 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:27:04.3453 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:27:05.5376 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:27:05.5430 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:27:43.6479 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:27:43.6538 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:27:46.9117 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:27:46.9223 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 13:27:46.9708 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:27:46.9821 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:27:47.7418 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:27:47.7441 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:27:49.7724 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:27:49.7883 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY 
2025-05-12 13:27:52.2518 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:27:52.2518 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:27:55.5620 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c] 
2025-05-12 13:27:55.5774 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
ORDER BY [c].[CategoryId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:27:57.1501 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c] 
2025-05-12 13:27:57.1501 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
ORDER BY [c].[CategoryId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:28:01.3438 INFO Executed DbCommand (2ms) [Parameters=[@__keyword_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[CategoryName] LIKE @__keyword_0_contains ESCAPE N'\' 
2025-05-12 13:28:01.3438 INFO Executed DbCommand (2ms) [Parameters=[@__keyword_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryName] LIKE @__keyword_0_contains ESCAPE N'\'
ORDER BY [c].[CategoryId]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY 
2025-05-12 13:28:01.8976 INFO Executed DbCommand (0ms) [Parameters=[@__keyword_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[CategoryName] LIKE @__keyword_0_contains ESCAPE N'\' 
2025-05-12 13:28:01.8976 INFO Executed DbCommand (0ms) [Parameters=[@__keyword_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryName] LIKE @__keyword_0_contains ESCAPE N'\'
ORDER BY [c].[CategoryId]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY 
2025-05-12 13:28:03.9847 INFO Executed DbCommand (2ms) [Parameters=[@__keyword_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[CategoryName] LIKE @__keyword_0_contains ESCAPE N'\' 
2025-05-12 13:28:03.9847 INFO Executed DbCommand (1ms) [Parameters=[@__keyword_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryName] LIKE @__keyword_0_contains ESCAPE N'\'
ORDER BY [c].[CategoryId]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY 
2025-05-12 13:28:06.5461 INFO Executed DbCommand (8ms) [Parameters=[@__keyword_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[CategoryName] LIKE @__keyword_0_contains ESCAPE N'\' 
2025-05-12 13:28:06.5461 INFO Executed DbCommand (2ms) [Parameters=[@__keyword_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryName] LIKE @__keyword_0_contains ESCAPE N'\'
ORDER BY [c].[CategoryId]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY 
2025-05-12 13:28:07.3495 INFO Executed DbCommand (2ms) [Parameters=[@__keyword_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[CategoryName] LIKE @__keyword_0_contains ESCAPE N'\' 
2025-05-12 13:28:07.3495 INFO Executed DbCommand (1ms) [Parameters=[@__keyword_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryName] LIKE @__keyword_0_contains ESCAPE N'\'
ORDER BY [c].[CategoryId]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY 
2025-05-12 13:28:09.8940 INFO Executed DbCommand (2ms) [Parameters=[@__keyword_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[CategoryName] LIKE @__keyword_0_contains ESCAPE N'\' 
2025-05-12 13:28:09.8940 INFO Executed DbCommand (2ms) [Parameters=[@__keyword_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
WHERE [c].[CategoryName] LIKE @__keyword_0_contains ESCAPE N'\'
ORDER BY [c].[CategoryId]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY 
2025-05-12 13:28:11.7792 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c] 
2025-05-12 13:28:11.7792 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
ORDER BY [c].[CategoryId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:28:20.2455 INFO Executed DbCommand (15ms) [Parameters=[@p0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Categories] ([CategoryName])
OUTPUT INSERTED.[CategoryId]
VALUES (@p0); 
2025-05-12 13:28:20.2644 INFO Đã thêm loại tour mới: Du lịch Châu Á 
2025-05-12 13:28:20.3150 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c] 
2025-05-12 13:28:20.3150 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c]
ORDER BY [c].[CategoryId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:28:23.9983 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:28:26.1941 INFO Executed DbCommand (6ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0 
2025-05-12 13:28:26.2097 INFO Executed DbCommand (3ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COALESCE(SUM([b].[TotalPrice]), 0.0)
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0 
2025-05-12 13:28:26.2455 INFO Executed DbCommand (8ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryName] AS [Region], COUNT(*) AS [Count]
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
INNER JOIN [Categories] AS [c] ON [t].[CategoryId] = [c].[CategoryId]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
GROUP BY [c].[CategoryName] 
2025-05-12 13:28:26.2583 INFO Executed DbCommand (6ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b].[PaymentMethod] AS [Method], COUNT(*) AS [Count]
FROM [Bookings] AS [b]
WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
GROUP BY [b].[PaymentMethod] 
2025-05-12 13:28:26.2583 INFO Executed DbCommand (5ms) [Parameters=[@__year_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[Key] AS [Month], COALESCE(SUM([b0].[TotalPrice]), 0.0) AS [Revenue]
FROM (
    SELECT [b].[TotalPrice], DATEPART(month, [b].[DepartureDate]) AS [Key]
    FROM [Bookings] AS [b]
    WHERE DATEPART(year, [b].[DepartureDate]) = @__year_Value_0
) AS [b0]
GROUP BY [b0].[Key] 
2025-05-12 13:28:26.2778 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:28:46.7585 INFO Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:28:46.7585 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:28:48.7222 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:28:48.7222 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY 
2025-05-12 13:28:50.0564 INFO Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 13:28:50.0564 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 13:28:50.8236 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:28:50.8236 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 13:28:50.8864 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:28:50.8864 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:28:53.8069 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 13:28:53.8069 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 13:28:53.8220 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 13:28:53.9164 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:28:53.9387 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 13:28:53.9387 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 13:28:56.5934 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:28:56.6072 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 13:28:56.6072 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 13:29:00.8364 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:29:00.8364 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 13:29:00.8364 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 13:29:07.5504 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:29:07.5504 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 13:29:07.5582 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 13:29:11.4221 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:29:11.4221 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 13:29:11.4306 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 13:29:24.1066 INFO Executed DbCommand (4ms) [Parameters=[@__destination_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[Destination] LIKE @__destination_0_contains ESCAPE N'\' 
2025-05-12 13:29:24.1209 INFO Executed DbCommand (5ms) [Parameters=[@__destination_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[Destination] LIKE @__destination_0_contains ESCAPE N'\'
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 13:29:24.1209 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 13:29:28.8203 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:29:28.8203 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 13:29:28.8203 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 13:29:47.3329 INFO Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 13:29:47.3387 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 13:29:51.0746 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 13:29:51.0746 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 13:30:06.4689 INFO Executed DbCommand (11ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 13:30:06.4689 INFO Người dùng mở trang đặt tour: "Tour Ai Cập 7N6Đ – Cairo – Luxor" – Ngày đi: "11/10/2025" 
2025-05-12 13:30:06.4762 INFO Executed DbCommand (5ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 13:32:24.3708 INFO Executed DbCommand (9ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-12 13:32:24.3893 INFO Executed DbCommand (10ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-12 13:32:24.4012 INFO Executed DbCommand (4ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-12 13:32:24.4165 INFO Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-12 13:32:24.4774 INFO Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [ChildQuantity], [DepartureDate], [PaymentMethod], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [TourSchedules] SET [RemainingSlot] = @p10
OUTPUT 1
WHERE [TourScheduleId] = @p11; 
2025-05-12 13:32:24.4937 INFO  Đặt tour thành công – TourID: 36, Tên tour: "Tour Ai Cập 7N6Đ – Cairo – Luxor", Ngày đi: "11/10/2025", Người đặt: "Nhã Như", Email: "nhanhu@gmail.com", Số điện thoại: "0367934563", Địa chỉ: "Vũng Tàu", Người lớn: 1, Trẻ em: 1, Tổng tiền: "82,000,000" đ, Thanh toán: "MoMo" 
2025-05-12 13:32:24.5207 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:32:24.5330 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 13:32:24.5447 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 13:32:24.5447 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 13:32:24.8557 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:32:24.8777 INFO Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 13:32:29.2447 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 13:32:29.2447 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 13:32:32.3061 INFO Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 13:32:32.3061 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 13:32:41.1987 INFO Executed DbCommand (5ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 13:32:41.1987 INFO Người dùng mở trang đặt tour: "Tour Cần Thơ - Sóc Trăng 2N1Đ - Miền Tây sông nước" – Ngày đi: "08/11/2025" 
2025-05-12 13:32:41.1987 INFO Executed DbCommand (4ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 13:36:11.6988 INFO Executed DbCommand (70ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 13:36:11.8359 INFO Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 13:36:12.2671 INFO Now listening on: http://localhost:5062 
2025-05-12 13:36:12.3623 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 13:36:12.3623 INFO Hosting environment: Development 
2025-05-12 13:36:12.3623 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 13:36:21.7845 INFO Executed DbCommand (23ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 13:36:21.9517 INFO Executed DbCommand (6ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 13:36:25.9437 INFO Executed DbCommand (6ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 13:36:25.9576 INFO Người dùng mở trang đặt tour: "Tour Trung Quốc 5N4Đ – Bắc Kinh – Vạn Lý Trường Thành" – Ngày đi: "11/01/2026" 
2025-05-12 13:36:26.0536 INFO Executed DbCommand (12ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 13:37:19.8251 INFO Executed DbCommand (5ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 13:37:19.8251 INFO Người dùng mở trang đặt tour: "Tour Trung Quốc 5N4Đ – Bắc Kinh – Vạn Lý Trường Thành" – Ngày đi: "11/01/2026" 
2025-05-12 13:37:19.8251 INFO Executed DbCommand (4ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 13:52:05.6682 INFO Executed DbCommand (156ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 13:52:05.7870 INFO Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 13:52:06.2257 INFO Now listening on: http://localhost:5062 
2025-05-12 13:52:06.3276 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 13:52:06.3276 INFO Hosting environment: Development 
2025-05-12 13:52:06.3276 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 13:52:23.7754 INFO Executed DbCommand (50ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:52:23.9473 INFO Executed DbCommand (51ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 13:52:24.1044 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 13:52:24.1609 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 13:52:24.7107 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:52:24.9116 INFO Executed DbCommand (70ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 13:52:30.4461 INFO Executed DbCommand (27ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 13:52:30.4812 INFO Executed DbCommand (8ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 13:52:35.9713 INFO Executed DbCommand (13ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 13:52:35.9811 INFO Người dùng mở trang đặt tour: "Tour Bến Tre – Cồn Phụng 1N" – Ngày đi: "04/12/2025" 
2025-05-12 13:52:36.0059 INFO Executed DbCommand (5ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 13:57:26.9638 INFO Executed DbCommand (114ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 13:57:27.0759 INFO Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 13:57:27.5163 INFO Now listening on: http://localhost:5062 
2025-05-12 13:57:27.5897 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 13:57:27.5897 INFO Hosting environment: Development 
2025-05-12 13:57:27.5897 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 13:57:35.9190 INFO Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:57:36.0901 INFO Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 13:57:36.2795 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 13:57:36.3523 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 13:57:36.8928 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 13:57:37.0688 INFO Executed DbCommand (77ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 13:57:39.9334 INFO Executed DbCommand (19ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 13:57:39.9636 INFO Executed DbCommand (6ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 13:57:48.7031 INFO Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 13:57:48.7031 INFO Executed DbCommand (4ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 13:57:57.0659 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:57:57.0834 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:57:57.1176 INFO Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 13:57:57.1176 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 13:57:57.2696 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 13:57:57.2992 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 13:58:04.8535 INFO Executed DbCommand (10ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 
2025-05-12 13:58:04.8794 INFO Executed DbCommand (14ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 13:58:04.8867 INFO Executed DbCommand (3ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 
2025-05-12 13:58:04.8867 INFO Executed DbCommand (3ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 13:58:06.5388 INFO Executed DbCommand (4ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 
2025-05-12 13:58:06.5557 INFO Executed DbCommand (14ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 13:58:06.5557 INFO Executed DbCommand (5ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[CategoryId] = @__categoryId_0 
2025-05-12 13:58:06.5930 INFO Executed DbCommand (7ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[CategoryId] = @__categoryId_0
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 13:58:08.8692 INFO Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 13:58:08.8692 INFO Executed DbCommand (4ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 13:58:16.0985 INFO Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 13:58:16.1088 INFO Executed DbCommand (8ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 13:58:24.0742 INFO Executed DbCommand (5ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 13:58:24.0742 INFO Người dùng mở trang đặt tour: "Tour Đức – Hà Lan 7N6Đ – Frankfurt – Amsterdam" – Ngày đi: "26/11/2025" 
2025-05-12 13:58:24.1052 INFO Executed DbCommand (4ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 14:00:36.0169 INFO Executed DbCommand (127ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 14:00:36.1244 INFO Executed DbCommand (14ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 14:00:36.5482 INFO Now listening on: http://localhost:5062 
2025-05-12 14:00:36.6095 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 14:00:36.6095 INFO Hosting environment: Development 
2025-05-12 14:00:36.6095 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 14:00:43.6304 INFO Executed DbCommand (35ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 14:00:43.7703 INFO Executed DbCommand (6ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 14:00:47.9681 INFO Executed DbCommand (10ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 14:00:47.9819 INFO Người dùng mở trang đặt tour: "Tour Đà Lạt 3N2Đ - Thành phố ngàn hoa" – Ngày đi: "17/10/2025" 
2025-05-12 14:00:48.1133 INFO Executed DbCommand (18ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 14:02:45.7266 INFO Executed DbCommand (95ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 14:02:45.8236 INFO Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 14:02:46.2268 INFO Now listening on: http://localhost:5062 
2025-05-12 14:02:46.3397 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 14:02:46.3397 INFO Hosting environment: Development 
2025-05-12 14:02:46.3397 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 14:02:54.0619 INFO Executed DbCommand (45ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 14:02:54.1631 INFO Executed DbCommand (5ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 14:02:57.6084 INFO Executed DbCommand (7ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 14:02:57.6225 INFO Người dùng mở trang đặt tour: "Tour Hà Giang mùa hoa tam giác mạch 3N2Đ" – Ngày đi: "30/10/2025" 
2025-05-12 14:02:57.7131 INFO Executed DbCommand (12ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 14:06:23.6167 INFO Executed DbCommand (149ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 14:06:23.7139 INFO Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 14:06:24.1027 INFO Now listening on: http://localhost:5062 
2025-05-12 14:06:24.2080 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 14:06:24.2080 INFO Hosting environment: Development 
2025-05-12 14:06:24.2080 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 14:06:32.1594 INFO Executed DbCommand (36ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 14:06:32.2466 INFO Executed DbCommand (5ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 14:06:37.0778 INFO Executed DbCommand (7ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 14:06:37.0897 INFO Người dùng mở trang đặt tour: "Tour Trung Quốc 5N4Đ – Bắc Kinh – Vạn Lý Trường Thành" – Ngày đi: "18/01/2026" 
2025-05-12 14:06:37.1733 INFO Executed DbCommand (16ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 14:07:45.7032 INFO Executed DbCommand (118ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 14:07:45.8206 INFO Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 14:07:46.3301 INFO Now listening on: http://localhost:5062 
2025-05-12 14:07:46.4257 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 14:07:46.4257 INFO Hosting environment: Development 
2025-05-12 14:07:46.4257 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 14:07:56.0093 INFO Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 14:07:56.1001 INFO Executed DbCommand (7ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 14:07:59.8365 INFO Executed DbCommand (9ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 14:07:59.8522 INFO Người dùng mở trang đặt tour: "Tour Trung Quốc 5N4Đ – Bắc Kinh – Vạn Lý Trường Thành" – Ngày đi: "15/12/2025" 
2025-05-12 14:07:59.9256 INFO Executed DbCommand (4ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 14:08:02.3075 INFO Executed DbCommand (7ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-12 14:08:02.3535 INFO Executed DbCommand (18ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-12 14:08:02.3727 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE 0 = 1 
2025-05-12 14:08:02.5769 INFO Executed DbCommand (29ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-12 14:08:02.6350 ERROR An exception occurred in the database while saving changes for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Address', table 'TourBookingDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:b1a2b9b9-6c8b-49f7-85c7-fd99ff3c862f
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Address', table 'TourBookingDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:b1a2b9b9-6c8b-49f7-85c7-fd99ff3c862f
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2025-05-12 14:09:14.8010 INFO Executed DbCommand (171ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 14:09:14.9142 INFO Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 14:09:15.3188 INFO Now listening on: http://localhost:5062 
2025-05-12 14:09:15.3776 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 14:09:15.3776 INFO Hosting environment: Development 
2025-05-12 14:09:15.3776 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 14:09:22.7607 INFO Executed DbCommand (33ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 14:09:22.8695 INFO Executed DbCommand (4ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 14:09:26.9804 INFO Executed DbCommand (4ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 14:09:26.9928 INFO Người dùng mở trang đặt tour: "Tour Đà Lạt 3N2Đ - Thành phố ngàn hoa" – Ngày đi: "13/11/2025" 
2025-05-12 14:09:27.0760 INFO Executed DbCommand (13ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 14:09:30.2113 INFO Executed DbCommand (3ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-12 14:09:30.2398 INFO Executed DbCommand (13ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-12 14:09:30.2548 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE 0 = 1 
2025-05-12 14:09:30.4301 INFO Executed DbCommand (20ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-12 14:09:30.4775 ERROR An exception occurred in the database while saving changes for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Address', table 'TourBookingDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:78945809-1b8d-4077-8296-9fdf2249c5e2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Address', table 'TourBookingDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:78945809-1b8d-4077-8296-9fdf2249c5e2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2025-05-12 14:11:57.0620 INFO Executed DbCommand (173ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 14:11:57.2179 INFO Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 14:11:57.7318 INFO Now listening on: http://localhost:5062 
2025-05-12 14:11:57.8012 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 14:11:57.8012 INFO Hosting environment: Development 
2025-05-12 14:11:57.8012 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 14:12:06.4467 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:12:06.6060 INFO Executed DbCommand (37ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 14:12:06.7630 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 14:12:06.8185 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 14:12:07.3617 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:12:07.4493 INFO Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 14:12:11.6303 INFO Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 14:12:11.6870 INFO Executed DbCommand (11ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 14:12:19.9719 INFO Executed DbCommand (12ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 14:12:19.9938 INFO Người dùng mở trang đặt tour: "Tour Ba Vì – Làng Văn hóa 1N" – Ngày đi: "13/10/2025" 
2025-05-12 14:12:20.1210 INFO Executed DbCommand (36ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 14:12:41.7679 INFO Executed DbCommand (6ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 14:12:41.7679 INFO Người dùng mở trang đặt tour: "Tour Ba Vì – Làng Văn hóa 1N" – Ngày đi: "13/10/2025" 
2025-05-12 14:12:41.7786 INFO Executed DbCommand (6ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 14:12:46.0914 INFO Executed DbCommand (5ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 14:12:46.0914 INFO Người dùng mở trang đặt tour: "Tour Ba Vì – Làng Văn hóa 1N" – Ngày đi: "13/10/2025" 
2025-05-12 14:12:46.0914 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 14:13:29.3598 INFO Executed DbCommand (4ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-12 14:13:29.3892 INFO Executed DbCommand (14ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-12 14:13:29.4039 INFO Executed DbCommand (7ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-12 14:13:29.5465 INFO Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-12 14:13:29.6411 INFO Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [ChildQuantity], [DepartureDate], [PaymentMethod], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [TourSchedules] SET [RemainingSlot] = @p10
OUTPUT 1
WHERE [TourScheduleId] = @p11; 
2025-05-12 14:13:29.6505 INFO  Đặt tour thành công – TourID: 6, Tên tour: "Tour Ba Vì – Làng Văn hóa 1N", Ngày đi: "13/10/2025", Người đặt: "Ngô Đang Minh", Email: "danminh@gmail", Số điện thoại: "0367934563", Địa chỉ: "Vũng Tàu", Người lớn: 1, Trẻ em: 0, Tổng tiền: "900,000" đ, Thanh toán: "Quầy" 
2025-05-12 14:13:29.6651 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:13:29.6651 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 14:13:29.6651 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 14:13:29.6805 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 14:13:29.7554 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:13:29.7711 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 14:13:36.4094 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:13:36.4493 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 14:13:36.6206 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:13:36.6550 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:13:43.6854 INFO Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-12 14:13:43.6854 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-12 14:13:43.7094 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-12 14:13:43.7219 INFO Executed DbCommand (4ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-12 14:13:46.2738 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:13:46.2738 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 14:13:46.3376 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:13:46.3376 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:13:55.0580 INFO Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 14:13:55.0580 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 14:14:04.1553 INFO Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 14:14:04.1553 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 14:14:09.1619 INFO Executed DbCommand (8ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 14:14:09.1619 INFO Người dùng mở trang đặt tour: "Tour Cần Thơ - Sóc Trăng 2N1Đ - Miền Tây sông nước" – Ngày đi: "05/11/2025" 
2025-05-12 14:14:09.1697 INFO Executed DbCommand (5ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 14:15:04.3913 INFO Executed DbCommand (7ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-12 14:15:04.3991 INFO Executed DbCommand (5ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-12 14:15:04.3991 INFO Executed DbCommand (3ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-12 14:15:04.3991 INFO Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-12 14:15:04.4214 INFO Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [ChildQuantity], [DepartureDate], [PaymentMethod], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [TourSchedules] SET [RemainingSlot] = @p10
OUTPUT 1
WHERE [TourScheduleId] = @p11; 
2025-05-12 14:15:04.4214 INFO  Đặt tour thành công – TourID: 13, Tên tour: "Tour Cần Thơ - Sóc Trăng 2N1Đ - Miền Tây sông nước", Ngày đi: "05/11/2025", Người đặt: "Nhã Linh", Email: "nhlinh@gmai", Số điện thoại: "0557894122", Địa chỉ: "Kiên Giang", Người lớn: 1, Trẻ em: 0, Tổng tiền: "1,900,000" đ, Thanh toán: "MoMo" 
2025-05-12 14:15:04.4369 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:15:04.4369 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 14:15:04.4506 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 14:15:04.4506 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 14:15:04.7709 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:15:04.7908 INFO Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 14:15:09.4040 INFO Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 14:15:09.4040 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 14:15:15.5060 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:15:15.5141 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 14:15:15.5813 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:15:15.5924 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:15:25.8794 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:15:25.9022 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:15:26.5007 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:15:26.5007 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:15:27.1953 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:15:27.1979 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:15:28.4418 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:15:28.4418 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:15:30.2371 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:15:30.2371 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:15:31.5008 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:15:31.5008 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:15:32.7658 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:15:32.7658 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:15:33.6930 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:15:33.6954 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:15:33.7317 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:15:33.7317 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:15:34.1161 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:15:34.1185 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:15:34.6357 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:15:34.6357 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:15:35.2441 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:15:35.2441 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:15:43.9096 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:15:43.9159 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 14:15:44.1725 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:15:44.1725 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:15:49.3410 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:15:49.3532 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 14:15:49.3532 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 14:15:49.3532 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 14:15:49.5010 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:15:49.5144 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 14:15:56.7378 INFO Executed DbCommand (14ms) [Parameters=[@__keyword_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[Title] LIKE @__keyword_0_contains ESCAPE N'\' 
2025-05-12 14:15:56.7620 INFO Executed DbCommand (8ms) [Parameters=[@__keyword_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[Title] LIKE @__keyword_0_contains ESCAPE N'\'
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 14:15:57.0193 INFO Executed DbCommand (6ms) [Parameters=[@__keyword_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[Title] LIKE @__keyword_0_contains ESCAPE N'\' 
2025-05-12 14:15:57.0397 INFO Executed DbCommand (18ms) [Parameters=[@__keyword_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[Title] LIKE @__keyword_0_contains ESCAPE N'\'
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 14:15:57.4232 INFO Executed DbCommand (8ms) [Parameters=[@__keyword_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t]
WHERE [t].[Title] LIKE @__keyword_0_contains ESCAPE N'\' 
2025-05-12 14:15:57.4374 INFO Executed DbCommand (12ms) [Parameters=[@__keyword_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    WHERE [t].[Title] LIKE @__keyword_0_contains ESCAPE N'\'
    ORDER BY [t].[Title]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 14:15:58.2693 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 14:15:58.2747 INFO Executed DbCommand (4ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 14:16:13.9324 INFO Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-12 14:16:13.9324 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-12 14:16:13.9324 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-12 14:16:13.9462 INFO Executed DbCommand (4ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-12 14:16:29.8586 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
LEFT JOIN [TourSchedules] AS [t] ON [b].[TourScheduleId] = [t].[TourScheduleId]
WHERE [b].[BookingId] = @__id_0 
2025-05-12 14:16:29.8670 INFO Executed DbCommand (2ms) [Parameters=[@__existing_TourScheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__existing_TourScheduleId_0 
2025-05-12 14:16:29.8670 INFO Executed DbCommand (3ms) [Parameters=[@__booking_TourScheduleId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourScheduleId] = @__booking_TourScheduleId_0 
2025-05-12 14:16:29.8670 INFO Executed DbCommand (2ms) [Parameters=[@__existing_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__existing_TourId_0 
2025-05-12 14:16:29.9004 INFO Executed DbCommand (12ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p6='?' (DbType = Int32), @p5='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Bookings] SET [ChildQuantity] = @p0, [DepartureDate] = @p1, [TotalPrice] = @p2, [TourScheduleId] = @p3
OUTPUT 1
WHERE [BookingId] = @p4;
UPDATE [TourSchedules] SET [RemainingSlot] = @p5
OUTPUT 1
WHERE [TourScheduleId] = @p6;
UPDATE [TourSchedules] SET [RemainingSlot] = @p7
OUTPUT 1
WHERE [TourScheduleId] = @p8; 
2025-05-12 14:16:29.9004 INFO Admin đã chỉnh sửa booking #9 – Người đặt: Lê Trọng Phúc 
2025-05-12 14:16:29.9004 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:16:29.9204 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 14:16:29.9737 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:16:29.9831 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:16:34.9746 INFO Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 14:16:34.9796 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 14:16:56.2466 INFO Executed DbCommand (5ms) [Parameters=[@__name_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
WHERE [u].[FullName] LIKE @__name_0_contains ESCAPE N'\' 
2025-05-12 14:16:56.2633 INFO Executed DbCommand (6ms) [Parameters=[@__name_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [s].[BookingId], [s].[AdultQuantity], [s].[BookingDate], [s].[ChildQuantity], [s].[DepartureDate], [s].[PaymentMethod], [s].[SpecialRequest], [s].[TotalPrice], [s].[TourId], [s].[TourScheduleId], [s].[UserId], [s].[UserId0], [s].[Address], [s].[Email], [s].[FullName], [s].[Password], [s].[Phone], [s].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId] AS [UserId0], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
    FROM [Bookings] AS [b]
    INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
    WHERE [u].[FullName] LIKE @__name_0_contains ESCAPE N'\'
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Tours] AS [t] ON [s].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [s].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [s].[BookingId] DESC 
2025-05-12 14:16:59.6533 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:16:59.6533 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:17:00.8821 INFO Executed DbCommand (9ms) [Parameters=[@__tour_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [t].[Title] LIKE @__tour_0_contains ESCAPE N'\' 
2025-05-12 14:17:00.9047 INFO Executed DbCommand (8ms) [Parameters=[@__tour_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [s].[BookingId], [s].[AdultQuantity], [s].[BookingDate], [s].[ChildQuantity], [s].[DepartureDate], [s].[PaymentMethod], [s].[SpecialRequest], [s].[TotalPrice], [s].[TourId], [s].[TourScheduleId], [s].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [s].[TourId0], [s].[AdultPrice], [s].[Capacity], [s].[CategoryId], [s].[ChildPrice], [s].[Description], [s].[Destination], [s].[Duration], [s].[Itinerary], [s].[Title], [s].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [t].[TourId] AS [TourId0], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Bookings] AS [b]
    INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
    WHERE [t].[Title] LIKE @__tour_0_contains ESCAPE N'\'
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[UserId]
LEFT JOIN [TourSchedules] AS [t0] ON [s].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [s].[BookingId] DESC 
2025-05-12 14:17:09.9587 INFO Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-12 14:17:09.9616 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-12 14:17:09.9616 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-12 14:17:09.9616 INFO Executed DbCommand (5ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-12 14:17:22.2624 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:17:22.2783 INFO Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 14:17:22.3303 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:17:22.3402 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:17:25.0778 INFO Executed DbCommand (4ms) [Parameters=[@__tour_0_contains='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [t].[Title] LIKE @__tour_0_contains ESCAPE N'\' 
2025-05-12 14:17:25.0778 INFO Executed DbCommand (5ms) [Parameters=[@__tour_0_contains='?' (Size = 200), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [s].[BookingId], [s].[AdultQuantity], [s].[BookingDate], [s].[ChildQuantity], [s].[DepartureDate], [s].[PaymentMethod], [s].[SpecialRequest], [s].[TotalPrice], [s].[TourId], [s].[TourScheduleId], [s].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [s].[TourId0], [s].[AdultPrice], [s].[Capacity], [s].[CategoryId], [s].[ChildPrice], [s].[Description], [s].[Destination], [s].[Duration], [s].[Itinerary], [s].[Title], [s].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [t].[TourId] AS [TourId0], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Bookings] AS [b]
    INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
    WHERE [t].[Title] LIKE @__tour_0_contains ESCAPE N'\'
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[UserId]
LEFT JOIN [TourSchedules] AS [t0] ON [s].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [s].[BookingId] DESC 
2025-05-12 14:17:36.1828 INFO Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Bookings] AS [b]
LEFT JOIN [TourSchedules] AS [t] ON [b].[TourScheduleId] = [t].[TourScheduleId]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
WHERE [b].[BookingId] = @__id_0 
2025-05-12 14:17:36.2080 INFO Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p2='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Bookings]
OUTPUT 1
WHERE [BookingId] = @p0;
UPDATE [TourSchedules] SET [RemainingSlot] = @p1
OUTPUT 1
WHERE [TourScheduleId] = @p2; 
2025-05-12 14:17:36.2149 WARN Admin xoá booking #9 – Người đặt: Lê Trọng Phúc 
2025-05-12 14:17:36.2278 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:17:36.2278 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingDate] DESC 
2025-05-12 14:17:36.2854 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:17:36.2964 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:17:39.6792 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 14:17:39.6847 INFO Executed DbCommand (4ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 14:17:43.6166 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:17:43.6216 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:17:44.0541 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:17:44.0614 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:17:44.4510 INFO Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:17:44.4510 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:17:45.6715 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Bookings] AS [b] 
2025-05-12 14:17:45.6715 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b0].[BookingId], [b0].[AdultQuantity], [b0].[BookingDate], [b0].[ChildQuantity], [b0].[DepartureDate], [b0].[PaymentMethod], [b0].[SpecialRequest], [b0].[TotalPrice], [b0].[TourId], [b0].[TourScheduleId], [b0].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
    FROM [Bookings] AS [b]
    ORDER BY [b].[BookingId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [b0]
INNER JOIN [Users] AS [u] ON [b0].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b0].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b0].[TourScheduleId] = [t0].[TourScheduleId]
ORDER BY [b0].[BookingId] DESC 
2025-05-12 14:17:51.0160 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 14:17:51.0301 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 14:17:51.0301 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 14:17:51.1793 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:17:51.2171 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 14:17:51.2264 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 14:17:55.9144 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:17:55.9144 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 14:17:55.9328 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 14:17:56.3694 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:17:56.3694 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 14:17:56.3694 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 14:17:59.4736 INFO Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:17:59.4914 INFO Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 14:17:59.5016 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 14:17:59.5121 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:17:59.5121 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 14:17:59.5121 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 14:18:02.6143 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:18:02.6185 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 14:18:02.6185 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 14:18:04.2867 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:18:04.2966 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 14:18:04.3061 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 14:18:04.7834 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:18:04.7947 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 14:18:04.8048 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 14:18:06.7337 INFO Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:18:06.7503 INFO Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 14:18:06.7580 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 14:18:08.5758 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:18:08.5758 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 14:18:08.5888 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 14:18:15.8710 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 14:18:15.8867 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-12 14:18:17.7484 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin' 
2025-05-12 14:18:17.7484 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Role] <> N'admin'
ORDER BY [u].[UserId]
OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY 
2025-05-12 14:18:53.0147 INFO Executed DbCommand (16ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 14:18:53.0271 INFO Executed DbCommand (5ms) [Parameters=[@__model_Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__model_Email_0 
2025-05-12 14:18:53.3660 INFO Executed DbCommand (8ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0 
2025-05-12 14:18:53.4636 INFO Executed DbCommand (24ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (Size = 256), @p8='?' (Size = 256), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 256), @p15='?' (Size = 200), @p16='?' (Size = 200), @p17='?' (Size = 200), @p18='?' (Size = 200), @p19='?' (Size = 200), @p20='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p15, @p16, @p17, @p18, @p19, @p20); 
2025-05-12 14:18:57.0178 INFO Đăng ký thành công cho ptduong394@gmail.com, đã gửi mã OTP 
2025-05-12 14:19:16.9724 INFO Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 14:19:16.9811 INFO Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0 
2025-05-12 14:19:17.0271 INFO Executed DbCommand (21ms) [Parameters=[@p14='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p15='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [SecurityStamp] = @p11, [TwoFactorEnabled] = @p12, [UserName] = @p13
OUTPUT 1
WHERE [Id] = @p14 AND [ConcurrencyStamp] = @p15; 
2025-05-12 14:19:33.3237 INFO Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 14:19:33.4452 INFO Executed DbCommand (8ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 14:19:33.4749 INFO Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 14:19:33.5044 INFO Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 14:19:33.5044 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 14:19:33.5166 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 14:19:33.5461 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 14:19:33.5461 WARN  
2025-05-12 14:19:38.0685 INFO Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 14:19:40.5661 INFO Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 14:19:40.6091 INFO Executed DbCommand (12ms) [Parameters=[@__user_UserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b].[TourScheduleId] = [t0].[TourScheduleId]
LEFT JOIN [Images] AS [i] ON [t].[TourId] = [i].[TourId]
WHERE [b].[UserId] = @__user_UserId_0
ORDER BY [b].[BookingDate] DESC, [b].[BookingId], [t].[TourId], [t0].[TourScheduleId] 
2025-05-12 14:19:45.3183 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:19:45.3325 INFO Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 14:19:45.3404 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 14:19:45.3404 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 14:19:45.4181 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:19:45.6400 INFO Executed DbCommand (214ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 14:19:47.9517 INFO Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 14:19:47.9517 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 14:19:50.4972 INFO Executed DbCommand (7ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 14:19:50.4972 INFO Người dùng mở trang đặt tour: "Tour Bến Tre – Cồn Phụng 1N" – Ngày đi: "12/11/2025" 
2025-05-12 14:19:50.4972 INFO Executed DbCommand (6ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 14:19:53.0882 INFO Executed DbCommand (5ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-12 14:19:53.0882 INFO Executed DbCommand (9ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-12 14:19:53.1049 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE 0 = 1 
2025-05-12 14:19:53.1235 INFO Executed DbCommand (16ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-12 14:19:53.2102 ERROR An exception occurred in the database while saving changes for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Address', table 'TourBookingDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:8adcffa9-bb54-4e33-aa34-a9e328dd7fca
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Address', table 'TourBookingDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:8adcffa9-bb54-4e33-aa34-a9e328dd7fca
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2025-05-12 14:20:33.1854 ERROR An unhandled exception has occurred while executing the request. Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Address', table 'TourBookingDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:8adcffa9-bb54-4e33-aa34-a9e328dd7fca
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at TourBookingWeb.Controllers.BookingController.Create(Int32 TourId, Int32 AdultQuantity, Int32 ChildQuantity, String FullName, String Email, String Phone, String Address, String SpecialRequest, String PaymentMethod, DateTime DepartureDate) in E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb\Controllers\BookingController.cs:line 104
   at lambda_method583(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at TourBookingWeb.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb\Program.cs:line 143
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-12 14:20:36.1632 INFO Executed DbCommand (8ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 14:20:36.1632 INFO Người dùng mở trang đặt tour: "Tour Bến Tre – Cồn Phụng 1N" – Ngày đi: "12/11/2025" 
2025-05-12 14:20:36.1674 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 14:20:38.4479 INFO Executed DbCommand (12ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-12 14:20:38.4479 INFO Executed DbCommand (8ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-12 14:20:38.4614 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE 0 = 1 
2025-05-12 14:20:38.4614 INFO Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-12 14:20:38.4614 ERROR An exception occurred in the database while saving changes for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Address', table 'TourBookingDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:8adcffa9-bb54-4e33-aa34-a9e328dd7fca
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Address', table 'TourBookingDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:8adcffa9-bb54-4e33-aa34-a9e328dd7fca
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2025-05-12 14:21:40.9564 ERROR An unhandled exception has occurred while executing the request. Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Address', table 'TourBookingDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:8adcffa9-bb54-4e33-aa34-a9e328dd7fca
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at TourBookingWeb.Controllers.BookingController.Create(Int32 TourId, Int32 AdultQuantity, Int32 ChildQuantity, String FullName, String Email, String Phone, String Address, String SpecialRequest, String PaymentMethod, DateTime DepartureDate) in E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb\Controllers\BookingController.cs:line 104
   at lambda_method583(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at TourBookingWeb.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb\Program.cs:line 143
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-12 14:21:41.1506 INFO Executed DbCommand (7ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-12 14:21:41.1506 INFO Executed DbCommand (4ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-12 14:21:41.1506 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE 0 = 1 
2025-05-12 14:21:41.1506 INFO Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-12 14:21:41.1656 ERROR An exception occurred in the database while saving changes for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Address', table 'TourBookingDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:8adcffa9-bb54-4e33-aa34-a9e328dd7fca
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Address', table 'TourBookingDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:8adcffa9-bb54-4e33-aa34-a9e328dd7fca
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2025-05-12 14:23:47.5210 INFO Executed DbCommand (134ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 14:23:47.6538 INFO Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 14:23:48.1210 INFO Now listening on: http://localhost:5062 
2025-05-12 14:23:48.1782 INFO Application started. Press Ctrl+C to shut down. 
2025-05-12 14:23:48.1782 INFO Hosting environment: Development 
2025-05-12 14:23:48.1782 INFO Content root path: E:\6. Đại học HKII - Năm 3\Công nghệ .Net\Cuối kì\TourBookingWeb 
2025-05-12 14:24:05.2354 INFO Executed DbCommand (7,540ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:24:05.2354 INFO Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:24:05.3492 INFO Executed DbCommand (34ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 14:24:05.3492 INFO Executed DbCommand (34ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 14:24:05.4650 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 14:24:05.4650 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 14:24:05.5106 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 14:24:05.5106 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 14:24:06.1005 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:24:06.3425 INFO Executed DbCommand (168ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 14:24:24.8606 INFO Executed DbCommand (15,201ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 14:24:28.9616 INFO Executed DbCommand (4,081ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 14:24:29.3013 INFO Executed DbCommand (359ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t2].[TourScheduleId], [t2].[DepartureDate], [t2].[IsDeleted], [t2].[RemainingSlot], [t2].[ReturnDate], [t2].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN (
    SELECT [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
    FROM [TourSchedules] AS [t0]
    WHERE [t0].[IsDeleted] = CAST(0 AS bit)
) AS [t2] ON [t1].[TourId] = [t2].[TourId]
ORDER BY [t1].[TourId] 
2025-05-12 14:24:29.3248 INFO Executed DbCommand (21ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-12 14:24:35.5982 INFO Executed DbCommand (3,411ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-12 14:24:35.6061 INFO Người dùng mở trang đặt tour: "Tour Châu Đốc – Rừng Trà Sư 2N1Đ" – Ngày đi: "08/11/2025" 
2025-05-12 14:24:35.6368 INFO Executed DbCommand (6ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-12 14:25:13.5904 INFO Executed DbCommand (8ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-12 14:25:13.6191 INFO Executed DbCommand (11ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourScheduleId], [t].[DepartureDate], [t].[IsDeleted], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-12 14:25:13.6191 INFO Executed DbCommand (6ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-12 14:25:13.8320 INFO Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [ChildQuantity], [DepartureDate], [PaymentMethod], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [TourSchedules] SET [RemainingSlot] = @p10
OUTPUT 1
WHERE [TourScheduleId] = @p11; 
2025-05-12 14:25:13.8545 INFO  Đặt tour thành công – TourID: 20, Tên tour: "Tour Châu Đốc – Rừng Trà Sư 2N1Đ", Ngày đi: "08/11/2025", Người đặt: "Lê Thị Phương Linh ", Email: "ptduong394@gmail.com", Số điện thoại: "0367934563", Địa chỉ: "Kiên Giang", Người lớn: 1, Trẻ em: 0, Tổng tiền: "1,490,000" đ, Thanh toán: "Quầy" 
2025-05-12 14:25:13.8689 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:25:13.8689 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 14:25:13.8873 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 14:25:13.8873 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 14:25:14.1729 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:25:14.1881 INFO Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 14:25:16.5852 INFO Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 14:25:19.4718 INFO Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0 
2025-05-12 14:25:19.5076 INFO Executed DbCommand (7ms) [Parameters=[@__user_UserId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[TourScheduleId], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM [Bookings] AS [b]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b].[TourScheduleId] = [t0].[TourScheduleId]
LEFT JOIN [Images] AS [i] ON [t].[TourId] = [i].[TourId]
WHERE [b].[UserId] = @__user_UserId_0
ORDER BY [b].[BookingDate] DESC, [b].[BookingId], [t].[TourId], [t0].[TourScheduleId] 
2025-05-12 14:25:35.8023 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:25:35.8113 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[Title], [t1].[TourId] 
2025-05-12 14:25:35.8113 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 14:25:35.8203 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 14:25:35.9728 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:25:35.9837 INFO Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[Title], [t1].[Destination], [t1].[Duration], [t1].[Capacity], [t1].[AdultPrice], [t3].[DepartureDate], [t3].[TourScheduleId], [t1].[c]
FROM (
    SELECT [t].[TourId], [t].[Title], [t].[Destination], [t].[Duration], [t].[Capacity], [t].[AdultPrice], COALESCE((
        SELECT TOP(1) [i].[Url]
        FROM [Images] AS [i]
        WHERE [i].[TourId] = [t].[TourId] AND [i].[DayNumber] = 0), N'assets/images/no-image.jpg') AS [c]
    FROM [Tours] AS [t]
    ORDER BY [t].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN (
    SELECT [t2].[DepartureDate], [t2].[TourScheduleId], [t2].[TourId]
    FROM (
        SELECT [t0].[DepartureDate], [t0].[TourScheduleId], [t0].[TourId], ROW_NUMBER() OVER(PARTITION BY [t0].[TourId] ORDER BY [t0].[DepartureDate]) AS [row]
        FROM [TourSchedules] AS [t0]
        WHERE [t0].[IsDeleted] = CAST(0 AS bit)
    ) AS [t2]
    WHERE [t2].[row] <= 3
) AS [t3] ON [t1].[TourId] = [t3].[TourId]
ORDER BY [t1].[Title], [t1].[TourId], [t3].[TourId], [t3].[DepartureDate] 
2025-05-12 14:25:45.2423 INFO Executed DbCommand (69ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 14:25:45.4448 INFO Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0 
2025-05-12 14:25:45.5936 INFO Executed DbCommand (9ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 14:25:45.5936 INFO Executed DbCommand (10ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 14:25:45.6166 INFO Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 14:25:45.6166 INFO Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 14:25:45.6208 INFO Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 14:25:45.6208 INFO Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 14:25:45.6208 INFO Executed DbCommand (3ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 14:25:45.6208 INFO Executed DbCommand (3ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 14:25:45.6498 INFO Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 14:25:45.6498 INFO Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0 
2025-05-12 14:25:45.6498 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 14:25:45.6498 INFO Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 14:25:45.6498 INFO Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 14:25:45.6498 INFO Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0 
2025-05-12 14:25:45.6498 INFO Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 14:25:45.6498 INFO Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0 
2025-05-12 14:25:45.6697 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 14:25:45.6696 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 14:25:45.6829 INFO Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 14:25:45.6829 INFO Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0 
2025-05-12 14:25:45.6829 WARN admin 
2025-05-12 14:25:45.6829 WARN admin 
2025-05-12 14:25:52.4766 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 14:25:52.4875 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 14:25:52.4931 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 14:25:52.6503 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:25:52.6896 INFO Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 14:25:52.7043 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 14:25:54.9940 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-12 14:25:58.4804 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 14:25:58.4804 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT CONVERT(varchar(11), [c].[CategoryId]) AS [Value], [c].[CategoryName] AS [Text]
FROM [Categories] AS [c] 
2025-05-12 14:25:58.4804 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t0].[Destination]
FROM (
    SELECT DISTINCT [t].[Destination]
    FROM [Tours] AS [t]
) AS [t0]
ORDER BY [t0].[Destination] 
2025-05-12 14:25:58.5473 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:25:58.5550 INFO Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 14:25:58.5550 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 14:26:00.6000 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:26:00.6217 INFO Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 14:26:00.6217 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 14:26:01.2700 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:26:01.2753 INFO Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 14:26:01.2753 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-12 14:26:03.4043 INFO Executed DbCommand (67ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-12 14:26:03.4177 INFO Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[TourScheduleId], [t0].[DepartureDate], [t0].[IsDeleted], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    ORDER BY [t].[TourId] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] DESC 
2025-05-12 14:26:03.4177 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
