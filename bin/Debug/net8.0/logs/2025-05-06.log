2025-05-06 06:40:37.0806 INFO Now listening on: http://localhost:5062 
2025-05-06 06:40:37.1504 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 06:40:37.1504 INFO Hosting environment: Development 
2025-05-06 06:40:37.1504 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 06:41:05.5542 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-06 06:41:06.2229 INFO Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 06:41:06.3058 INFO Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 06:41:06.3962 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:41:06.4263 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:41:06.4263 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:41:06.4263 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:41:06.4263 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:41:06.4263 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:41:06.4263 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:41:06.4263 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:41:06.4263 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:41:09.4750 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 06:41:09.4888 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 06:41:34.0854 INFO Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 06:42:10.0732 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 06:53:38.1211 INFO Now listening on: http://localhost:5062 
2025-05-06 06:53:38.1906 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 06:53:38.1906 INFO Hosting environment: Development 
2025-05-06 06:53:38.1906 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 06:53:40.9161 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-06 06:53:41.4875 INFO Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 06:53:41.5677 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 06:53:41.6538 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:53:41.6822 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:53:41.6822 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:53:41.6822 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:53:41.6857 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:53:41.6857 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:53:41.6857 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:53:41.6857 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:53:41.6857 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:53:42.9007 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 06:53:42.9140 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 06:58:06.0696 INFO Now listening on: http://localhost:5062 
2025-05-06 06:58:06.1434 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 06:58:06.1434 INFO Hosting environment: Development 
2025-05-06 06:58:06.1434 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 06:58:08.4888 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-06 06:58:09.0865 INFO Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 06:58:09.1699 INFO Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 06:58:09.2686 INFO Executed DbCommand (5ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:58:09.3005 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:58:09.3005 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:58:09.3005 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:58:09.3005 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:58:09.3005 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:58:09.3005 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:58:09.3005 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:58:09.3005 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 06:58:10.7033 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 06:58:10.7176 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 07:03:47.0592 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-06 07:04:18.6669 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-06 07:04:18.9653 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 07:04:18.9720 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-06 07:04:18.9995 INFO Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-06 07:04:19.0547 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-06 07:04:19.0607 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 07:04:19.0607 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-06 07:04:19.0607 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-06 07:04:19.0764 INFO Applying migration '20250504214437_AddTourScheduleFix'. 
2025-05-06 07:04:19.1181 INFO Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD [PaymentMethod] nvarchar(max) NOT NULL DEFAULT N''; 
2025-05-06 07:04:19.1181 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD [TourScheduleId] int NOT NULL DEFAULT 0; 
2025-05-06 07:04:19.1284 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TourSchedules] (
    [TourScheduleId] int NOT NULL IDENTITY,
    [TourId] int NOT NULL,
    [StartDate] datetime2 NOT NULL,
    [EndDate] datetime2 NOT NULL,
    [Price] decimal(18,2) NOT NULL,
    [RemainingSeats] int NOT NULL,
    CONSTRAINT [PK_TourSchedules] PRIMARY KEY ([TourScheduleId]),
    CONSTRAINT [FK_TourSchedules_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE
); 
2025-05-06 07:04:19.1411 INFO Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_TourScheduleId] ON [Bookings] ([TourScheduleId]); 
2025-05-06 07:04:19.1411 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_TourSchedules_TourId] ON [TourSchedules] ([TourId]); 
2025-05-06 07:04:19.1542 ERROR Failed executing DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD CONSTRAINT [FK_Bookings_TourSchedules_TourScheduleId] FOREIGN KEY ([TourScheduleId]) REFERENCES [TourSchedules] ([TourScheduleId]) ON DELETE CASCADE; 
2025-05-06 07:08:49.5499 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-06 07:09:46.0041 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-06 07:09:46.3059 INFO Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 07:09:46.3127 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-06 07:09:46.3396 INFO Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-06 07:09:46.3860 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-06 07:09:46.3919 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 07:09:46.3919 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-06 07:09:46.3919 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-06 07:09:46.4040 INFO Applying migration '20250504214437_AddTourScheduleFix'. 
2025-05-06 07:09:46.4373 INFO Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD [PaymentMethod] nvarchar(max) NOT NULL DEFAULT N''; 
2025-05-06 07:09:46.4373 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD [TourScheduleId] int NOT NULL DEFAULT 0; 
2025-05-06 07:09:46.4373 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TourSchedules] (
    [TourScheduleId] int NOT NULL IDENTITY,
    [TourId] int NOT NULL,
    [StartDate] datetime2 NOT NULL,
    [EndDate] datetime2 NOT NULL,
    [Price] decimal(18,2) NOT NULL,
    [RemainingSeats] int NOT NULL,
    CONSTRAINT [PK_TourSchedules] PRIMARY KEY ([TourScheduleId]),
    CONSTRAINT [FK_TourSchedules_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE
); 
2025-05-06 07:09:46.4373 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_TourScheduleId] ON [Bookings] ([TourScheduleId]); 
2025-05-06 07:09:46.4373 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_TourSchedules_TourId] ON [TourSchedules] ([TourId]); 
2025-05-06 07:09:46.4526 ERROR Failed executing DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD CONSTRAINT [FK_Bookings_TourSchedules_TourScheduleId] FOREIGN KEY ([TourScheduleId]) REFERENCES [TourSchedules] ([TourScheduleId]) ON DELETE CASCADE; 
2025-05-06 07:10:29.4044 WARN No store type was specified for the decimal property 'Price' on entity type 'TourSchedule'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'. 
2025-05-06 07:10:29.9202 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 07:10:29.9497 INFO Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-06 07:10:29.9737 INFO Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-06 07:16:15.1148 INFO Now listening on: http://localhost:5062 
2025-05-06 07:16:15.1856 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 07:16:15.1856 INFO Hosting environment: Development 
2025-05-06 07:16:15.1856 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 07:16:18.1558 INFO Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 07:16:18.2349 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 07:16:18.3253 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:16:18.3557 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:16:18.3557 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:16:18.3576 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:16:18.3576 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:16:18.3576 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:16:18.3576 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:16:18.3576 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:16:18.3576 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:16:19.6491 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 07:16:19.6648 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 07:16:45.8990 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 07:16:45.9405 INFO Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-06 07:16:45.9544 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-06 07:17:12.8371 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 07:17:12.8587 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-06 07:17:12.8834 INFO Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-06 07:17:12.9255 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-06 07:17:12.9255 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 07:17:12.9255 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-06 07:17:12.9255 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-06 07:17:12.9391 INFO Applying migration '20250504214437_AddTourScheduleFix'. 
2025-05-06 07:17:12.9673 INFO Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD [PaymentMethod] nvarchar(max) NOT NULL DEFAULT N''; 
2025-05-06 07:17:12.9673 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD [TourScheduleId] int NOT NULL DEFAULT 0; 
2025-05-06 07:17:12.9673 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TourSchedules] (
    [TourScheduleId] int NOT NULL IDENTITY,
    [TourId] int NOT NULL,
    [StartDate] datetime2 NOT NULL,
    [EndDate] datetime2 NOT NULL,
    [Price] decimal(18,2) NOT NULL,
    [RemainingSeats] int NOT NULL,
    CONSTRAINT [PK_TourSchedules] PRIMARY KEY ([TourScheduleId]),
    CONSTRAINT [FK_TourSchedules_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE
); 
2025-05-06 07:17:12.9673 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_TourScheduleId] ON [Bookings] ([TourScheduleId]); 
2025-05-06 07:17:12.9673 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_TourSchedules_TourId] ON [TourSchedules] ([TourId]); 
2025-05-06 07:17:12.9673 ERROR Failed executing DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Bookings] ADD CONSTRAINT [FK_Bookings_TourSchedules_TourScheduleId] FOREIGN KEY ([TourScheduleId]) REFERENCES [TourSchedules] ([TourScheduleId]) ON DELETE CASCADE; 
2025-05-06 07:19:04.2134 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 07:19:04.2408 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-06 07:19:04.2663 INFO Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-06 07:19:04.3119 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-06 07:19:04.3119 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 07:19:04.3119 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-06 07:19:04.3119 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-06 07:19:04.3286 INFO Applying migration '20250506001847_CleanRemoveTourSchedules'. 
2025-05-06 07:19:04.3286 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250506001847_CleanRemoveTourSchedules', N'9.0.4'); 
2025-05-06 07:19:04.3286 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result 
2025-05-06 07:21:07.7539 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 07:21:07.7746 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-06 07:21:07.7947 INFO Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-06 07:21:07.8431 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-06 07:21:07.8431 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 07:21:07.8431 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-06 07:21:07.8431 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-06 07:21:07.8596 INFO Applying migration '20250506002051_InitDb7'. 
2025-05-06 07:21:07.8596 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250506002051_InitDb7', N'9.0.4'); 
2025-05-06 07:21:07.8596 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result 
2025-05-06 07:23:24.4118 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 07:23:24.4344 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-06 07:23:24.4618 INFO Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-06 07:23:24.5072 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-06 07:23:24.5072 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 07:23:24.5072 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-06 07:23:24.5172 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-06 07:23:24.5172 INFO Applying migration '20250506002312_AddDepartureDateToBooking'. 
2025-05-06 07:23:24.5347 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250506002312_AddDepartureDateToBooking', N'9.0.4'); 
2025-05-06 07:23:24.5347 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result 
2025-05-06 07:24:16.5897 INFO Now listening on: http://localhost:5062 
2025-05-06 07:24:16.6621 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 07:24:16.6621 INFO Hosting environment: Development 
2025-05-06 07:24:16.6621 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 07:24:26.4137 INFO Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 07:24:26.5017 INFO Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 07:24:26.6063 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:24:26.6401 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:24:26.6401 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:24:26.6401 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:24:26.6401 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:24:26.6401 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:24:26.6401 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:24:26.6401 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:24:26.6401 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:24:27.7548 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 07:24:27.7697 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 07:27:00.4955 INFO Now listening on: http://localhost:5062 
2025-05-06 07:27:00.5828 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 07:27:00.5828 INFO Hosting environment: Development 
2025-05-06 07:27:00.5828 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 07:27:04.2212 INFO Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 07:27:04.3050 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 07:27:04.3981 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:27:04.4288 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:27:04.4288 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:27:04.4288 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:27:04.4288 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:27:04.4288 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:27:04.4288 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:27:04.4288 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:27:04.4288 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:27:05.5221 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 07:27:05.5375 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 07:27:07.2806 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 07:27:07.2806 ERROR The view 'Create' was not found. Searched locations: /Views/Booking/Create.cshtml, /Views/Shared/Create.cshtml 
2025-05-06 07:27:07.3097 ERROR An unhandled exception has occurred while executing the request. System.InvalidOperationException: The view 'Create' was not found. The following locations were searched:
/Views/Booking/Create.cshtml
/Views/Shared/Create.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 07:30:02.7661 INFO Now listening on: http://localhost:5062 
2025-05-06 07:30:02.8437 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 07:30:02.8437 INFO Hosting environment: Development 
2025-05-06 07:30:02.8437 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 07:30:06.1616 INFO Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 07:30:06.2472 INFO Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 07:30:06.3384 INFO Executed DbCommand (5ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:30:06.3710 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:30:06.3723 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:30:06.3723 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:30:06.3723 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:30:06.3723 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:30:06.3723 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:30:06.3723 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:30:06.3723 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:30:07.2918 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 07:30:07.3074 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 07:30:08.9677 INFO Executed DbCommand (4ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 07:30:08.9859 ERROR An unhandled exception has occurred while executing the request. System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type 'TourBookingWeb.Models.Booking', but this ViewDataDictionary instance requires a model item of type 'TourBookingWeb.Models.Tour'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at lambda_method246(Closure, ViewDataDictionary)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 07:32:15.0011 INFO Now listening on: http://localhost:5062 
2025-05-06 07:32:15.0785 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 07:32:15.0785 INFO Hosting environment: Development 
2025-05-06 07:32:15.0785 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 07:32:18.0400 INFO Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 07:32:18.1232 INFO Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 07:32:18.2200 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:32:18.2516 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:32:18.2516 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:32:18.2516 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:32:18.2516 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:32:18.2516 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:32:18.2516 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:32:18.2516 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:32:18.2516 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:32:19.4523 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 07:32:19.4687 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 07:32:21.1724 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 07:32:21.1903 ERROR The view 'Create' was not found. Searched locations: /Views/Booking/Create.cshtml, /Views/Shared/Create.cshtml 
2025-05-06 07:32:21.1903 ERROR An unhandled exception has occurred while executing the request. System.InvalidOperationException: The view 'Create' was not found. The following locations were searched:
/Views/Booking/Create.cshtml
/Views/Shared/Create.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 07:32:48.4410 INFO Now listening on: http://localhost:5062 
2025-05-06 07:32:48.5130 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 07:32:48.5139 INFO Hosting environment: Development 
2025-05-06 07:32:48.5139 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 07:32:52.4767 INFO Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 07:32:52.5573 INFO Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 07:32:52.6482 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:32:52.6790 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:32:52.6790 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:32:52.6790 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:32:52.6790 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:32:52.6790 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:32:52.6790 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:32:52.6790 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:32:52.6790 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:32:53.6742 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 07:32:53.6909 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 07:32:55.3586 INFO Executed DbCommand (1ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 07:33:53.8989 INFO Now listening on: http://localhost:5062 
2025-05-06 07:33:53.9708 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 07:33:53.9708 INFO Hosting environment: Development 
2025-05-06 07:33:53.9708 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 07:33:57.3895 INFO Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 07:33:57.4811 INFO Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 07:33:57.5759 INFO Executed DbCommand (5ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:33:57.6055 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:33:57.6070 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:33:57.6070 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:33:57.6070 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:33:57.6070 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:33:57.6070 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:33:57.6070 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:33:57.6070 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:33:58.5382 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 07:33:58.5553 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 07:33:59.7959 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 07:34:18.8701 INFO Executed DbCommand (12ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 07:34:18.8830 INFO Executed DbCommand (5ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 07:34:19.0332 ERROR Failed executing DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
2025-05-06 07:34:19.0606 ERROR An exception occurred in the database while saving changes for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepartureDate'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f56f4e83-6dc1-4bf4-92ed-a1c0dfad9485
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepartureDate'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f56f4e83-6dc1-4bf4-92ed-a1c0dfad9485
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2025-05-06 07:38:51.9267 INFO Executed DbCommand (114ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [TourBookingDB]; 
2025-05-06 07:38:51.9757 INFO Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [TourBookingDB] SET READ_COMMITTED_SNAPSHOT ON;
END; 
2025-05-06 07:38:51.9875 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 07:38:51.9875 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-06 07:38:52.0096 INFO Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-06 07:38:52.0516 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-06 07:38:52.0516 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 07:38:52.0516 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-06 07:38:52.0647 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-06 07:38:52.0647 INFO Applying migration '20250506003820_InitDb'. 
2025-05-06 07:38:52.0780 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250506003820_InitDb', N'9.0.4'); 
2025-05-06 07:38:52.0780 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result 
2025-05-06 07:43:24.3651 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 07:43:24.3869 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-06 07:43:24.3984 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-06 07:43:24.4426 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-06 07:43:24.4426 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 07:43:24.4426 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-06 07:43:24.4513 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-06 07:43:24.4513 INFO Applying migration '20250506004307_InitDb'. 
2025-05-06 07:43:24.4513 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250506004307_InitDb', N'9.0.4'); 
2025-05-06 07:43:24.4657 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result 
2025-05-06 07:47:00.4401 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 07:47:00.4632 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-06 07:47:00.4805 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-06 07:47:00.5232 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-06 07:47:00.5232 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 07:47:00.5290 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-06 07:47:00.5290 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-06 07:47:00.5290 INFO Applying migration '20250506004647_InitDatabase'. 
2025-05-06 07:47:00.5566 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Categories] (
    [CategoryId] int NOT NULL IDENTITY,
    [CategoryName] nvarchar(200) NOT NULL,
    CONSTRAINT [PK_Categories] PRIMARY KEY ([CategoryId])
); 
2025-05-06 07:47:00.5566 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [UserId] int NOT NULL IDENTITY,
    [Email] nvarchar(200) NOT NULL,
    [FullName] nvarchar(200) NOT NULL,
    [Phone] nvarchar(200) NOT NULL,
    [Address] nvarchar(200) NOT NULL,
    [Password] nvarchar(200) NOT NULL,
    [Role] nvarchar(200) NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([UserId])
); 
2025-05-06 07:47:00.5608 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Tours] (
    [TourId] int NOT NULL IDENTITY,
    [Title] nvarchar(200) NOT NULL,
    [Capacity] int NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [AdultPrice] decimal(18,2) NOT NULL,
    [ChildPrice] decimal(18,2) NOT NULL,
    [Transport] nvarchar(200) NOT NULL,
    [Departures] nvarchar(max) NOT NULL,
    [Destination] nvarchar(200) NOT NULL,
    [Duration] nvarchar(200) NOT NULL,
    [Itinerary] nvarchar(2000) NOT NULL,
    [CategoryId] int NOT NULL,
    CONSTRAINT [PK_Tours] PRIMARY KEY ([TourId]),
    CONSTRAINT [FK_Tours_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([CategoryId]) ON DELETE NO ACTION
); 
2025-05-06 07:47:00.5608 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Bookings] (
    [BookingId] int NOT NULL IDENTITY,
    [BookingDate] datetime2 NOT NULL,
    [AdultQuantity] int NOT NULL,
    [ChildQuantity] int NOT NULL,
    [TotalPrice] decimal(18,2) NOT NULL,
    [SpecialRequest] nvarchar(200) NOT NULL,
    [TourId] int NOT NULL,
    [UserId] int NOT NULL,
    [DepartureDate] datetime2 NOT NULL,
    [CategoryId] int NULL,
    CONSTRAINT [PK_Bookings] PRIMARY KEY ([BookingId]),
    CONSTRAINT [FK_Bookings_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([CategoryId]),
    CONSTRAINT [FK_Bookings_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE,
    CONSTRAINT [FK_Bookings_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([UserId]) ON DELETE CASCADE
); 
2025-05-06 07:47:00.5608 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Images] (
    [ImageId] int NOT NULL IDENTITY,
    [Url] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NOT NULL,
    [TourId] int NOT NULL,
    [DayNumber] int NULL,
    CONSTRAINT [PK_Images] PRIMARY KEY ([ImageId]),
    CONSTRAINT [FK_Images_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE
); 
2025-05-06 07:47:00.5608 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_CategoryId] ON [Bookings] ([CategoryId]); 
2025-05-06 07:47:00.5608 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_TourId] ON [Bookings] ([TourId]); 
2025-05-06 07:47:00.5608 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_UserId] ON [Bookings] ([UserId]); 
2025-05-06 07:47:00.5608 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Images_TourId] ON [Images] ([TourId]); 
2025-05-06 07:47:00.5608 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Tours_CategoryId] ON [Tours] ([CategoryId]); 
2025-05-06 07:47:00.5608 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250506004647_InitDatabase', N'9.0.4'); 
2025-05-06 07:47:00.5608 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result 
2025-05-06 07:47:27.6656 INFO Now listening on: http://localhost:5062 
2025-05-06 07:47:27.7348 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 07:47:27.7348 INFO Hosting environment: Development 
2025-05-06 07:47:27.7348 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 07:47:40.0696 INFO Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 07:47:53.8127 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 07:47:53.8776 INFO Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 07:47:53.9686 INFO Executed DbCommand (6ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:53.9953 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:53.9953 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:53.9973 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:53.9973 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:53.9973 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:53.9973 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:53.9973 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:53.9973 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:57.6185 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 07:47:57.6185 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 07:47:57.6222 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:57.6222 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:57.6222 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:57.6222 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:57.6222 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:57.6222 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:57.6222 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:57.6222 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:57.6222 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:59.0494 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 07:47:59.0494 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 07:47:59.0494 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:59.0494 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:59.0494 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:59.0494 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:59.0494 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:59.0494 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:59.0494 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:59.0494 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:47:59.0494 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:48:01.6438 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 07:48:01.6549 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 07:48:03.6336 INFO Executed DbCommand (4ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 07:48:15.6044 INFO Executed DbCommand (2ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 07:48:15.6127 INFO Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 07:48:15.7084 INFO Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-06 07:48:15.7577 INFO Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
2025-05-06 07:48:15.7729 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 07:48:15.7729 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 07:48:15.7798 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:48:15.7798 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:48:15.7798 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:48:15.7798 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:48:15.7798 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:48:15.7798 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:48:15.7798 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:48:15.7798 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:48:15.7798 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:48:30.6686 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 07:48:30.6714 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 07:48:35.7259 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 07:48:46.6851 INFO Executed DbCommand (2ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 07:48:46.6851 INFO Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 07:48:46.6851 INFO Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
2025-05-06 07:48:46.7053 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 07:48:46.7053 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 07:48:46.7053 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:48:46.7053 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:48:46.7053 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:48:46.7053 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:48:46.7053 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:48:46.7053 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:48:46.7053 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:48:46.7053 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:48:46.7053 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:48:48.2601 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 07:48:48.2652 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 07:50:36.2483 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 07:50:36.2483 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 07:50:50.5940 INFO Now listening on: http://localhost:5062 
2025-05-06 07:50:50.6668 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 07:50:50.6668 INFO Hosting environment: Development 
2025-05-06 07:50:50.6668 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 07:50:58.6855 INFO Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 07:50:58.7975 INFO Executed DbCommand (27ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 07:50:58.9049 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:50:58.9428 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:50:58.9428 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:50:58.9428 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:50:58.9428 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:50:58.9428 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:50:58.9428 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:50:58.9504 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:50:58.9504 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:51:00.4672 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 07:51:00.4831 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 07:51:02.0815 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 07:51:11.9587 INFO Executed DbCommand (2ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 07:51:11.9679 INFO Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 07:51:12.1088 INFO Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
2025-05-06 07:51:12.1382 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 07:51:12.1382 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 07:51:12.1382 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:51:12.1382 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:51:12.1382 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:51:12.1382 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:51:12.1382 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:51:12.1382 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:51:12.1382 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:51:12.1537 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:51:12.1537 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:51:13.6655 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 07:51:13.6655 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 07:52:51.8835 INFO Now listening on: http://localhost:5062 
2025-05-06 07:52:51.9793 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 07:52:51.9793 INFO Hosting environment: Development 
2025-05-06 07:52:51.9793 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 07:53:11.0050 INFO Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 07:53:11.0978 INFO Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 07:53:11.2036 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:53:11.2342 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:53:11.2342 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:53:11.2342 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:53:11.2342 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:53:11.2342 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:53:11.2342 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:53:11.2342 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:53:11.2342 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:53:12.3684 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 07:53:12.3864 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 07:53:13.8518 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 07:53:22.0391 INFO Executed DbCommand (2ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 07:53:22.0537 INFO Executed DbCommand (4ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 07:53:22.1717 INFO Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-06 07:53:22.2292 INFO Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
2025-05-06 07:53:22.2698 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 07:53:22.2698 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 07:53:22.2812 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:53:22.2812 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:53:22.2812 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:53:22.2812 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:53:22.2812 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:53:22.2812 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:53:22.2812 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:53:22.2812 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:53:22.2812 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:53:23.5432 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 07:53:23.5467 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 07:54:46.1100 INFO Now listening on: http://localhost:5062 
2025-05-06 07:54:46.2070 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 07:54:46.2070 INFO Hosting environment: Development 
2025-05-06 07:54:46.2070 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 07:54:59.7575 INFO Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 07:54:59.8406 INFO Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 07:54:59.9304 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:54:59.9611 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:54:59.9611 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:54:59.9611 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:54:59.9611 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:54:59.9611 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:54:59.9661 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:54:59.9661 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:54:59.9661 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:55:13.6307 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 07:55:13.6481 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 07:58:36.7972 INFO Now listening on: http://localhost:5062 
2025-05-06 07:58:36.8757 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 07:58:36.8757 INFO Hosting environment: Development 
2025-05-06 07:58:36.8757 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 07:58:40.1653 INFO Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 07:58:40.2495 INFO Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 07:58:40.3371 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:58:40.3678 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:58:40.3678 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:58:40.3678 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:58:40.3678 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:58:40.3678 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:58:40.3678 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:58:40.3727 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:58:40.3727 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:58:42.0932 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 07:58:42.1130 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 07:58:44.3170 INFO Executed DbCommand (4ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 07:58:56.8475 INFO Executed DbCommand (2ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 07:58:56.8607 INFO Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 07:58:57.0030 INFO Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
2025-05-06 07:58:57.0323 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 07:58:57.0323 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 07:58:57.0323 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:58:57.0449 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:58:57.0449 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:58:57.0449 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:58:57.0449 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:58:57.0449 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:58:57.0449 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:58:57.0449 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:58:57.0449 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 07:58:58.3623 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 07:58:58.3623 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 08:02:52.5202 INFO Executed DbCommand (4ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 08:02:59.8850 INFO Executed DbCommand (2ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 08:02:59.8850 INFO Executed DbCommand (1ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 08:02:59.8931 INFO Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
2025-05-06 08:02:59.9050 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 08:02:59.9050 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 08:02:59.9050 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:02:59.9050 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:02:59.9050 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:02:59.9050 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:02:59.9050 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:02:59.9050 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:02:59.9050 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:02:59.9050 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:02:59.9050 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:03:57.8808 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 08:03:57.8808 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 08:03:59.6357 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 08:04:09.9360 INFO Executed DbCommand (2ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 08:04:09.9360 INFO Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 08:04:09.9360 INFO Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
2025-05-06 08:04:09.9575 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 08:04:09.9575 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 08:04:09.9575 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:04:09.9575 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:04:09.9662 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:04:09.9662 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:04:09.9662 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:04:09.9662 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:04:09.9662 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:04:09.9662 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:04:09.9662 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:07:24.4971 INFO Now listening on: http://localhost:5062 
2025-05-06 08:07:24.5719 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 08:07:24.5719 INFO Hosting environment: Development 
2025-05-06 08:07:24.5719 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 08:07:35.0261 INFO Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 08:07:35.1193 INFO Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 08:07:35.2093 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:07:35.2421 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:07:35.2421 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:07:35.2421 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:07:35.2421 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:07:35.2421 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:07:35.2421 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:07:35.2421 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:07:35.2472 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:07:40.8972 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 08:07:40.9107 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 08:08:25.4487 INFO Executed DbCommand (4ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 08:08:33.8674 INFO Executed DbCommand (3ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 08:08:33.8774 INFO Executed DbCommand (3ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 08:08:34.0134 INFO Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
2025-05-06 08:08:34.0421 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 08:08:34.0421 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 08:08:34.0502 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:08:34.0502 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:08:34.0502 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:08:34.0502 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:08:34.0502 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:08:34.0502 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:08:34.0502 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:08:34.0502 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:08:34.0502 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:08:58.6199 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 08:08:58.6238 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 08:09:03.7691 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 08:09:03.7691 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 08:12:00.0615 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 08:12:00.0615 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 08:12:14.9622 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 08:12:14.9721 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY 
2025-05-06 08:12:14.9721 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:12:14.9721 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:12:14.9721 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:12:14.9815 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:12:14.9815 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:12:14.9815 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:12:16.7412 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 08:12:16.7412 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 08:12:23.0148 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 08:12:23.0148 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 08:12:23.0148 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:12:23.0148 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:12:23.0148 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:12:23.0148 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:12:23.0148 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:12:23.0148 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:12:23.0281 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:12:23.0281 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:12:23.0281 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:13:04.7879 INFO Now listening on: http://localhost:5062 
2025-05-06 08:13:04.8771 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 08:13:04.8771 INFO Hosting environment: Development 
2025-05-06 08:13:04.8771 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 08:13:08.1766 INFO Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 08:13:08.2747 INFO Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 08:13:08.3675 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:13:08.3995 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:13:08.3995 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:13:08.3995 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:13:08.3995 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:13:08.4038 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:13:08.4038 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:13:08.4038 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:13:08.4038 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:13:18.8338 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 08:13:18.8469 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 08:13:21.7181 INFO Executed DbCommand (4ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 08:13:31.9668 INFO Executed DbCommand (2ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 08:13:31.9668 INFO Executed DbCommand (1ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 08:13:32.1109 INFO Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
2025-05-06 08:13:32.1444 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 08:13:32.1444 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 08:13:32.1536 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:13:32.1536 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:13:32.1536 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:13:32.1536 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:13:32.1536 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:13:32.1536 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:13:32.1536 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:13:32.1536 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:13:32.1536 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:13:34.4519 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 08:13:34.4519 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 08:15:31.0864 INFO Now listening on: http://localhost:5062 
2025-05-06 08:15:31.1602 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 08:15:31.1602 INFO Hosting environment: Development 
2025-05-06 08:15:31.1602 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 08:15:34.2656 INFO Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 08:15:34.3483 INFO Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 08:15:34.4366 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:15:34.4666 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:15:34.4666 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:15:34.4666 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:15:34.4666 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:15:34.4666 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:15:34.4666 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:15:34.4666 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:15:34.4666 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:15:37.1029 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 08:15:37.1192 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 08:15:39.4947 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 08:15:56.6982 INFO Executed DbCommand (2ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 08:15:56.7059 INFO Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 08:15:56.8379 INFO Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
2025-05-06 08:15:56.8695 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 08:15:56.8724 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 08:15:56.8724 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:15:56.8724 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:15:56.8724 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:15:56.8724 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:15:56.8724 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:15:56.8724 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:15:56.8724 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:15:56.8724 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:15:56.8724 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:18:27.7642 INFO Now listening on: http://localhost:5062 
2025-05-06 08:18:27.8371 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 08:18:27.8371 INFO Hosting environment: Development 
2025-05-06 08:18:27.8371 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 08:18:31.1762 INFO Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 08:18:31.2818 INFO Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 08:18:31.4167 INFO Executed DbCommand (7ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:18:31.4751 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:18:31.4751 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:18:31.4751 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:18:31.4751 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:18:31.4751 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:18:31.4751 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:18:31.4824 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:18:31.4824 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:18:33.6642 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 08:18:33.6785 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 08:18:37.1207 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 08:18:52.0272 INFO Executed DbCommand (2ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 08:18:52.0377 INFO Executed DbCommand (1ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 08:18:52.1875 INFO Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
2025-05-06 08:18:52.2172 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 08:18:52.2172 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 08:18:52.2172 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:18:52.2172 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:18:52.2172 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:18:52.2172 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:18:52.2172 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:18:52.2172 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:18:52.2172 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:18:52.2172 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:18:52.2318 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:18:54.2173 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 08:18:54.2173 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 08:20:35.1344 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 08:20:35.1471 INFO Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY 
2025-05-06 08:20:35.1536 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:20:35.1536 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:20:35.1536 INFO Executed DbCommand (10ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:20:35.1703 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:20:35.1703 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:20:35.1703 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:20:38.8380 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 08:20:38.8427 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 08:22:15.4226 INFO Now listening on: http://localhost:5062 
2025-05-06 08:22:15.5335 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 08:22:15.5335 INFO Hosting environment: Development 
2025-05-06 08:22:15.5335 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 08:22:18.7871 INFO Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 08:22:18.8735 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 08:22:18.9635 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:22:18.9946 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:22:18.9946 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:22:18.9946 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:22:18.9980 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:22:18.9980 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:22:18.9980 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:22:18.9980 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:22:18.9980 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:22:36.3866 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 08:22:36.4054 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 08:22:38.5545 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 08:22:48.3596 INFO Executed DbCommand (2ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 08:22:48.3596 INFO Executed DbCommand (1ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 08:22:48.5006 INFO Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
2025-05-06 08:22:48.5300 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 08:22:48.5300 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 08:22:48.5300 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:22:48.5300 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:22:48.5300 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:22:48.5300 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:22:48.5300 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:22:48.5440 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:22:48.5440 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:22:48.5440 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:22:48.5440 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 08:22:49.9169 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 08:22:49.9210 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 08:27:25.8606 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 08:27:41.6780 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-06 08:28:01.9994 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-06 08:28:06.6547 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 08:28:06.6547 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[TourId] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 08:28:06.6547 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-06 08:28:10.2116 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-06 08:28:23.3699 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 08:28:23.3723 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[TourId] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 08:28:23.3723 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-06 08:28:27.3963 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName]
FROM [Categories] AS [c] 
2025-05-06 08:29:46.0313 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 09:13:04.8257 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 09:13:04.8647 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-06 09:13:04.8857 INFO Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-06 09:13:04.9332 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-06 09:13:04.9390 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 09:13:04.9390 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-06 09:13:04.9390 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-06 09:13:04.9518 INFO Applying migration '20250506021245_AddTourScheduleTable'. 
2025-05-06 09:13:04.9750 INFO Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TourSchedules] (
    [Id] int NOT NULL IDENTITY,
    [TourId] int NOT NULL,
    [DepartureDate] datetime2 NOT NULL,
    [ReturnDate] datetime2 NOT NULL,
    [RemainingSlot] int NOT NULL,
    CONSTRAINT [PK_TourSchedules] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TourSchedules_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE
); 
2025-05-06 09:13:04.9750 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_TourSchedules_TourId] ON [TourSchedules] ([TourId]); 
2025-05-06 09:13:04.9750 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250506021245_AddTourScheduleTable', N'9.0.4'); 
2025-05-06 09:13:04.9750 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result 
2025-05-06 09:14:00.2906 INFO Now listening on: http://localhost:5062 
2025-05-06 09:14:00.3658 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 09:14:00.3658 INFO Hosting environment: Development 
2025-05-06 09:14:00.3658 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 09:14:27.7638 INFO Executed DbCommand (41ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 09:14:27.8990 INFO Executed DbCommand (64ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 09:14:27.9929 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:14:28.0325 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:14:28.0325 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:14:28.0325 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:14:28.0325 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:14:28.0325 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:14:28.0325 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:14:28.0325 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:14:28.0325 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:14:29.6250 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 09:14:29.6403 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:16:22.7282 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 09:16:22.7317 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:16:24.5578 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__id_0 
2025-05-06 09:16:24.5602 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:19:07.8788 INFO Now listening on: http://localhost:5062 
2025-05-06 09:19:07.9537 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 09:19:07.9537 INFO Hosting environment: Development 
2025-05-06 09:19:07.9537 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 09:19:11.6678 INFO Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 09:19:11.7470 INFO Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 09:19:11.8443 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:19:11.8735 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:19:11.8735 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:19:11.8735 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:19:11.8735 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:19:11.8735 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:19:11.8735 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:19:11.8735 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:19:11.8735 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:19:13.1552 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 09:19:13.1744 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:19:36.7866 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 09:19:36.8049 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:21:48.2780 INFO Now listening on: http://localhost:5062 
2025-05-06 09:21:48.3480 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 09:21:48.3480 INFO Hosting environment: Development 
2025-05-06 09:21:48.3480 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 09:21:51.5109 INFO Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 09:21:51.5959 INFO Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 09:21:51.6861 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:21:51.7151 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:21:51.7161 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:21:51.7161 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:21:51.7161 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:21:51.7161 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:21:51.7161 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:21:51.7161 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:21:51.7161 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:21:53.9620 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 09:21:53.9993 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:23:48.4890 INFO Now listening on: http://localhost:5062 
2025-05-06 09:23:48.5575 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 09:23:48.5575 INFO Hosting environment: Development 
2025-05-06 09:23:48.5575 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 09:23:53.1199 INFO Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 09:23:53.2011 INFO Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 09:23:53.2983 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:23:53.3262 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:23:53.3262 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:23:53.3262 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:23:53.3262 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:23:53.3262 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:23:53.3262 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:23:53.3262 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:23:53.3262 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:23:56.3709 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 09:23:56.3945 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:23:58.1147 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[Id] = @__p_0 
2025-05-06 09:23:58.1814 INFO Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TourSchedules] SET [RemainingSlot] = @p0
OUTPUT 1
WHERE [Id] = @p1; 
2025-05-06 09:23:58.2019 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 09:23:58.2019 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 09:23:58.2019 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:23:58.2019 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:23:58.2019 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:23:58.2019 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:23:58.2019 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:23:58.2019 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:23:58.2019 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:23:58.2019 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:23:58.2019 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:24:05.0268 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 09:24:05.0302 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:28:55.3876 INFO Now listening on: http://localhost:5062 
2025-05-06 09:28:55.5109 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 09:28:55.5109 INFO Hosting environment: Development 
2025-05-06 09:28:55.5109 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 09:28:58.7965 INFO Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 09:28:58.8900 INFO Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 09:28:58.9936 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:28:59.0254 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:28:59.0254 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:28:59.0254 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:28:59.0285 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:28:59.0285 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:28:59.0285 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:28:59.0285 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:28:59.0285 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:29:00.8185 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 09:29:00.8442 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:29:02.6959 INFO Executed DbCommand (5ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 09:29:05.8676 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 09:29:05.8676 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:29:06.8265 INFO Executed DbCommand (0ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 09:29:15.1347 INFO Executed DbCommand (2ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 09:29:15.1445 INFO Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 09:29:15.2683 INFO Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
2025-05-06 09:29:15.2963 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 09:29:15.2963 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 09:29:15.2963 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:29:15.2963 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:29:15.2963 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:29:15.3168 INFO Executed DbCommand (5ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:29:15.3168 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:29:15.3168 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:29:15.3168 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:29:15.3168 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:29:15.3168 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:29:17.3004 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 09:29:17.3004 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:30:18.9931 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 09:30:18.9971 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:30:25.0053 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 09:30:34.6996 INFO Executed DbCommand (2ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 09:30:34.7034 INFO Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 09:30:34.7160 INFO Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-06 09:30:34.7160 INFO Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
2025-05-06 09:30:34.7383 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 09:30:34.7383 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 09:30:34.7383 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:30:34.7383 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:30:34.7383 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:30:34.7473 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:30:34.7473 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:30:34.7473 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:30:34.7473 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:30:34.7473 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:30:34.7473 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:30:36.5531 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 09:30:36.5531 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:35:27.4221 INFO Now listening on: http://localhost:5062 
2025-05-06 09:35:27.4985 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 09:35:27.4985 INFO Hosting environment: Development 
2025-05-06 09:35:27.4985 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 09:35:31.4190 INFO Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 09:35:31.5005 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 09:35:31.5938 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:35:31.6240 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:35:31.6240 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:35:31.6240 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:35:31.6240 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:35:31.6240 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:35:31.6240 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:35:31.6240 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:35:31.6240 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:35:33.1361 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 09:35:33.1623 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:35:34.8493 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 09:35:42.2938 INFO Executed DbCommand (4ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 09:35:42.3087 INFO Executed DbCommand (6ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-06 09:35:42.3166 INFO Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 09:35:42.4672 ERROR Failed executing DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [TourSchedules] SET [RemainingSlot] = @p10
OUTPUT 1
WHERE [Id] = @p11; 
2025-05-06 09:35:42.4982 ERROR An exception occurred in the database while saving changes for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'TourScheduleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:16f82b5b-9646-4766-8e7f-573f3b851ef6
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'TourScheduleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:16f82b5b-9646-4766-8e7f-573f3b851ef6
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2025-05-06 09:41:00.8275 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 09:41:00.8484 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-06 09:41:00.8795 INFO Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-06 09:41:00.9312 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-06 09:41:00.9364 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 09:41:00.9364 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-06 09:41:00.9364 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-06 09:41:00.9516 INFO Applying migration '20250506024025_InitDb1'. 
2025-05-06 09:41:00.9851 ERROR Failed executing DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Categories] (
    [CategoryId] int NOT NULL IDENTITY,
    [CategoryName] nvarchar(200) NOT NULL,
    CONSTRAINT [PK_Categories] PRIMARY KEY ([CategoryId])
); 
2025-05-06 09:41:58.3352 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 09:41:58.3665 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-06 09:41:58.3764 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-06 09:42:31.6812 INFO Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 09:42:31.7024 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-06 09:42:31.7275 INFO Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-06 09:42:31.7733 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-06 09:42:31.7787 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 09:42:31.7787 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-06 09:42:31.7787 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-06 09:42:31.7787 INFO Applying migration '20250506024212_Add_TourScheduleId_To_Booking'. 
2025-05-06 09:42:31.8149 ERROR Failed executing DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Categories] (
    [CategoryId] int NOT NULL IDENTITY,
    [CategoryName] nvarchar(200) NOT NULL,
    CONSTRAINT [PK_Categories] PRIMARY KEY ([CategoryId])
); 
2025-05-06 09:44:39.5778 INFO Executed DbCommand (99ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [TourBookingDB]; 
2025-05-06 09:44:39.6234 INFO Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [TourBookingDB] SET READ_COMMITTED_SNAPSHOT ON;
END; 
2025-05-06 09:44:39.6234 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 09:44:39.6234 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-06 09:44:39.6569 INFO Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-06 09:44:39.6978 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-06 09:44:39.7028 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 09:44:39.7028 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-06 09:44:39.7028 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-06 09:44:39.7160 INFO Applying migration '20250506024426_InitDb1'. 
2025-05-06 09:44:39.7351 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Categories] (
    [CategoryId] int NOT NULL IDENTITY,
    [CategoryName] nvarchar(200) NOT NULL,
    CONSTRAINT [PK_Categories] PRIMARY KEY ([CategoryId])
); 
2025-05-06 09:44:39.7351 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [UserId] int NOT NULL IDENTITY,
    [Email] nvarchar(200) NOT NULL,
    [FullName] nvarchar(200) NOT NULL,
    [Phone] nvarchar(200) NOT NULL,
    [Address] nvarchar(200) NOT NULL,
    [Password] nvarchar(200) NOT NULL,
    [Role] nvarchar(200) NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([UserId])
); 
2025-05-06 09:44:39.7351 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Tours] (
    [TourId] int NOT NULL IDENTITY,
    [Title] nvarchar(200) NOT NULL,
    [Capacity] int NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [AdultPrice] decimal(18,2) NOT NULL,
    [ChildPrice] decimal(18,2) NOT NULL,
    [Transport] nvarchar(200) NOT NULL,
    [Departures] nvarchar(max) NOT NULL,
    [Destination] nvarchar(200) NOT NULL,
    [Duration] nvarchar(200) NOT NULL,
    [Itinerary] nvarchar(2000) NOT NULL,
    [CategoryId] int NOT NULL,
    CONSTRAINT [PK_Tours] PRIMARY KEY ([TourId]),
    CONSTRAINT [FK_Tours_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([CategoryId]) ON DELETE NO ACTION
); 
2025-05-06 09:44:39.7351 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Images] (
    [ImageId] int NOT NULL IDENTITY,
    [Url] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NOT NULL,
    [TourId] int NOT NULL,
    [DayNumber] int NULL,
    CONSTRAINT [PK_Images] PRIMARY KEY ([ImageId]),
    CONSTRAINT [FK_Images_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE
); 
2025-05-06 09:44:39.7351 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TourSchedules] (
    [Id] int NOT NULL IDENTITY,
    [TourId] int NOT NULL,
    [DepartureDate] datetime2 NOT NULL,
    [ReturnDate] datetime2 NOT NULL,
    [RemainingSlot] int NOT NULL,
    CONSTRAINT [PK_TourSchedules] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TourSchedules_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE
); 
2025-05-06 09:44:39.7351 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Bookings] (
    [BookingId] int NOT NULL IDENTITY,
    [BookingDate] datetime2 NOT NULL,
    [AdultQuantity] int NOT NULL,
    [ChildQuantity] int NOT NULL,
    [TotalPrice] decimal(18,2) NOT NULL,
    [SpecialRequest] nvarchar(200) NULL,
    [TourId] int NOT NULL,
    [UserId] int NOT NULL,
    [DepartureDate] datetime2 NOT NULL,
    [TourScheduleId] int NULL,
    [CategoryId] int NULL,
    CONSTRAINT [PK_Bookings] PRIMARY KEY ([BookingId]),
    CONSTRAINT [FK_Bookings_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([CategoryId]),
    CONSTRAINT [FK_Bookings_TourSchedules_TourScheduleId] FOREIGN KEY ([TourScheduleId]) REFERENCES [TourSchedules] ([Id]),
    CONSTRAINT [FK_Bookings_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE,
    CONSTRAINT [FK_Bookings_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([UserId]) ON DELETE CASCADE
); 
2025-05-06 09:44:39.7351 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_CategoryId] ON [Bookings] ([CategoryId]); 
2025-05-06 09:44:39.7351 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_TourId] ON [Bookings] ([TourId]); 
2025-05-06 09:44:39.7351 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_TourScheduleId] ON [Bookings] ([TourScheduleId]); 
2025-05-06 09:44:39.7351 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_UserId] ON [Bookings] ([UserId]); 
2025-05-06 09:44:39.7351 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Images_TourId] ON [Images] ([TourId]); 
2025-05-06 09:44:39.7471 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Tours_CategoryId] ON [Tours] ([CategoryId]); 
2025-05-06 09:44:39.7471 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_TourSchedules_TourId] ON [TourSchedules] ([TourId]); 
2025-05-06 09:44:39.7471 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250506024426_InitDb1', N'9.0.4'); 
2025-05-06 09:44:39.7471 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result 
2025-05-06 09:44:51.6086 INFO Now listening on: http://localhost:5062 
2025-05-06 09:44:51.6905 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 09:44:51.6905 INFO Hosting environment: Development 
2025-05-06 09:44:51.6905 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 09:44:54.9286 INFO Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 09:46:54.9889 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 09:46:55.0682 INFO Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 09:46:55.1891 INFO Executed DbCommand (13ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:46:55.2224 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:46:55.2224 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:46:55.2224 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:46:55.2224 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:46:55.2224 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:46:55.2224 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:46:55.2224 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:46:55.2224 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:46:57.3159 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 09:46:57.3439 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:47:01.5716 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 09:47:01.5716 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:47:03.4405 INFO Executed DbCommand (5ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 09:47:10.1087 INFO Executed DbCommand (2ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 09:47:10.1087 INFO Executed DbCommand (4ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-06 09:47:10.1301 INFO Executed DbCommand (3ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 09:47:10.2424 INFO Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-06 09:47:10.3090 INFO Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [TourSchedules] SET [RemainingSlot] = @p10
OUTPUT 1
WHERE [Id] = @p11; 
2025-05-06 09:47:10.3320 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 09:47:10.3320 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 09:47:10.3320 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:47:10.3413 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:47:10.3413 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:47:10.3413 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:47:10.3413 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:47:10.3413 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:47:10.3413 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:47:10.3413 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:47:10.3413 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:47:12.2649 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 09:47:12.2649 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:47:19.0508 INFO Executed DbCommand (1ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 09:47:29.4330 INFO Executed DbCommand (0ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 09:47:29.4348 INFO Executed DbCommand (1ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-06 09:47:29.4348 INFO Executed DbCommand (1ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 09:47:29.4348 INFO Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [TourSchedules] SET [RemainingSlot] = @p10
OUTPUT 1
WHERE [Id] = @p11; 
2025-05-06 09:47:29.4511 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 09:47:29.4511 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 09:47:29.4511 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:47:29.4511 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:47:29.4511 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:47:29.4511 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:47:29.4511 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:47:29.4511 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:47:29.4511 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:47:29.4511 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:47:29.4511 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:47:30.7749 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 09:47:30.7749 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:47:32.9302 INFO Executed DbCommand (0ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 09:47:45.7592 INFO Executed DbCommand (8ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 09:47:45.7631 INFO Executed DbCommand (3ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-06 09:47:45.7631 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 09:54:27.3351 INFO Now listening on: http://localhost:5062 
2025-05-06 09:54:27.4055 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 09:54:27.4055 INFO Hosting environment: Development 
2025-05-06 09:54:27.4055 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 09:54:30.7703 INFO Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 09:54:30.8522 INFO Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 09:54:30.9429 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:54:30.9725 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:54:30.9725 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:54:30.9725 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:54:30.9725 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:54:30.9725 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:54:30.9725 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:54:30.9725 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:54:30.9725 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:54:32.7950 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 09:54:32.8228 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:54:35.5376 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 09:54:37.7067 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 09:54:37.7067 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:56:48.2555 INFO Now listening on: http://localhost:5062 
2025-05-06 09:56:48.3335 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 09:56:48.3335 INFO Hosting environment: Development 
2025-05-06 09:56:48.3335 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 09:59:32.9512 INFO Now listening on: http://localhost:5062 
2025-05-06 09:59:33.0315 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 09:59:33.0315 INFO Hosting environment: Development 
2025-05-06 09:59:33.0315 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 09:59:50.0125 INFO Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 09:59:50.0125 INFO Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 09:59:50.1062 INFO Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 09:59:50.1062 INFO Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 09:59:50.2301 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:59:50.2301 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:59:50.2679 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:59:50.2679 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:59:50.2679 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:59:50.2679 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:59:50.2679 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:59:50.2679 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:59:50.2679 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:59:50.2679 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:59:50.2679 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:59:50.2679 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:59:50.2679 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:59:50.2679 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:59:50.2679 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:59:50.2679 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:59:50.2679 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:59:50.2679 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 09:59:54.2141 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 09:59:54.2428 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 09:59:55.8743 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 10:00:11.5841 INFO Executed DbCommand (3ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 10:00:11.5987 INFO Executed DbCommand (3ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-06 10:00:11.6117 INFO Executed DbCommand (5ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 10:00:11.7818 INFO Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [TourSchedules] SET [RemainingSlot] = @p10
OUTPUT 1
WHERE [Id] = @p11; 
2025-05-06 10:00:11.8155 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 10:00:11.8155 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 10:00:11.8155 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:00:11.8256 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:00:11.8256 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:00:11.8256 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:00:11.8256 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:00:11.8256 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:00:11.8256 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:00:11.8256 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:00:11.8256 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:00:15.8857 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:00:15.8888 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:00:18.6333 INFO Executed DbCommand (1ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 10:00:31.3581 INFO Executed DbCommand (1ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 10:00:31.3581 INFO Executed DbCommand (0ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-06 10:00:31.3581 INFO Executed DbCommand (1ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 10:00:41.1645 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 10:00:41.1645 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 10:00:41.1687 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:00:41.1687 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:00:41.1687 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:00:41.1687 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:00:41.1687 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:00:41.1687 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:00:41.1687 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:00:41.1687 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:00:41.1687 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:00:53.0744 INFO Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:00:53.0778 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:01:02.7957 INFO Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:01:02.7957 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:01:22.5797 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 10:07:14.1567 INFO Now listening on: http://localhost:5062 
2025-05-06 10:07:14.2219 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 10:07:14.2219 INFO Hosting environment: Development 
2025-05-06 10:07:14.2219 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 10:07:17.4059 INFO Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 10:07:17.4821 INFO Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 10:07:17.5663 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:07:17.5972 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:07:17.5972 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:07:17.5972 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:07:17.5972 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:07:17.5972 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:07:17.5972 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:07:17.5972 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:07:17.5972 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:07:19.5718 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:07:19.6001 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:07:21.8235 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 10:07:21.8407 INFO Executed DbCommand (6ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 10:10:11.3213 INFO Now listening on: http://localhost:5062 
2025-05-06 10:10:11.4092 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 10:10:11.4092 INFO Hosting environment: Development 
2025-05-06 10:10:11.4092 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 10:10:36.9945 INFO Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 10:10:37.0749 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 10:10:37.1653 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:10:37.1937 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:10:37.1937 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:10:37.1937 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:10:37.1937 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:10:37.1937 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:10:37.1937 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:10:37.1937 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:10:37.1937 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:10:41.6333 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:10:41.6591 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:10:43.0349 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 10:10:43.0467 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 10:12:12.8643 INFO Executed DbCommand (9ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 10:12:12.8769 INFO Executed DbCommand (3ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-06 10:12:12.8769 INFO Executed DbCommand (3ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 10:12:13.0408 INFO Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [TourSchedules] SET [RemainingSlot] = @p10
OUTPUT 1
WHERE [Id] = @p11; 
2025-05-06 10:12:13.0795 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 10:12:13.0795 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 10:12:13.0795 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:12:13.0795 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:12:13.0914 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:12:13.0914 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:12:13.0914 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:12:13.0914 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:12:13.0914 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:12:13.0914 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:12:13.0914 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:12:16.5807 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:12:16.5807 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:12:18.7094 INFO Executed DbCommand (4ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 10:12:18.7094 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 10:13:04.3613 INFO Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:13:04.3613 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:13:06.7320 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:13:06.7320 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:13:50.0262 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 10:13:50.0303 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 10:14:02.8486 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:14:02.8486 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:15:50.2581 INFO Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:15:50.2581 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:15:52.0718 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:15:52.0718 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:15:52.5847 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:15:52.5847 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:15:53.5896 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:15:53.5921 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:16:01.2192 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:16:01.2192 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:16:11.6127 INFO Now listening on: http://localhost:5062 
2025-05-06 10:16:11.6922 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 10:16:11.6922 INFO Hosting environment: Development 
2025-05-06 10:16:11.6922 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 10:17:19.2322 INFO Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 10:17:19.3114 INFO Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 10:17:19.4067 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:17:19.4359 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:17:19.4359 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:17:19.4359 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:17:19.4359 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:17:19.4359 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:17:19.4359 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:17:19.4359 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:17:19.4359 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:17:21.1193 INFO Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:17:21.1440 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:17:29.1868 INFO Executed DbCommand (10ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 10:17:29.1868 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 10:17:32.4436 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:17:32.4436 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:18:05.5664 INFO Executed DbCommand (1ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 10:18:05.5664 INFO Executed DbCommand (0ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 10:18:24.0671 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:18:24.0671 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:18:54.4954 INFO Executed DbCommand (9ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 10:18:54.4991 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 10:21:02.2043 INFO Now listening on: http://localhost:5062 
2025-05-06 10:21:02.2815 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 10:21:02.2815 INFO Hosting environment: Development 
2025-05-06 10:21:02.2815 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 10:21:06.9337 INFO Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 10:21:07.0193 INFO Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 10:21:07.1103 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:21:07.1408 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:21:07.1408 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:21:07.1408 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:21:07.1408 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:21:07.1408 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:21:07.1408 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:21:07.1408 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:21:07.1408 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:21:08.6966 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:21:08.7340 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:21:10.9783 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 10:21:10.9897 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 10:22:46.4979 INFO Now listening on: http://localhost:5062 
2025-05-06 10:22:46.5834 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 10:22:46.5834 INFO Hosting environment: Development 
2025-05-06 10:22:46.5834 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 10:22:54.5901 INFO Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 10:22:54.6903 INFO Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 10:22:54.8055 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:22:54.8413 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:22:54.8413 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:22:54.8413 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:22:54.8413 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:22:54.8413 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:22:54.8413 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:22:54.8413 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:22:54.8413 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:25:51.5123 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:25:51.5409 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:26:01.0330 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 10:26:01.0443 INFO Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY 
2025-05-06 10:26:01.0443 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:26:01.0443 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:26:01.0443 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:26:01.0443 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:26:01.0443 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:26:01.0443 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:26:03.9789 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:26:03.9789 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:26:08.3054 INFO Executed DbCommand (9ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 10:26:08.3150 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 10:26:26.8763 INFO Executed DbCommand (7ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 10:26:26.8763 INFO Executed DbCommand (4ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-06 10:26:26.8949 INFO Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 10:26:27.0421 INFO Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [TourSchedules] SET [RemainingSlot] = @p10
OUTPUT 1
WHERE [Id] = @p11; 
2025-05-06 10:26:27.0729 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 10:26:27.0729 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 10:26:27.0823 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:26:27.0823 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:26:27.0823 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:26:27.0823 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:26:27.0823 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:26:27.0823 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:26:27.0823 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:26:27.0823 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:26:27.0823 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:28:16.4147 INFO Now listening on: http://localhost:5062 
2025-05-06 10:28:16.4900 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 10:28:16.4900 INFO Hosting environment: Development 
2025-05-06 10:28:16.4900 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 10:28:19.7642 INFO Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 10:28:19.8544 INFO Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 10:28:19.9433 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:28:19.9718 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:28:19.9718 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:28:19.9718 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:28:19.9718 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:28:19.9718 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:28:19.9718 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:28:19.9718 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:28:19.9820 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:28:21.8401 INFO Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:28:21.8666 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:28:23.5424 INFO Executed DbCommand (10ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 10:28:23.5552 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 10:28:41.3365 INFO Executed DbCommand (2ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 10:28:41.3466 INFO Executed DbCommand (2ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-06 10:28:41.3562 INFO Executed DbCommand (3ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 10:28:41.5315 INFO Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [TourSchedules] SET [RemainingSlot] = @p10
OUTPUT 1
WHERE [Id] = @p11; 
2025-05-06 10:28:41.5634 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 10:28:41.5634 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 10:28:41.5634 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:28:41.5634 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:28:41.5634 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:28:41.5634 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:28:41.5634 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:28:41.5761 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:28:41.5761 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:28:41.5761 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:28:41.5761 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:31:08.9979 INFO Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:31:08.9979 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:31:12.2240 INFO Executed DbCommand (4ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 10:31:12.2240 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 10:31:32.4931 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 10:31:39.1118 INFO Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 10:33:37.3158 INFO Now listening on: http://localhost:5062 
2025-05-06 10:33:37.4031 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 10:33:37.4031 INFO Hosting environment: Development 
2025-05-06 10:33:37.4031 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 10:33:48.2101 INFO Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 10:33:48.2989 INFO Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 10:33:48.3869 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:33:48.4158 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:33:48.4158 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:33:48.4158 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:33:48.4158 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:33:48.4158 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:33:48.4194 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:33:48.4194 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:33:48.4194 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:33:49.3964 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:33:49.4220 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:33:54.3527 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 10:34:13.9908 INFO Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[BookingId] = @__p_0 
2025-05-06 10:34:14.0672 INFO Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Bookings]
OUTPUT 1
WHERE [BookingId] = @p0; 
2025-05-06 10:34:14.0902 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 10:34:17.0400 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[BookingId] = @__p_0 
2025-05-06 10:34:17.0400 INFO Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Bookings]
OUTPUT 1
WHERE [BookingId] = @p0; 
2025-05-06 10:34:17.0535 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 10:35:41.2822 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 10:36:17.1655 INFO Now listening on: http://localhost:5062 
2025-05-06 10:36:17.2812 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 10:36:17.2812 INFO Hosting environment: Development 
2025-05-06 10:36:17.2812 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 10:36:24.5643 INFO Executed DbCommand (40ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 10:39:15.5529 INFO Now listening on: http://localhost:5062 
2025-05-06 10:39:15.6519 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 10:39:15.6519 INFO Hosting environment: Development 
2025-05-06 10:39:15.6519 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 10:39:18.9197 INFO Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 10:39:19.0056 INFO Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 10:39:19.0990 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:39:19.1306 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:39:19.1306 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:39:19.1306 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:39:19.1306 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:39:19.1306 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:39:19.1306 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:39:19.1306 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:39:19.1306 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:39:20.4643 INFO Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:39:20.4989 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:39:24.2779 INFO Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 10:39:25.3398 INFO Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b].[TourScheduleId] = [t0].[Id]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 10:40:21.5075 INFO Now listening on: http://localhost:5062 
2025-05-06 10:40:21.5871 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 10:40:21.5871 INFO Hosting environment: Development 
2025-05-06 10:40:21.5871 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 10:40:28.1098 INFO Executed DbCommand (42ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 10:40:30.0326 INFO Executed DbCommand (28ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b].[TourScheduleId] = [t0].[Id]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 10:41:57.5737 INFO Now listening on: http://localhost:5062 
2025-05-06 10:41:57.6682 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 10:41:57.6690 INFO Hosting environment: Development 
2025-05-06 10:41:57.6690 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 10:42:01.2213 INFO Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 10:42:01.3091 INFO Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 10:42:01.4063 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:42:01.4379 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:42:01.4379 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:42:01.4379 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:42:01.4379 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:42:01.4379 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:42:01.4379 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:42:01.4379 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:42:01.4379 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:42:13.3989 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:42:13.4231 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:42:18.2854 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 10:42:19.9454 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b].[TourScheduleId] = [t0].[Id]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 10:42:44.2207 INFO Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 10:42:58.3479 INFO Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
LEFT JOIN [TourSchedules] AS [t0] ON [b].[TourScheduleId] = [t0].[Id]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 10:53:48.4039 INFO Now listening on: http://localhost:5062 
2025-05-06 10:53:48.4777 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 10:53:48.4777 INFO Hosting environment: Development 
2025-05-06 10:53:48.4777 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 10:53:51.7665 INFO Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 10:53:51.8491 INFO Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 10:53:51.9364 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:53:51.9646 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:53:51.9658 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:53:51.9658 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:53:51.9658 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:53:51.9658 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:53:51.9658 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:53:51.9658 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:53:51.9658 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:53:53.5113 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:53:53.5364 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:54:00.0510 ERROR Failed executing DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 10:54:00.0861 ERROR An exception occurred while iterating over the results of a query for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'PaymentMethod'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:59cca429-f754-4cb3-bb7f-29b947babea2
Error Number:207,State:1,Class:16 Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'PaymentMethod'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:59cca429-f754-4cb3-bb7f-29b947babea2
Error Number:207,State:1,Class:16
2025-05-06 10:54:00.1352 ERROR An unhandled exception has occurred while executing the request. Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'PaymentMethod'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at TourBookingWeb.Areas.Admin.Controllers.BookingsController.Index() in D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb\Areas\Admin\Controllers\BookingsController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:59cca429-f754-4cb3-bb7f-29b947babea2
Error Number:207,State:1,Class:16
2025-05-06 10:55:07.1308 INFO Now listening on: http://localhost:5062 
2025-05-06 10:55:07.2057 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 10:55:07.2057 INFO Hosting environment: Development 
2025-05-06 10:55:07.2057 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 10:55:11.5592 INFO Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 10:55:11.6458 INFO Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 10:55:11.7411 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:55:11.7723 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:55:11.7723 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:55:11.7723 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:55:11.7723 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:55:11.7723 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:55:11.7723 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:55:11.7723 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:55:11.7723 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:55:14.6965 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:55:14.7410 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:55:18.9218 ERROR Failed executing DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 10:55:18.9437 ERROR An exception occurred while iterating over the results of a query for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'PaymentMethod'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:6ca10fa4-3c81-490d-943f-1367afbf5deb
Error Number:207,State:1,Class:16 Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'PaymentMethod'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:6ca10fa4-3c81-490d-943f-1367afbf5deb
Error Number:207,State:1,Class:16
2025-05-06 10:55:18.9829 ERROR An unhandled exception has occurred while executing the request. Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'PaymentMethod'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at TourBookingWeb.Areas.Admin.Controllers.BookingsController.Index() in D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb\Areas\Admin\Controllers\BookingsController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:6ca10fa4-3c81-490d-943f-1367afbf5deb
Error Number:207,State:1,Class:16
2025-05-06 10:59:18.1891 INFO Now listening on: http://localhost:5062 
2025-05-06 10:59:18.2658 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 10:59:18.2658 INFO Hosting environment: Development 
2025-05-06 10:59:18.2658 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 10:59:31.0066 INFO Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 10:59:31.1067 INFO Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 10:59:31.1968 INFO Executed DbCommand (5ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:59:31.2284 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:59:31.2284 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:59:31.2284 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:59:31.2284 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:59:31.2317 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:59:31.2317 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:59:31.2317 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:59:31.2317 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:59:32.5257 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 10:59:32.5568 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 10:59:33.8259 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 10:59:33.8259 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 10:59:50.9766 INFO Executed DbCommand (1ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 10:59:50.9866 INFO Executed DbCommand (3ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-06 10:59:50.9866 INFO Executed DbCommand (2ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 10:59:51.1799 INFO Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 200), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p12='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [PaymentMethod], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
UPDATE [TourSchedules] SET [RemainingSlot] = @p11
OUTPUT 1
WHERE [Id] = @p12; 
2025-05-06 10:59:51.2163 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 10:59:51.2163 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 10:59:51.2163 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:59:51.2163 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:59:51.2163 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:59:51.2163 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:59:51.2163 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:59:51.2163 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:59:51.2163 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:59:51.2163 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 10:59:51.2321 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:02:52.9172 INFO Now listening on: http://localhost:5062 
2025-05-06 11:02:52.9937 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 11:02:52.9937 INFO Hosting environment: Development 
2025-05-06 11:02:52.9937 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 11:03:02.5581 INFO Executed DbCommand (54ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 11:03:02.6707 INFO Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 11:03:02.7689 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:03:02.8032 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:03:02.8032 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:03:02.8032 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:03:02.8032 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:03:02.8032 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:03:02.8032 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:03:02.8032 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:03:02.8032 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:03:04.3692 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 11:03:04.3962 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 11:03:06.1736 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 11:03:06.1736 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 11:03:10.4249 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 11:03:10.4249 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 11:03:12.6770 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 11:03:12.6770 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 11:03:14.6847 INFO Executed DbCommand (1ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 11:03:14.6860 INFO Executed DbCommand (0ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 11:03:28.4582 INFO Executed DbCommand (4ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 11:03:28.4804 INFO Executed DbCommand (5ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-06 11:03:28.4944 INFO Executed DbCommand (4ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 11:03:28.6725 INFO Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 200), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p12='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [PaymentMethod], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
UPDATE [TourSchedules] SET [RemainingSlot] = @p11
OUTPUT 1
WHERE [Id] = @p12; 
2025-05-06 11:03:28.7048 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 11:03:28.7048 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 11:03:28.7048 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:03:28.7048 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:03:28.7048 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:03:28.7048 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:03:28.7048 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:03:28.7048 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:03:28.7048 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:03:28.7048 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:03:28.7157 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:08:14.6014 INFO Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:08:14.6306 ERROR An exception occurred while iterating over the results of a query for context type 'TourBookingWeb.Data.TourDBContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method723(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method723(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-05-06 11:08:14.6777 ERROR An unhandled exception has occurred while executing the request. System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method723(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at TourBookingWeb.Areas.Admin.Controllers.BookingsController.Index() in D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb\Areas\Admin\Controllers\BookingsController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 11:09:03.9336 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:09:03.9352 ERROR An exception occurred while iterating over the results of a query for context type 'TourBookingWeb.Data.TourDBContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method723(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method723(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-05-06 11:09:03.9528 ERROR An unhandled exception has occurred while executing the request. System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method723(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at TourBookingWeb.Areas.Admin.Controllers.BookingsController.Index() in D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb\Areas\Admin\Controllers\BookingsController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 11:11:22.3533 INFO Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 11:11:22.3754 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-06 11:11:22.3930 INFO Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-06 11:11:22.4420 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-06 11:11:22.4420 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 11:11:22.4420 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-06 11:11:22.4542 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-06 11:11:22.4542 INFO Applying migration '20250506041023_InitDb1'. 
2025-05-06 11:11:22.4858 ERROR Failed executing DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Categories] (
    [CategoryId] int NOT NULL IDENTITY,
    [CategoryName] nvarchar(200) NOT NULL,
    CONSTRAINT [PK_Categories] PRIMARY KEY ([CategoryId])
); 
2025-05-06 11:13:10.7198 INFO Executed DbCommand (100ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [TourBookingDB]; 
2025-05-06 11:13:10.7694 INFO Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [TourBookingDB] SET READ_COMMITTED_SNAPSHOT ON;
END; 
2025-05-06 11:13:10.7817 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 11:13:10.7817 INFO Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. 
2025-05-06 11:13:10.7973 INFO Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result 
2025-05-06 11:13:10.8401 INFO Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END; 
2025-05-06 11:13:10.8458 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1 
2025-05-06 11:13:10.8458 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2025-05-06 11:13:10.8458 INFO Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2025-05-06 11:13:10.8594 INFO Applying migration '20250506041246_InitDb1'. 
2025-05-06 11:13:10.8806 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Categories] (
    [CategoryId] int NOT NULL IDENTITY,
    [CategoryName] nvarchar(200) NOT NULL,
    CONSTRAINT [PK_Categories] PRIMARY KEY ([CategoryId])
); 
2025-05-06 11:13:10.8806 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [UserId] int NOT NULL IDENTITY,
    [Email] nvarchar(200) NOT NULL,
    [FullName] nvarchar(200) NOT NULL,
    [Phone] nvarchar(200) NOT NULL,
    [Address] nvarchar(200) NOT NULL,
    [Password] nvarchar(200) NOT NULL,
    [Role] nvarchar(200) NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([UserId])
); 
2025-05-06 11:13:10.8806 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Tours] (
    [TourId] int NOT NULL IDENTITY,
    [Title] nvarchar(200) NOT NULL,
    [Capacity] int NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [AdultPrice] decimal(18,2) NOT NULL,
    [ChildPrice] decimal(18,2) NOT NULL,
    [Transport] nvarchar(200) NOT NULL,
    [Departures] nvarchar(max) NOT NULL,
    [Destination] nvarchar(200) NOT NULL,
    [Duration] nvarchar(200) NOT NULL,
    [Itinerary] nvarchar(2000) NOT NULL,
    [CategoryId] int NOT NULL,
    CONSTRAINT [PK_Tours] PRIMARY KEY ([TourId]),
    CONSTRAINT [FK_Tours_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([CategoryId]) ON DELETE NO ACTION
); 
2025-05-06 11:13:10.8806 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Images] (
    [ImageId] int NOT NULL IDENTITY,
    [Url] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NOT NULL,
    [TourId] int NOT NULL,
    [DayNumber] int NULL,
    CONSTRAINT [PK_Images] PRIMARY KEY ([ImageId]),
    CONSTRAINT [FK_Images_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE
); 
2025-05-06 11:13:10.8806 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TourSchedules] (
    [Id] int NOT NULL IDENTITY,
    [TourId] int NOT NULL,
    [DepartureDate] datetime2 NOT NULL,
    [ReturnDate] datetime2 NOT NULL,
    [RemainingSlot] int NOT NULL,
    CONSTRAINT [PK_TourSchedules] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TourSchedules_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE
); 
2025-05-06 11:13:10.8880 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Bookings] (
    [BookingId] int NOT NULL IDENTITY,
    [BookingDate] datetime2 NOT NULL,
    [AdultQuantity] int NOT NULL,
    [ChildQuantity] int NOT NULL,
    [TotalPrice] decimal(18,2) NOT NULL,
    [SpecialRequest] nvarchar(200) NULL,
    [TourId] int NOT NULL,
    [UserId] int NOT NULL,
    [DepartureDate] datetime2 NOT NULL,
    [TourScheduleId] int NULL,
    [PaymentMethod] nvarchar(max) NULL,
    [CategoryId] int NULL,
    CONSTRAINT [PK_Bookings] PRIMARY KEY ([BookingId]),
    CONSTRAINT [FK_Bookings_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([CategoryId]),
    CONSTRAINT [FK_Bookings_TourSchedules_TourScheduleId] FOREIGN KEY ([TourScheduleId]) REFERENCES [TourSchedules] ([Id]),
    CONSTRAINT [FK_Bookings_Tours_TourId] FOREIGN KEY ([TourId]) REFERENCES [Tours] ([TourId]) ON DELETE CASCADE,
    CONSTRAINT [FK_Bookings_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([UserId]) ON DELETE CASCADE
); 
2025-05-06 11:13:10.8880 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_CategoryId] ON [Bookings] ([CategoryId]); 
2025-05-06 11:13:10.8880 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_TourId] ON [Bookings] ([TourId]); 
2025-05-06 11:13:10.8880 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_TourScheduleId] ON [Bookings] ([TourScheduleId]); 
2025-05-06 11:13:10.8880 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Bookings_UserId] ON [Bookings] ([UserId]); 
2025-05-06 11:13:10.8880 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Images_TourId] ON [Images] ([TourId]); 
2025-05-06 11:13:10.8880 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Tours_CategoryId] ON [Tours] ([CategoryId]); 
2025-05-06 11:13:10.8880 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_TourSchedules_TourId] ON [TourSchedules] ([TourId]); 
2025-05-06 11:13:10.8880 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250506041246_InitDb1', N'9.0.4'); 
2025-05-06 11:13:10.8880 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result 
2025-05-06 11:13:39.3088 INFO Now listening on: http://localhost:5062 
2025-05-06 11:13:39.3935 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 11:13:39.3935 INFO Hosting environment: Development 
2025-05-06 11:13:39.3935 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 11:13:43.9379 INFO Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 11:13:44.0350 INFO Executed DbCommand (25ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 11:13:44.1381 INFO Executed DbCommand (9ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:13:44.1688 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:13:44.1702 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:13:44.1702 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:13:44.1702 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:13:44.1702 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:13:44.1702 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:13:44.1702 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:13:44.1702 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:13:45.6740 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 11:13:45.7032 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 11:13:49.9663 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:15:14.5494 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 11:15:14.5494 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[TourId] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 11:15:14.5619 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[DayNumber] = 0 
2025-05-06 11:15:15.5019 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:15:33.5282 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 11:15:33.5313 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 11:15:33.5313 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:15:33.5313 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:15:33.5313 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:15:33.5313 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:15:33.5313 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:15:33.5313 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:15:33.5313 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:15:33.5313 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:15:33.5444 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:15:34.7127 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 11:15:34.7169 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 11:15:36.4497 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 11:15:36.4651 INFO Executed DbCommand (5ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 11:15:44.0867 INFO Executed DbCommand (1ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 11:15:44.0978 INFO Executed DbCommand (4ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-06 11:15:44.0978 INFO Executed DbCommand (1ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 11:15:44.2039 INFO Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-06 11:15:44.2699 INFO Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 200), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p12='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [PaymentMethod], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
UPDATE [TourSchedules] SET [RemainingSlot] = @p11
OUTPUT 1
WHERE [Id] = @p12; 
2025-05-06 11:15:44.2912 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 11:15:44.2912 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 11:15:44.2948 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:15:44.2948 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:15:44.2948 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:15:44.2948 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:15:44.2948 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:15:44.2948 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:15:44.2948 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:15:44.2948 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:15:44.2948 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:15:46.4758 INFO Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:15:59.9205 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 11:15:59.9205 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-06 11:15:59.9371 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-06 11:15:59.9371 INFO Executed DbCommand (3ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-06 11:17:44.4239 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 11:17:44.4239 INFO Executed DbCommand (1ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0 
2025-05-06 11:17:44.4239 INFO Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Bookings] SET [AdultQuantity] = @p0, [ChildQuantity] = @p1, [DepartureDate] = @p2, [TotalPrice] = @p3
OUTPUT 1
WHERE [BookingId] = @p4; 
2025-05-06 11:17:44.4810 INFO Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:17:46.1589 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 11:17:46.1589 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-06 11:17:46.1589 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-06 11:17:46.1589 INFO Executed DbCommand (1ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-06 11:18:22.9067 INFO Now listening on: http://localhost:5062 
2025-05-06 11:18:22.9857 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 11:18:22.9857 INFO Hosting environment: Development 
2025-05-06 11:18:22.9857 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 11:18:40.6983 INFO Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 11:18:40.7882 INFO Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 11:18:40.8837 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:18:40.9128 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:18:40.9128 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:18:40.9128 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:18:40.9128 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:18:40.9128 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:18:40.9128 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:18:40.9128 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:18:40.9128 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:18:42.2710 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 11:18:42.3021 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 11:18:44.0116 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 11:18:44.0246 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 11:18:50.5148 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:18:51.7225 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 11:18:51.7225 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-06 11:18:51.7377 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-06 11:18:51.7377 INFO Executed DbCommand (2ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-06 11:19:45.7850 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 11:19:45.7850 INFO Executed DbCommand (1ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0 
2025-05-06 11:19:45.8815 INFO Executed DbCommand (10ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Bookings] SET [ChildQuantity] = @p0, [SpecialRequest] = @p1, [TotalPrice] = @p2, [TourId] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [BookingId] = @p5; 
2025-05-06 11:19:45.9074 ERROR An exception occurred in the database while saving changes for context type 'TourBookingWeb.Data.TourDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Bookings_Users_UserId". The conflict occurred in database "TourBookingDB", table "dbo.Users", column 'UserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:006b9b6f-4f64-403c-9d4e-54c7353e092c
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Bookings_Users_UserId". The conflict occurred in database "TourBookingDB", table "dbo.Users", column 'UserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:006b9b6f-4f64-403c-9d4e-54c7353e092c
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2025-05-06 11:23:56.1776 INFO Now listening on: http://localhost:5062 
2025-05-06 11:23:56.2593 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 11:23:56.2593 INFO Hosting environment: Development 
2025-05-06 11:23:56.2593 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 11:23:59.3457 INFO Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 11:23:59.4422 INFO Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 11:23:59.5367 INFO Executed DbCommand (3ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:23:59.5702 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:23:59.5702 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:23:59.5702 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:23:59.5702 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:23:59.5702 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:23:59.5766 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:23:59.5766 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:23:59.5766 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:24:01.1643 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 11:24:01.1994 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 11:24:08.9019 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:24:10.5298 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 11:24:10.5498 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-06 11:24:10.5736 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-06 11:24:10.5834 INFO Executed DbCommand (2ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-06 11:24:19.6414 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 11:24:19.6414 INFO Executed DbCommand (1ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0 
2025-05-06 11:24:19.7299 INFO Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Bookings] SET [BookingDate] = @p0, [PaymentMethod] = @p1
OUTPUT 1
WHERE [BookingId] = @p2; 
2025-05-06 11:24:19.7463 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:24:28.6092 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 11:24:28.6092 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-06 11:24:28.6092 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-06 11:24:28.6092 INFO Executed DbCommand (0ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-06 11:24:47.4979 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 11:24:47.4979 INFO Executed DbCommand (2ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0 
2025-05-06 11:24:47.5291 INFO Executed DbCommand (3ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Bookings] SET [ChildQuantity] = @p0, [SpecialRequest] = @p1, [TotalPrice] = @p2, [TourId] = @p3, [TourScheduleId] = @p4
OUTPUT 1
WHERE [BookingId] = @p5;
UPDATE [Users] SET [FullName] = @p6
OUTPUT 1
WHERE [UserId] = @p7; 
2025-05-06 11:24:47.5484 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:24:52.7197 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 11:24:52.7197 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-06 11:24:52.7197 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-06 11:24:52.7197 INFO Executed DbCommand (1ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-06 11:25:02.0933 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 11:25:02.0933 INFO Executed DbCommand (0ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0 
2025-05-06 11:25:02.0933 INFO Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Bookings] SET [TourScheduleId] = @p0
OUTPUT 1
WHERE [BookingId] = @p1; 
2025-05-06 11:25:02.1094 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:25:06.0000 INFO Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 11:25:06.0000 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-06 11:25:06.0000 INFO Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-06 11:25:06.0000 INFO Executed DbCommand (0ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-06 11:26:16.2754 INFO Now listening on: http://localhost:5062 
2025-05-06 11:26:16.3496 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 11:26:16.3496 INFO Hosting environment: Development 
2025-05-06 11:26:16.3496 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 11:26:45.8387 INFO Executed DbCommand (38ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:26:47.4211 INFO Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 11:26:47.4445 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u] 
2025-05-06 11:26:47.4709 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t] 
2025-05-06 11:26:47.4848 INFO Executed DbCommand (3ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0
ORDER BY [t].[DepartureDate] 
2025-05-06 11:26:51.8354 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 11:26:51.8438 INFO Executed DbCommand (2ms) [Parameters=[@__booking_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__booking_TourId_0 
2025-05-06 11:26:51.9148 INFO Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Email] = @p0
OUTPUT 1
WHERE [UserId] = @p1; 
2025-05-06 11:26:51.9336 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:29:02.7905 INFO Now listening on: http://localhost:5062 
2025-05-06 11:29:02.8858 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 11:29:02.8858 INFO Hosting environment: Development 
2025-05-06 11:29:02.8858 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 11:29:54.5516 INFO Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:29:56.7590 INFO Executed DbCommand (18ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 11:29:56.8380 INFO Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Bookings]
OUTPUT 1
WHERE [BookingId] = @p0; 
2025-05-06 11:29:56.9042 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:29:58.1286 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:33:33.6277 INFO Now listening on: http://localhost:5062 
2025-05-06 11:33:33.7054 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 11:33:33.7054 INFO Hosting environment: Development 
2025-05-06 11:33:33.7054 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 11:34:43.4581 INFO Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 11:34:43.5425 INFO Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 11:34:43.6318 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:34:43.6617 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:34:43.6617 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:34:43.6617 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:34:43.6617 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:34:43.6617 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:34:43.6617 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:34:43.6617 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:34:43.6617 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:34:45.8898 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 11:34:45.8898 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 11:34:45.8898 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:34:45.8898 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:34:45.8898 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:34:45.8898 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:34:45.8898 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:34:45.8898 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:34:45.8898 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:34:45.8898 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:34:45.9034 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:34:51.9680 INFO Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:35:10.2624 INFO Now listening on: http://localhost:5062 
2025-05-06 11:35:10.3391 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 11:35:10.3391 INFO Hosting environment: Development 
2025-05-06 11:35:10.3391 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 11:35:23.2577 INFO Now listening on: http://localhost:5062 
2025-05-06 11:35:23.3405 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 11:35:23.3413 INFO Hosting environment: Development 
2025-05-06 11:35:23.3413 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 11:35:27.3656 INFO Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 11:35:27.4748 INFO Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 11:35:27.5883 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:35:27.6334 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:35:27.6334 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:35:27.6334 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:35:27.6379 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:35:27.6379 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:35:27.6379 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:35:27.6379 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:35:27.6379 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:35:34.9949 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:35:39.6631 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 11:35:39.6974 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 11:35:41.2323 INFO Executed DbCommand (10ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 11:35:41.2323 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 11:35:52.4994 INFO Executed DbCommand (9ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 11:35:52.5139 INFO Executed DbCommand (4ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-06 11:35:52.5139 INFO Executed DbCommand (5ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 11:35:52.6391 INFO Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (Size = 200), @p3='?' (Size = 200), @p4='?' (Size = 200), @p5='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [Email], [FullName], [Password], [Phone], [Role])
OUTPUT INSERTED.[UserId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5); 
2025-05-06 11:35:52.7143 INFO Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 200), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p12='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [PaymentMethod], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
UPDATE [TourSchedules] SET [RemainingSlot] = @p11
OUTPUT 1
WHERE [Id] = @p12; 
2025-05-06 11:35:52.7408 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 11:35:52.7408 INFO Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 11:35:52.7486 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:35:52.7486 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:35:52.7486 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:35:52.7486 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:35:52.7486 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:35:52.7486 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:35:52.7486 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:35:52.7486 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:35:52.7486 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:35:56.0688 INFO Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:36:00.4012 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 11:36:00.4105 INFO Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Bookings]
OUTPUT 1
WHERE [BookingId] = @p0; 
2025-05-06 11:36:00.4233 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:36:10.0001 INFO Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 11:36:10.0001 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 11:36:12.4603 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 11:36:12.4603 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 11:36:47.0102 INFO Executed DbCommand (8ms) [Parameters=[@__TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
WHERE [t].[TourId] = @__TourId_0 
2025-05-06 11:36:47.0133 INFO Executed DbCommand (2ms) [Parameters=[@__TourId_0='?' (DbType = Int32), @__DepartureDate_Date_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__TourId_0 AND CONVERT(date, [t].[DepartureDate]) = @__DepartureDate_Date_1 
2025-05-06 11:36:47.0133 INFO Executed DbCommand (1ms) [Parameters=[@__Email_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role]
FROM [Users] AS [u]
WHERE [u].[Email] = @__Email_0 
2025-05-06 11:36:47.0133 INFO Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 200), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p12='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Bookings] ([AdultQuantity], [BookingDate], [CategoryId], [ChildQuantity], [DepartureDate], [PaymentMethod], [SpecialRequest], [TotalPrice], [TourId], [TourScheduleId], [UserId])
OUTPUT INSERTED.[BookingId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
UPDATE [TourSchedules] SET [RemainingSlot] = @p11
OUTPUT 1
WHERE [Id] = @p12; 
2025-05-06 11:36:47.0392 INFO Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 11:36:47.0392 INFO Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 11:36:47.0444 INFO Executed DbCommand (2ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:36:47.0444 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:36:47.0444 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:36:47.0444 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:36:47.0444 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:36:47.0444 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:36:47.0444 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:36:47.0444 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:36:47.0444 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:36:50.2883 INFO Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:41:10.0725 INFO Now listening on: http://localhost:5062 
2025-05-06 11:41:10.1635 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 11:41:10.1635 INFO Hosting environment: Development 
2025-05-06 11:41:10.1635 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 11:41:17.4156 INFO Executed DbCommand (46ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:41:21.6028 INFO Executed DbCommand (23ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId]
FROM [Bookings] AS [b]
WHERE [b].[BookingId] = @__id_0 
2025-05-06 11:41:21.6795 INFO Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Bookings]
OUTPUT 1
WHERE [BookingId] = @p0; 
2025-05-06 11:41:21.7434 INFO Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [b].[BookingId], [b].[AdultQuantity], [b].[BookingDate], [b].[CategoryId], [b].[ChildQuantity], [b].[DepartureDate], [b].[PaymentMethod], [b].[SpecialRequest], [b].[TotalPrice], [b].[TourId], [b].[TourScheduleId], [b].[UserId], [u].[UserId], [u].[Address], [u].[Email], [u].[FullName], [u].[Password], [u].[Phone], [u].[Role], [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Bookings] AS [b]
INNER JOIN [Users] AS [u] ON [b].[UserId] = [u].[UserId]
INNER JOIN [Tours] AS [t] ON [b].[TourId] = [t].[TourId]
ORDER BY [b].[BookingDate] DESC 
2025-05-06 11:43:15.0661 INFO Now listening on: http://localhost:5062 
2025-05-06 11:43:15.1487 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 11:43:15.1487 INFO Hosting environment: Development 
2025-05-06 11:43:15.1487 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 11:43:18.4821 INFO Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 11:43:18.5726 INFO Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 11:43:18.6666 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:43:18.6992 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:43:18.7008 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:43:18.7008 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:43:18.7008 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:43:18.7008 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:43:18.7008 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:43:18.7008 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:43:18.7008 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:43:20.5405 INFO Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 11:43:20.5732 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 11:43:22.9931 INFO Executed DbCommand (14ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 11:43:23.0068 INFO Executed DbCommand (4ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 11:50:23.4941 INFO Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 11:50:23.4982 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 11:50:25.2681 INFO Executed DbCommand (6ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 11:50:25.2681 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 11:50:26.0579 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 11:50:26.0676 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 11:50:28.1033 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 11:50:28.1033 INFO Executed DbCommand (0ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 11:50:29.2603 INFO Executed DbCommand (1ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 11:50:29.2625 INFO Executed DbCommand (0ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 11:50:33.4260 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 11:50:33.4260 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 11:50:35.0036 INFO Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 11:50:35.0036 INFO Executed DbCommand (1ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 11:50:36.4762 INFO Executed DbCommand (0ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 11:50:36.4762 INFO Executed DbCommand (0ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 11:52:41.0893 INFO Now listening on: http://localhost:5062 
2025-05-06 11:52:41.1615 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 11:52:41.1615 INFO Hosting environment: Development 
2025-05-06 11:52:41.1615 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 11:52:48.9332 INFO Executed DbCommand (41ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 11:52:49.0684 INFO Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 11:52:49.2320 INFO Executed DbCommand (6ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:52:49.2698 INFO Executed DbCommand (1ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:52:49.2698 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:52:49.2698 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:52:49.2698 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:52:49.2698 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:52:49.2698 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:52:49.2698 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:52:49.2698 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:52:50.5007 INFO Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 11:52:50.5289 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 11:52:52.3124 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 11:52:52.3124 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 11:52:52.4865 ERROR An unhandled exception has occurred while executing the request. System.InvalidOperationException: RenderSectionAsync invocation in '/Views/Shared/_Layout.cshtml' is invalid. The section 'Scripts' has already been rendered.
   at Microsoft.AspNetCore.Mvc.Razor.RazorPage.RenderSectionAsyncCore(String sectionName, Boolean required)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPage.RenderSection(String name, Boolean required)
   at AspNetCoreGeneratedDocument.Views_Shared__Layout.<ExecuteAsync>b__29_1() in D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb\Views\Shared\_Layout.cshtml:line 140
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.SetOutputContentAsync()
   at AspNetCoreGeneratedDocument.Views_Shared__Layout.ExecuteAsync()
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 11:53:55.7165 INFO Now listening on: http://localhost:5062 
2025-05-06 11:53:55.8015 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 11:53:55.8015 INFO Hosting environment: Development 
2025-05-06 11:53:55.8015 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 11:54:25.9260 INFO Executed DbCommand (42ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 11:54:26.0149 INFO Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 11:54:26.1317 INFO Executed DbCommand (9ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:54:26.1757 INFO Executed DbCommand (7ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:54:26.1757 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:54:26.1757 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:54:26.1757 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:54:26.1757 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:54:26.1757 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:54:26.1757 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:54:26.1757 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:54:27.2805 INFO Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 11:54:27.3077 INFO Executed DbCommand (3ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 11:54:28.9560 INFO Executed DbCommand (12ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 11:54:29.0237 INFO Executed DbCommand (9ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 11:54:29.1502 ERROR An unhandled exception has occurred while executing the request. System.InvalidOperationException: RenderSectionAsync invocation in '/Views/Shared/_Layout.cshtml' is invalid. The section 'Scripts' has already been rendered.
   at Microsoft.AspNetCore.Mvc.Razor.RazorPage.RenderSectionAsyncCore(String sectionName, Boolean required)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPage.RenderSection(String name, Boolean required)
   at AspNetCoreGeneratedDocument.Views_Shared__Layout.<ExecuteAsync>b__29_1() in D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb\Views\Shared\_Layout.cshtml:line 140
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.SetOutputContentAsync()
   at AspNetCoreGeneratedDocument.Views_Shared__Layout.ExecuteAsync()
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-06 11:56:14.4514 INFO Now listening on: http://localhost:5062 
2025-05-06 11:56:14.5267 INFO Application started. Press Ctrl+C to shut down. 
2025-05-06 11:56:14.5267 INFO Hosting environment: Development 
2025-05-06 11:56:14.5267 INFO Content root path: D:\HK2-2024-2025\Công Nghệ .Net\CuoiKy\TourBookingWeb\TourBookingWeb 
2025-05-06 11:56:25.2115 INFO Executed DbCommand (37ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Tours] AS [t] 
2025-05-06 11:56:25.3193 INFO Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
FROM [Tours] AS [t]
ORDER BY [t].[Title]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY 
2025-05-06 11:56:25.4257 INFO Executed DbCommand (4ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:56:25.4609 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:56:25.4609 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:56:25.4609 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:56:25.4609 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:56:25.4609 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:56:25.4657 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:56:25.4657 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:56:25.4657 INFO Executed DbCommand (0ms) [Parameters=[@__8__locals1_tour_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__8__locals1_tour_TourId_0 AND [i].[DayNumber] = 0 
2025-05-06 11:56:26.7565 INFO Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t1].[TourId], [t1].[AdultPrice], [t1].[Capacity], [t1].[CategoryId], [t1].[ChildPrice], [t1].[Departures], [t1].[Description], [t1].[Destination], [t1].[Duration], [t1].[Itinerary], [t1].[Title], [t1].[Transport], [t0].[Id], [t0].[DepartureDate], [t0].[RemainingSlot], [t0].[ReturnDate], [t0].[TourId]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__id_0
) AS [t1]
LEFT JOIN [TourSchedules] AS [t0] ON [t1].[TourId] = [t0].[TourId]
ORDER BY [t1].[TourId] 
2025-05-06 11:56:26.7851 INFO Executed DbCommand (2ms) [Parameters=[@__Model_TourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM [Images] AS [i]
WHERE [i].[TourId] = @__Model_TourId_0 
2025-05-06 11:56:29.8289 INFO Executed DbCommand (3ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 11:56:29.8873 INFO Executed DbCommand (2ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
2025-05-06 12:24:51.9043 INFO Executed DbCommand (14ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t0].[TourId], [t0].[AdultPrice], [t0].[Capacity], [t0].[CategoryId], [t0].[ChildPrice], [t0].[Departures], [t0].[Description], [t0].[Destination], [t0].[Duration], [t0].[Itinerary], [t0].[Title], [t0].[Transport], [i].[ImageId], [i].[DayNumber], [i].[Description], [i].[TourId], [i].[Url]
FROM (
    SELECT TOP(1) [t].[TourId], [t].[AdultPrice], [t].[Capacity], [t].[CategoryId], [t].[ChildPrice], [t].[Departures], [t].[Description], [t].[Destination], [t].[Duration], [t].[Itinerary], [t].[Title], [t].[Transport]
    FROM [Tours] AS [t]
    WHERE [t].[TourId] = @__tourId_0
) AS [t0]
LEFT JOIN [Images] AS [i] ON [t0].[TourId] = [i].[TourId]
ORDER BY [t0].[TourId] 
2025-05-06 12:24:51.9043 INFO Executed DbCommand (4ms) [Parameters=[@__tourId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[DepartureDate], [t].[RemainingSlot], [t].[ReturnDate], [t].[TourId]
FROM [TourSchedules] AS [t]
WHERE [t].[TourId] = @__tourId_0 AND [t].[RemainingSlot] > 0
ORDER BY [t].[DepartureDate] 
